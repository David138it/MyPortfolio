Feedback: david138it@gmail.com; telegram - @david138it; http://www.linkedin.com/in/david-gabuniya-3bb954237; https://github.com/David138it;

Банковское хранилище данных с функцией обнаружения мошенничества
	Task:
	Для защиты дипломного проекта по теме "Банковское хранилище данных с функцией обнаружения мошенничества" при работе с транзакционными банковскими данными с помощью Python и SQL реализовал собственное хранилище данных - DWH, процесс сбора, очистки, трансформации и хранения данных, систему автоматического поиска мошеннических операций (AntiFraud-система)
	Task:
	Docker установка
	Decision:
sudo apt update
sudo apt install apt-transport-https ca-certificates curl software-properties-common
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg
echo"deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable"| sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
sudo apt update
apt-cache policy docker-ce
sudo apt install docker-ce
systemctl status docker
sudo docker run hello-world
sudo usermod -aG docker tuser
docker run hello-world
curl -SL https://github.com/docker/compose/releases/download/v2.6.0/docker-compose-linux-x86_64 -o ~/.docker/cli-plugins/docker-compose
chmod +x ~/.docker/cli-plugins/docker-compose
docker compose version
	Task:
	Разработать ETL процесс, получающий ежедневную выгрузку данных (предоставляется за 3 дня), загружающий ее в хранилище данных и ежедневно строящий отчет.
	Ежедневно некие информационные системы выгружают три следующих файла:
	1. Список транзакций за текущий день. Формат – CSV.
	2. Список терминалов полным срезом. Формат – XLSX.
	3. Список паспортов, включенных в «черный список» - с накоплением с начала месяца. Формат – XLSX.
	Сведения о картах, счетах и клиентах хранятся в СУБД PostgreSQL. Во вложении реквизиты для подключения. 
	Вам предоставляется выгрузка за последние три дня, ее надо обработать. В качестве хранилища выступает ваша учебная база (edu). Данные должны быть загружены в хранилище со следующей структурой (имена сущностей указаны по существу, без особенностей правил нейминга, указанных далее).
	Типы данных в полях можно изменять на однородные если для этого есть необходимость. Имена полей менять нельзя. Ко всем таблицам SCD1 должны
	быть добавлены технические поля create_dt, update_dt; ко всем таблицам SCD2 должны быть добавлены технические поля effective_from, effective_to, deleted_flg.
	По результатам загрузки ежедневно необходимо строить витрину отчетности по мошенническим операциям. Витрина строится накоплением, каждый новый отчет укладывается в эту же таблицу с новым report_dt.
	В витрине должны содержаться следующие поля:
	1. event_dt - Время наступления события. Если событие наступило по результату нескольких действий – указывается время действия, по которому установлен факт мошенничества.
	2. passport - Номер паспорта клиента, совершившего мошенническую операцию.
	3. fio - ФИО клиента, совершившего мошенническую операцию.
	4. phone - Номер телефона клиента, совершившего мошенническую операцию.
	5. event_type - Описание типа мошенничества.
	6. report_dt - Время построения отчета.
	Признаки мошеннических операций:
	1. Совершение операции при просроченном или заблокированном паспорте.
	2. Совершение операции при недействующем договоре.
	3. Совершение операций в разных городах в течение одного часа.
	4. Попытка подбора суммы. В течение 20 минут проходит более 3х операций соследующим шаблоном – каждая последующая меньше предыдущей, при этом отклонены все кроме последней. Последняя операция (успешная) в такой цепочке считается мошеннической.
	При именовании таблиц необходимо придерживаться следующих правил (для автоматизации проверки):
	1. DE13MA.<CODE>_STG_<TABLE_NAME> - Таблицы для размещения стейджинговых таблиц (первоначальная загрузка), промежуточное выделение инкремента, если требуется. Временные таблицы, если такие потребуются в расчете, можно также складывать с таким именованием. Имя таблиц можете выбирать произвольное, но смысловое.
	2. DE13MA.<CODE>_DWH_FACT_<TABLE_NAME> - Таблицы фактов, загруженных в хранилище. В качестве фактов выступают сами транзакции и «черный список» паспортов. Имя таблиц – как в ER диаграмме.
	3. DE13MA.<CODE>_DWH_DIM_<TABLE_NAME> - Таблицы измерений, хранящиеся в формате SCD1. Имя таблиц – как в ER диаграмме.
	4. DE13MA.<CODE>_DWH_DIM_<TABLE_NAME>_HIST - Таблицы измерений, хранящиеся в SCD2 формате (только для тех, кто выполняет усложненное задание). Имя таблиц – как в ER диаграмме.
	5. DE13MA.<CODE>_REP_FRAUD - Таблица с отчетом.
	6. DE13MA.<CODE>_META_<TABLE_NAME> - Таблицы для хранения метаданных. Имя таблиц можете выбирать произвольное, но
	смысловое.
	7. <CODE> - 4 буквы вашего персонального кода.
	Выгружаемые файлы именуются согласно следующему шаблону:
	1. transactions_DDMMYYYY.txt
	2. passport_blacklist_DDMMYYYY.xlsx
	3. terminals_DDMMYYYY.xlsx
	Предполагается что в один день приходит по одному такому файлу. После загрузки соответствующего файла он должен быть переименован в файл с расширением .backup чтобы при следующем запуске файл не искался и перемещен в каталог archive:
	1. transactions_DDMMYYYY.txt.backup
	2. passport_blacklist_DDMMYYYY.xlsx.back
	3. upterminals_DDMMYYYY.xlsx.backup
	Желающие могут придумать, обосновать и реализовать более технологичные и учитывающие сбои способы обработки (за это будет повышен балл).
	В classroom выкладывается zip-архив, содержащий следующие файлы и каталоги:
	1. main.py - Файл, обязательный. Основной процесс обработки.
	2. файлы с данными - Файл, обязательный. Те файлы, которые вы получили в качестве задания. Просто скопируйте все 9 файлов.
	3. main.ddl - Файл, обязательный. Файл с SQL кодом для создания всех необходимых объектов в базе edu.
	4. main.cron - Файл, обязательный. Файл для постановки вашего процесса на расписание, в формате crontab
	5. archive - Каталог, обязательный. Пустой, сюда должны перемещаться отработанные файлы
	6. sql_scripts - Каталог, необязательный. Если вы включаете в main.py какие-то SQL скрипты, вынесенные в отдельные файлы – помещайте их сюда.
	7. py_scripts - Каталог, необязательный. Если вы включаете в main.py какие-то python скрипты, вынесенные в отдельные файлы – помещайте их сюда.
	Decision:
	По следующим признакам получилось выявить мошеннические транзакции: выполнение операции с просроченным или заблокированным паспортом, выполнение операции с недействительным контрактом, выполнение операций в разных городах в течение одного часа
	Source:
	https://dzen.ru/a/Ypr65Wh4jmLimA3o

Разработка скриптов на Bash и Python для автоматизации работы
	Task:
	Разработал скрипты на языках Bash и Python для автоматизации работы в компьютерных классах и аудиториях
	Task:
	В компьютерном классе по 20 компьютеров и в каждом надо было установить Microsoft Office. Для этого я написал скрипты инсталлятор и конфигуратор, которые позволяют мне выбрать дистрибутив, в котором я установливаю, саму программу для установки и настройки (не только офис)
	Decision:
	$ vim Linux-Installer.sh
	$ cat Linux-Installer.sh
	#!/bin/bash
	checkcmd(){
	if [ $? -eq 0 ]; then
		echo ! The command was executed successfully
	else
		echo ! The command was executed with an error
	fi
	} 
	#echo YOUR-PASSWORD | sudo -S sudo dnf update
	#checkcmd
	# https://stackoverflow.com/questions/226703/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script
	while true; do
		read -p "Do you want to install the program? (y/n) " yn
		case $yn in
			[Yy]* ) 
				echo -n "Select the distribution where you want to install the program (Centos 9 - 1 / Ubuntu 22.04 - 2 / Redos 7.3 - 3): "
				read choicedistr
				case "$choicedistr" in
					1|Centos) 
						echo YOUR-PASSWORD | sudo -S sudo dnf -y update
						checkcmd
						echo -n "Select a program (Test - 0 / Sublime Text - 1 / Postgresql - 2 / PgAdmin - 3 / Git - 4 / Kvm - 5 / nfts-3g - 6 / libreoffice - 7): "
						read choiceprogr
						case "$choiceprogr" in
							0)
								echo YOUR-PASSWORD | sudo -S sudo dnf -y update
								checkcmd
								;;
							1)
								# https://www.sublimetext.com/docs/linux_repositories.html#dnf
								echo YOUR-PASSWORD | sudo -S sudo rpm -v --import https://download.sublimetext.com/sublimehq-rpm-pub.gpg
								checkcmd
								echo YOUR-PASSWORD | sudo -S sudo dnf config-manager --add-repo https://download.sublimetext.com/rpm/stable/x86_64/sublime-text.repo
								checkcmd
								echo YOUR-PASSWORD | sudo -S sudo dnf -y install sublime-text
								checkcmd
								;;
							2)
								# https://www.postgresql.org/download/linux/redhat/
								echo YOUR-PASSWORD | sudo -S sudo dnf install -y https://download.postgresql.org/pub/repos/yum/reporpms/EL-9-x86_64/pgdg-redhat-repo-latest.noarch.rpm
								checkcmd
								echo YOUR-PASSWORD | sudo -S sudo dnf -qy module disable postgresql
								checkcmd
								echo YOUR-PASSWORD | sudo -S sudo dnf install -y postgresql15-server
								checkcmd
								echo YOUR-PASSWORD | sudo -S sudo /usr/pgsql-15/bin/postgresql-15-setup initdb
								checkcmd
								echo YOUR-PASSWORD | sudo -S sudo systemctl enable postgresql-15
								echo YOUR-PASSWORD | sudo -S sudo systemctl start postgresql-15
								checkcmd
								;;
							3)
								# https://www.pgadmin.org/download/pgadmin-4-rpm/
								echo YOUR-PASSWORD | sudo -S sudo rpm -i https://ftp.postgresql.org/pub/pgadmin/pgadmin4/yum/pgadmin4-redhat-repo-2-1.noarch.rpm
								checkcmd
								echo YOUR-PASSWORD | sudo -S sudo yum install -y pgadmin4
								checkcmd
								echo YOUR-PASSWORD | sudo -S sudo yum install -y pgadmin4-desktop
								checkcmd
								echo YOUR-PASSWORD | sudo -S sudo yum install -y pgadmin4-web
								checkcmd
								sudo /usr/pgadmin4/bin/setup-web.sh
								checkcmd
								echo YOUR-PASSWORD | sudo -S sudo yum upgrade -y pgadmin4
								checkcmd
								;;
							4)
								# https://unixcop.com/how-to-install-git-on-centos-9-stream-fedora/
								echo YOUR-PASSWORD | sudo -S sudo dnf -y install git
								checkcmd
								git --version
								;;
							5)
								# https://technixleo.com/install-kvm-on-centos-alma-rhel-9/
								egrep -c '(vmx|svm)' /proc/cpuinfo
								echo YOUR-PASSWORD | sudo -S sudo dnf install -y qemu-kvm qemu-img libvirt virt-install libvirt-client virt-manager
								checkcmd
								lsmod | grep kvm
								echo YOUR-PASSWORD | sudo -S sudo systemctl enable --now libvirtd
								checkcmd
								sudo virt-host-validate							
								;;
							6)
								# https://itisgood.ru/2019/03/26/kak-smontirovat-disk-ntfs-na-centos-rhel-scientific-linux/
								echo YOUR-PASSWORD | sudo -S sudo yum -y install epel-release
								checkcmd
								echo YOUR-PASSWORD | sudo -S sudo yum -y install ntfs-3g
								checkcmd			
								;;
							7)
								echo YOUR-PASSWORD | sudo -S sudo dnf -y install libreoffice
								checkcmd			
								;;
						esac
						;;
					2|u|U|Ubuntu) 
						echo YOUR-PASSWORD | sudo -S sudo apt -y update
						echo YOUR-PASSWORD | sudo -S sudo apt -y upgrade
						checkcmd
						echo -n "Select a program (Test - 0 / Net-Tools - 1 / Ssh - 2): "
						read choiceprogr
						case "$choiceprogr" in
							0)
								echo YOUR-PASSWORD | sudo -S sudo apt-get -y update
								checkcmd
								;;
							1)
								echo YOUR-PASSWORD | sudo -S sudo apt-get install net-tools
								checkcmd
								;;
							2)#https://help.reg.ru/support/servery-vps/oblachnyye-servery/rabota-s-serverom/kak-ustanovit-i-nastroit-ssh
								echo YOUR-PASSWORD | sudo -S sudo apt-get install ssh
								checkcmd
								echo YOUR-PASSWORD | sudo -S sudo apt-get install openssh-server
								checkcmd
								systemctl status ssh
								;;
						esac
						exit 0
						;;
					3|r|R|Redos)
						echo YOUR-PASSWORD | sudo -S sudo yum -y update
						checkcmd
						echo -n "Select a program (Test - 0 / Office - 1 / Playonlinux - 2): "
						read choiceprogr
						case "$choiceprogr" in
							0)
								echo YOUR-PASSWORD | sudo -S sudo yum -y update
								checkcmd
								;;						
							1)
								echo YOUR-PASSWORD | sudo -S sudo yum -y update
								checkcmd
								wine /LINKS/MS\ Office\ 2007-10-13/Office_Professional_Plus_2007_W32_Russia/SETUP.EXE
								checkcmd	
								;;
							2)
								echo YOUR-PASSWORD | sudo -S sudo yum -y update
								checkcmd
								echo YOUR-PASSWORD | sudo -S sudo touch /etc/yum.repos.d/playonlinux.repo
								echo YOUR-PASSWORD | sudo -S sudo echo '[playonlinux]
								name=PlayOnLinux Official repository
								baseurl=http://rpm.playonlinux.com/fedora/yum/base
								enable=1
								gpgcheck=0
								gpgkey=http://rpm.playonlinux.com/public.gpg' > /etc/yum.repos.d/playonlinux.repo
								cat /etc/yum.repos.d/playonlinux.repo
								checkcmd
								echo YOUR-PASSWORD | sudo -S sudo yum -y install playonlinux nc jq
								checkcmd
								echo YOUR-PASSWORD | sudo -S sudo reboot							
								;;
						esac
						;;
					*) 
						echo "Nothing was entered."
						;;
				esac			
				;;
			[Nn]* ) 
				exit
				;;
			* ) 
				echo "Please answer yes or no."
				;;
		esac
	done
	exit 0
	$ ./Linux-Installer.sh
	Do you want to install the program? (y/n) y
	Select the distribution where you want to install the program (Centos 9 - 1 / Ubuntu 22.04 - 2 / Redos 7.3 - 3): 1
	Select a program (Test - 0 / Sublime Text - 1 / Postgresql - 2 / PgAdmin - 3 / Git - 4 / Kvm - 5 / nfts-3g - 6 / libreoffice - 7): 0
	Do you want to install the program? (y/n) y
	Select the distribution where you want to install the program (Centos 9 - 1 / Ubuntu 22.04 - 2 / Redos 7.3 - 3): 2
	Select a program (Test - 0 / Net-Tools - 1 / Ssh - 2): 0
	$ vim Linux-Config.sh
	$ cat Linux-Config.sh
	#!/bin/bash 
	checkcmd(){
	if [ $? -eq 0 ]; then
		echo ! The command was executed successfully
	else
		echo ! The command was executed with an error
	fi
	}
	# https://stackoverflow.com/questions/226703/how-do-i-prompt-for-yes-no-cancel-input-in-a-linux-shell-script
	while true; do
		read -p "Do you want to configure the program? (y/n) " yn
		case $yn in
			[Yy]* ) 
				echo -n "Select the distribution where you want to configure the program (Redhat - 1 / Debian - 2): "
				read choicedistr
				case "$choicedistr" in
					1|r|R|Redhat) 
						echo YOUR-PASSWORD | sudo -S sudo dnf -y update
						checkcmd
						echo -n "Select a program (Test - 0 / Disabling Lamp - 1 / Starting Lamp - 2 / Add users in postgressql - 3 / Moving linux folders to another disk - 4): "
						read choiceprogr
						case "$choiceprogr" in
							0)
								echo YOUR-PASSWORD | sudo -S sudo dnf -y update
								checkcmd
								;;
							1)
								echo YOUR-PASSWORD | sudo -S sudo service apache2 stop
								checkcmd
								echo YOUR-PASSWORD | sudo -S sudo service mysql stop
								checkcmd
								;;
							2)
								echo YOUR-PASSWORD | sudo -S sudo service apache2 start
								checkcmd
								echo YOUR-PASSWORD | sudo -S sudo service mysql start
								checkcmd
								;;
							3) #https://www.dmosk.ru/miniinstruktions.php?mini=postgresql-users&ysclid=lig0a2xuou515754413#create
								echo -n "Please come up with a new user: "
								read userdb
								echo -n "Please come up with a new password: "
								read passwdb
								#echo YOUR-PASSWORD | sudo -S 
								cd /tmp
								sudo -u postgres -H -- psql -d template1 -c "CREATE USER $userdb WITH PASSWORD '$passwdb';"
								#psql -U postgres -d template1 -c "CREATE USER tuser0 WITH PASSWORD 'Tpsswd';"
								checkcmd
								echo -n "Please come up with a new base: "
								read namedb
								sudo -u postgres -H -- psql -d template1 -c "CREATE database $namedb;"
								checkcmd
								sudo -u postgres -H -- psql -d template1 -c "GRANT ALL PRIVILEGES ON DATABASE "$namedb" to $userdb;"
								checkcmd
								sudo -u postgres -H -- psql -d template1 -c "\c $namedb;"
								checkcmd
								sudo -u postgres -H -- psql -d template1 -c "GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO "$userdb";"
								checkcmd
								;;
							4) #http://sysengineering.ru/notes/peremeschenie-papok-linux-na-drugoy-disk?ysclid=lisfix46x1712981898
								lsblk
								echo -n "USB device for moving the base (hint above): "
								read mntusb
								echo YOUR-PASSWORD | sudo -S sudo fdisk $mntusb
								lsblk
								echo -n "USB device for moving the base (hint above): "
								read mntusb1
								echo -n "Enter the file system type: "
								read mntfs
								echo YOUR-PASSWORD | sudo -S sudo mkfs -t $mntfs $mntusb1
								checkcmd
								echo YOUR-PASSWORD | sudo -S sudo mount $mntusb1 /mnt
								checkcmd
								shopt -s dotglob
								echo -n "Which directory do you need to move: "
								read movedir
								echo YOUR-PASSWORD | sudo -S sudo rsync -aulvXpogtr $movedir/* /mnt
								checkcmd
								ls -Zd $movedir
								ls -Zd /mnt
								echo -n "Change the security settings of a new folder (hint above): "
								read mntset
								echo YOUR-PASSWORD | sudo -S sudo chcon -t $mntset /mnt
								checkcmd
								ls -Zd /mnt
								echo YOUR-PASSWORD | sudo -S sudo umount /mnt
								checkcmd
								echo YOUR-PASSWORD | sudo -S sudo blkid
								echo -n "Enter the UUID of the disk (hint above): "
								read mntuid
								echo YOUR-PASSWORD | sudo -S sudo sh -c "echo 'UUID=$mntuid   $movedir  $mntfs  defaults,noatime,nofail 0 2' >> /etc/fstab"
								checkcmd
								echo YOUR-PASSWORD | sudo -S sudo cat /etc/fstab | grep $mntfs
								echo YOUR-PASSWORD | sudo -S sudo mv $movedir $movedir.back
								echo YOUR-PASSWORD | sudo -S sudo mkdir $movedir
								echo YOUR-PASSWORD | sudo -S sudo mount -av
								checkcmd
								ls $movedir
								lsblk						
								;;
						esac
						;;
					2|d|D|Debian) 
						echo "deb"
						exit 0
						;;
					*) 
						echo "Nothing was entered."
						;;
				esac			
				;;
			[Nn]* ) 
				exit
				;;
			* ) 
				echo "Please answer yes or no."
				;;
		esac
	done
	exit 0
	$ ./Linux-Config.sh
	Do you want to configure the program? (y/n) y
	Select the distribution where you want to configure the program (Redhat - 1 / Debian - 2): 1
	Select a program (Test - 0 / Disabling Lamp - 1 / Starting Lamp - 2 / Add users in postgressql - 3 / Moving linux folders to another disk - 4): 0
	Do you want to configure the program? (y/n) n
	Task:
	Столкнулся с такой проблемой, что маленький неттоп флешки не читает, он не был добавлен в домен и антивирус на нем не стоял. Убедимся на другой машине, в моем случае ноутбуке, что флешка спокойно видит на нем файлы.	То есть это чистая флешка, не зараженная, и попробуем ее вставить в тот проблемный неттоп. Тут мы увидим, что во флешке другая информация будет. Как будто в самой флешке отображается сама флешка, и если ее открыть (что делать не стоит) тот там и будут наши файлы. на самом деле они будут зашифрованны и флешка заражена. Надо это исправлять. В тот момент у нас не было в неттопе никакого антивируса, поэтому я установил бесплатный антивирус Касперский FREE с официального сайта. И вот, он выдал в момент запуска после установки рекомендации по устранении проблм в компьютере. - Жмем устранить и перезагрузимся - В следующем запуске антивирус покажет информацию об устранении проблем, и можем сразу вставить флешку в неттопе. Тут мы увидим, что антвирус удалил какой-то файл (это и есть вирус) Открываем саму флешку после удаления вируса, а там пустой файл, хотя система показывает, что флешка заполнена. Он содержит зашифрованные файлы. Давайте попробуем их восстановить. Есть скрипт, который возвращает данные. Вставьте этот файл на флешку - запустите его - увидите файл и папку с файлами, которые ему удалось восстановить - Все готово, и неттоп мы подлечили, и данные со флешки восстановили, и антивирус бесплатный установили, и главное что этот бюджетный вариант с восстановлением вполне корректно работает.
	Decision:
	$ vim Windows-FlashDriveRecovery.bat
	$ cat Windows-FlashDriveRecovery.bat
	dir /AS /B > list.txt 
	FOR /F "eol=# tokens=1* delims=:" %%i in (list.txt) do ( 
	attrib -s -h -r "%%i" 
	) 
	pause
	Task:
	Разработать программу "Менеджер паролей", в которой можно вносить данные в файле.
	Decision:
	$ cat Py-PasswordStorage.py
	'''
	links      | email      | login | password  	- Keys
	http://fds | fgd@fgd.ru | admin | fgdfgdf 	- Values
	'''
	repeat="y"
	while repeat == "y":
		keys=['links', 'mails', 'logins', 'passwords']
		print(keys)	
		#print(keys[1])
		values=[]
		#print(values)
		link, email, login, password= input("Enter the link: "), input("Enter email: "), input("Enter login: "), input("Enter password: ")
		values.append(link)
		values.append(email)
		values.append(login)
		values.append(password)
		print(values)
		#print(values[2])
		row={}
		for i in range(len(keys)):
			#print(keys[i])
			#row[keys[i]] = None
			row[keys[i]] = values[i]
		print(row)
		createfile = input("Create new file? (y/n): ")
		if createfile == "y":
			namefile = input("Name the file where the passwords will be stored: ")
			with open(namefile,'w') as file:
				#file.write(str(row))
				for key, value in row.items():
					#print("Key: " + key)
					keyRow="|	"+str(key)+"	|"
					file.write(keyRow)
				file.write("\n")
				for key, value in row.items():
					valueRow="|	"+str(value)+"	|"
					file.write(valueRow)
				file.close()
		elif createfile == "n":
			namefile = input("Write the name of the file in which you want to make changes: ")
			with open(namefile,'a') as file:
				file.write("\n")
				for key, value in row.items():
					valueRow="|	"+str(value)+"	|"
					file.write(valueRow)
				file.write("\n")
				file.close()
		repeat = input("Do you want to continue? (y/n): ")
		if repeat == "n":
			break
		while (repeat!="y" and repeat!="n"):
			repeat = input("Please enter the correct answer (y/n): ")
	$ python Py-PasswordStorage.py
	['links', 'mails', 'logins', 'passwords']
	Enter the link: 1
	Enter email: 2
	Enter login: 3
	Enter password: 4
	['1', '2', '3', '4']
	{'links': '1', 'mails': '2', 'logins': '3', 'passwords': '4'}
	Create new file? (y/n): y
	Name the file where the passwords will be stored: testfile
	Do you want to continue? (y/n): 1213wa
	Please enter the correct answer (y/n): y
	['links', 'mails', 'logins', 'passwords']
	Enter the link: 11
	Enter email: 22
	Enter login: 33
	Enter password: 4444444
	['11', '22', '33', '4444444']
	{'links': '11', 'mails': '22', 'logins': '33', 'passwords': '4444444'}
	Create new file? (y/n): n
	Write the name of the file in which you want to make changes: testfile
	Do you want to continue? (y/n): n
	$ cat testfile
	| links || mails || logins || passwords |
	| 1 || 2 || 3 || 4 |
	| 11 || 22 || 33 || 4444444 |

База данных "Инвентаризация компьютерной техники в здании"
	Task:
	Развернул виртуальный сервер в Altlinux и разработал в нем базу "Инвентаризация компьютерной техники в здании". Это позволило мне быстро предоставлять отчеты об оборудовании в здании
	Task:
	Установить виртуальный сервер AltLinux в Hyper-V
	Decision:
	PS C:\Windows\system32> $ram=1*1024*1024*1024
	PS C:\Windows\system32> $ram
	1073741824
	PS C:\Windows\system32> $hdd=10*1024*1024*1024
	PS C:\Windows\system32> $hdd
	10737418240
	PS C:\Windows\system32> NEW-VM -Name Alt -MemoryStartupBytes $ram -NewVHDPath 'C:\Data\VM\Alt\Alt.vhdx'-NewVHD
	SizeBytes $hdd -Path 'C:\Data\VM\Alt'
	PS C:\Windows\system32> Start-VM -name Alt
	PS C:\Windows\system32> Get-VM
	Name State   CPUUsage(%) MemoryAssigned(M) Uptime   Status
	---- -----   ----------- ----------------- ------   ------
	Alt  Off     0           0                 00:00:00 Работает нормально
	Task:
	Set up an ActiveDirectory/Login
	Decision:
	$ ssh -X tuser@thost1
	$ su -
	# apt-get install task-auth-ad-sssd
	# net time set -S thost.ru
	# system-auth write ad thost.ru thost1 thost 'tuser' 'tpassword'
	Using short domain name -- thost
	Joined 'thost1' to dns domain 'thost.ru'
	Successfully registered hostname with DNS
	failed to call wbcGetDisplayName: WBC_ERR_WINBIND_NOT_AVAILABLE
	Could not lookup sid S-1-5-21-965402400-3010625364-1855727791-513
	failed to call wbcGetDisplayName: WBC_ERR_WINBIND_NOT_AVAILABLE
	Could not lookup sid S-1-5-21-965402400-3010625364-1855727791-512
	# wbinfo -t
	checking the trust secret for domain thost via RPC calls succeeded
	# acc
	2 keyboards found
	qt.qpa.xcb: could not connect to display
	qt.qpa.plugin: Could not load the Qt platfothost plugin "xcb" in "" even though it was found.
	This applthostation failed to start because no Qt platfothost plugin could be initialized. Reinstalling the applthostation may fix this problem.
	Available platfothost plugins are: eglfs, linuxfb, minimal, minimalegl, offscreen, vnc, xcb.
	# exit
	$ exit
	$ ssh -X tuser@thost1
	$ su -
	# acc
	2 keyboards found
	QStandardPaths: XDG_RUNTIME_DIR not set, defaulting to '/tmp/.private/root/runtime-root'
	libpng warning: thostCP: known incorrect sRGB profile
	libpng warning: thostCP: known incorrect sRGB profile
	libpng warning: thostCP: known incorrect sRGB profile
	libpng warning: thostCP: known incorrect sRGB profile
	libpng warning: thostCP: known incorrect sRGB profile
	WARNING: (alterator lookout evaluation): imported module (alterator presentation events) overrides core binding `when'
	libpng warning: thostCP: known incorrect sRGB profile
	libpng warning: thostCP: known incorrect sRGB profile
	libpng warning: thostCP: known incorrect sRGB profile
	libpng warning: thostCP: known incorrect sRGB profile
	# vim /etc/net/ifaces/eth0/resolv.conf
	# cat /etc/net/ifaces/eth0/resolv.conf
	nameserver IpAddr1
	# hostnamectl set-hostname thost1.thost.ru
	# cat /etc/resolv.conf
	# Generated by resolvconf
	# Do not edit manually, use
	# /etc/net/ifaces/<interface>/resolv.conf instead.
	search thost.ru
	nameserver 127.0.0.1
	# vim /etc/resolv.conf
	# cat /etc/resolvconf.conf
	# Configuration for resolvconf(8)
	# See resolvconf.conf(5) for details
	resolv_conf_head='# Do not edit manually, use\n# /etc/net/ifaces/<interface>/resolv.conf instead.'
	resolv_conf=/etc/resolv.conf
	# These interfaces will always be processed first.
	interface_order='lo lo[0-9]* lo.*'
	# These interfaces will be processed next, unless they have a metrthost.
	dynamthost_order='tap[0-9]* tun[0-9]* vpn vpn[0-9]* wg[0-9]* ppp[0-9]* ippp[0-9]*'
	#Configuration files for named subscriber.
	named_zones=/var/lib/bind/etc/resolvconf-zones.conf
	named_options=/var/lib/bind/etc/resolvconf-options.conf
	#Configuration files for dnsmasq subscriber.
	dnsmasq_conf=/etc/dnsmasq.conf.d/60-resolvconf
	dnsmasq_resolv=/etc/resolv.conf.dnsmasq
	name_servers=127.0.0.1
	# vim /etc/resolvconf.conf
	# cat /etc/resolvconf.conf
	# Configuration for resolvconf(8)
	# See resolvconf.conf(5) for details
	resolv_conf_head='# Do not edit manually, use\n# /etc/net/ifaces/<interface>/resolv.conf instead.'
	resolv_conf=/etc/resolv.conf
	# These interfaces will always be processed first.
	#interface_order='lo lo[0-9]* lo.*'
	interface_order='lo lo[0-9]* lo.* eth0'
	search_domains=thost.ru
	# These interfaces will be processed next, unless they have a metrthost.
	dynamthost_order='tap[0-9]* tun[0-9]* vpn vpn[0-9]* wg[0-9]* ppp[0-9]* ippp[0-9]*'
	#Configuration files for named subscriber.
	named_zones=/var/lib/bind/etc/resolvconf-zones.conf
	named_options=/var/lib/bind/etc/resolvconf-options.conf
	#Configuration files for dnsmasq subscriber.
	dnsmasq_conf=/etc/dnsmasq.conf.d/60-resolvconf
	dnsmasq_resolv=/etc/resolv.conf.dnsmasq
	#name_servers=127.0.0.1
	# resolvconf -u
	# cat /etc/resolv.conf
	# Generated by resolvconf
	# Do not edit manually, use
	# /etc/net/ifaces/<interface>/resolv.conf instead.
	search thost.ru
	nameserver IpAddr1
	...
	nameserver 8.8.8.8
	# hostname
	thost1.thost.ru
	# dig _kerberos._udp.thost.ru SRV | grep ^_kerberos
	_kerberos._udp.thost.ru. 600 IN SRV 0 100 88 M-1.thost.ru.
	...
	_kerberos._udp.thost.ru. 600 IN SRV 0 100 88 T-1.thost.ru.
	# dig _kerberos._tcp.thost.ru SRV | grep ^_kerberos
	_kerberos._tcp.thost.ru. 600 IN SRV 0 100 88 M-c.thost.ru.
	...
	_kerberos._tcp.thost.ru. 600 IN SRV 0 100 88 T-1.thost.ru.
	# cat /etc/krb5.conf | grep default_realm
	default_realm = thost.ru
	# default_realm = EXAMPLE.COM
	# cat /etc/krb5.conf | grep dns_lookup_realm
	dns_lookup_realm = false
	# cat /etc/krb5.conf | grep dns_lookup_kdc
	dns_lookup_kdc = true
	# exit
	$ ssh -X tuser@thost1
	# kinit tuser
	# klist
	Tthostket cache: KEYRING:persistent:0:krb_ccache_CCjHpN1
	Default principal: a-r@thost.ru
	Valid starting       Expires              Servthoste principal
	10.08.2022 12:30:34  10.08.2022 22:30:34  krbtgt/thost.ru@thost.ru
		renew until 17.08.2022 12:30:32
	# apt-get install samba-client
	# cat /etc/samba/smb.conf | grep realm
		realm = thost.ru
	# cat /etc/samba/smb.conf | grep workgroup
		workgroup = thost
	# cat /etc/samba/smb.conf | grep netbios
		netbios name = thost1
	# cat /etc/samba/smb.conf | grep security
		security = ads
	# cat /etc/samba/smb.conf | grep method
		kerberos method = system keytab
	# cat /etc/samba/smb.conf | grep idmap
			idmap config * : range = 200000-2000200000
			idmap config * : backend = sss
	# vim /etc/samba/smb.conf
	# cat /etc/samba/smb.conf | grep idmap
			idmap config * : range = 200000-2000200000
	;        idmap config * : backend = sss
		idmap config * : backend = tdb
	# testpathost
	Load smb config files from /etc/samba/smb.conf
	Loaded servthostes file OK.
	Weak crypto is allowed
	Server role: ROLE_DOMAIN_MEMBER
	Press enter to see a dump of your servthoste definitions
	# Global parameters
	[global]
		kerberos method = system keytab
		machine password timeout = 0
		realm = thost.ru
		security = ADS
		template homedir = /home/thost.ru/%U
		template shell = /bin/bash
		winbind use default domain = Yes
		workgroup = thost
		idmap config * : range = 200000-2000200000
		idmap config * : backend = tdb
	[share]
		comment = Commonplace
		path = /srv/share
		read only = No
	[homes]
		browseable = No
		comment = Home Directory for '%u'
		read only = No
	# net ads join -U tuser
	Enter tuser's password:
	Using short domain name -- thost
	Joined 'thost1' to dns domain 'thost.ru'
	No DNS domain configured for thost1. Unable to perfothost DNS Update.
	DNS update failed: NT_STATUS_INVALID_PARAMETER
	# cat /etc/hosts
	127.0.0.1   localhost.localdomain localhost
	# vim /etc/hosts
	# cat /etc/hosts
	127.0.0.1   localhost.localdomain localhost
	127.0.0.1   thost1.thost.ru thost1
	# net ads join -U tuser
	Enter tuser's password:
	Using short domain name -- thost
	Joined 'thost1' to dns domain 'thost.ru'
	kerberos_kinit_password thost1$@thost.ru failed: Preauthentthostation failed
	DNS update failed: kinit failed: Preauthentthostation failed
	# vim /etc/hosts
	# cat /etc/hosts
	127.0.0.1   thost1.thost.ru thost1
	# net ads join -U tuser
	Enter tuser's password:
	Using short domain name -- thost
	Joined 'thost1' to dns domain 'thost.ru'
	# klist -k -e
	Keytab name: FILE:/etc/krb5.keytab
	KVNO Principal
	---- --------------------------------------------------------------------------
	9 host/thost1.thost.ru@thost.ru (aes256-cts-hmac-sha1-96)
	9 host/thost1@thost.ru (aes256-cts-hmac-sha1-96)
	9 host/thost1.thost.ru@thost.ru (aes128-cts-hmac-sha1-96)
	9 host/thost1@thost.ru (aes128-cts-hmac-sha1-96)
	9 host/thost1.thost.ru@thost.ru (DEPRECATED:arcfour-hmac)
	9 host/thost1@thost.ru (DEPRECATED:arcfour-hmac)
	9 thost1$@thost.ru (aes256-cts-hmac-sha1-96)
	9 thost1$@thost.ru (aes128-cts-hmac-sha1-96)
	9 thost1$@thost.ru (DEPRECATED:arcfour-hmac)
	8 host/thost1.thost.ru@thost.ru (aes256-cts-hmac-sha1-96)
	8 host/thost1@thost.ru (aes256-cts-hmac-sha1-96)
	8 host/thost1.thost.ru@thost.ru (aes128-cts-hmac-sha1-96)
	8 host/thost1@thost.ru (aes128-cts-hmac-sha1-96)
	8 host/thost1.thost.ru@thost.ru (DEPRECATED:arcfour-hmac)
	8 host/thost1@thost.ru (DEPRECATED:arcfour-hmac)
	8 thost1$@thost.ru (aes256-cts-hmac-sha1-96)
	8 thost1$@thost.ru (aes128-cts-hmac-sha1-96)
	8 thost1$@thost.ru (DEPRECATED:arcfour-hmac)
	# apt-get install sssd-ad
	# cat /etc/sssd/sssd.conf
	[sssd]
	config_file_version = 2
	servthostes = nss, pam
	# Managed by system facility command:
	## control sssd-drop-privileges unprivileged|privileged|default
	user = _sssd
	# SSSD will not start if you do not configure any domains.
	domains = thost.ru
	[nss]
	[pam]
	[domain/thost.ru]
	id_provider = ad
	auth_provider = ad
	chpass_provider = ad
	access_provider = ad
	default_shell = /bin/bash
	fallback_homedir = /home/%d/%u
	debug_level = 0
	; cache_credentials = false
	ad_gpo_ignore_unreadable = true
	ad_gpo_access_control = pethostissive
	ad_update_samba_machine_account_password = true
	# vim /etc/sssd/sssd.conf
	# cat /etc/sssd/sssd.conf
	[sssd]
	config_file_version = 2
	servthostes = nss, pam
	# Managed by system facility command:
	## control sssd-drop-privileges unprivileged|privileged|default
	#user = _sssd
	user=root
	# SSSD will not start if you do not configure any domains.
	domains = thost.ru
	[nss]
	[pam]
	[domain/thost.ru]
	id_provider = ad
	auth_provider = ad
	chpass_provider = ad
	access_provider = ad
	;ldap_id_mapping = False
	default_shell = /bin/bash
	fallback_homedir = /home/%d/%u
	debug_level = 0
	;use_fully_qualified_names = True
	; cache_credentials = True
	ad_gpo_ignore_unreadable = true
	ad_gpo_access_control = pethostissive
	ad_update_samba_machine_account_password = true
	# grep sss /etc/nsswitch.conf
	passwd: files sss
	shadow: tcb files sss
	group: files [SUCCESS=merge] sss role
	# control system-auth sss
	# servthoste sssd status
	active
	# servthoste sssd start
	# getent passwd tuser
	tuser:*:1-9:1-3:в-н:/home/thost.ru/tuser:/bin/bash
	# id tuser
	uid=1-9(tuser) gid=1-3(пользователи домена) группы=1-3(пользователи домена),1-8(администраторы dhcp),1-0(I-s),11-0(пользователи филиалы),1-1(tusert_users),1-9(i-n)
	# net ads info
	LDAP server: IpAddr2
	LDAP server name: MOW-1.thost.ru
	Realm: thost.ru
	Bind Path: dc=thost,dc=RU
	LDAP port: 389
	Server time: Ср, 10 авг 2022 13:08:06 +08
	KDC server: IpAddr2
	Server time offset: 0
	Last machine account password change: Ср, 10 авг 2022 12:50:51 +08
	# net ads testjoin
	Join is OK
	# cat /etc/lightdm/lightdm.conf | grep greeter-hide-
	# greeter-hide-users = True to hide the user list
	#greeter-hide-users=false
	greeter-hide-users = true
	# cat /etc/lightdm/lightdm-gtk-greeter.conf | grep show-language
	show-language-selector = false
	# cat /etc/lightdm/lightdm-gtk-greeter.conf | grep show-indthostators
	# vim /etc/lightdm/lightdm-gtk-greeter.conf
	# cat /etc/lightdm/lightdm-gtk-greeter.conf | grep show-indthostators
	show-indthostators=~a11y;~power;~session;~language
	# vim /etc/lightdm/lightdm-gtk-greeter.conf
	# cat /etc/lightdm/lightdm-gtk-greeter.conf | grep enter-
	enter-username = true
	# reboot
	$ ssh -X tuser@thost1
	Decision:
	$ su -
	# apt-get install libnss-role
	# groupadd -r localadmins
	groupadd: группа «localadmins» уже существует
	# groupadd -r remote
	groupadd: группа «remote» уже существует
	# control sshd-allow-groups enabled
	# sed -i 's/AllowGroups.*/AllowGroups = remote/' /etc/openssh/sshd_config
	# roleadd users cdwriter cdrom audio proc radio camera floppy xgrp scanner uucp fuse
	# roleadd localadmins wheel remote vboxusers
	# roleadd 'Domain Users' users
	Error 156: No such group
	# roleadd 'Пользователи домена' users
	# roleadd 'Администраторы домена' localadmins
	# rolelst
	users:cdwriter,cdrom,audio,proc,radio,camera,floppy,xgrp,scanner,uucp,fuse,video,vboxusers,vboxadd
	localadmins:wheel,remote,vboxusers,vboxadd
	пользователи домена:users
	администраторы домена:localadmins
	powerusers:remote,vboxadd,vboxusers
	vboxadd:vboxsf
	# id tuser
	uid=1-9(tuser) gid=1-3(пользователи домена) группы=1-3(пользователи домена),11-0(пользователи филиалы),1-9(i-n),1-0(I-s),1-1(tusert_users),1-8(администраторы dhcp),100(users),80(cdwriter),22(cdrom),81(audio),19(proc),83(radio),440(camera),71(floppy),466(xgrp),467(scanner),14(uucp),483(fuse),488(video),481(vboxusers),455(vboxadd),454(vboxsf)
	# roleadd 'I-s' localadmins
	# roleadd 'I-s' wheel
	# rolelst
	users:cdwriter,cdrom,audio,proc,radio,camera,floppy,xgrp,scanner,uucp,fuse,video,vboxusers,vboxadd
	localadmins:wheel,remote,vboxusers,vboxadd
	пользователи домена:users
	администраторы домена:localadmins
	I-s:localadmins
	powerusers:remote,vboxadd,vboxusers
	vboxadd:vboxsf
	# exit
	$ exit
	$ ssh -X tuser@thost1
	$ su -
	# id tuser
	uid=1-9(tuser) gid=1-3(пользователи домена) группы=1-3(пользователи домена),11-0(пользователи филиалы),1-9(i-n),1-0(I-s),1-1(tusert_users),1-8(администраторы dhcp),100(users),80(cdwriter),22(cdrom),81(audio),19(proc),83(radio),440(camera),71(floppy),466(xgrp),467(scanner),14(uucp),483(fuse),488(video),481(vboxusers),455(vboxadd),454(vboxsf),101(localadmins),10(wheel),110(remote)
	Task:
	Добавить сетевые папки
	Decision:
	# apt-get install autofs
	# vim /etc/auto.master
	# cat /etc/auto.master
	# Fothostat of this file:
	# mountpoint map options
	# For details of the fothostat look at autofs(8).
	/mnt/auto   /etc/auto.tab   -t 5
	/mnt/net    /etc/auto.avahi -t 120
	/mnt/.tdirectory  /etc/auto.samba --ghost
	# vim /etc/auto.samba
	# cat /etc/auto.samba
	s    -fstype=cifs,multiuser,cruid=$USER,sec=krb5,domain=thost.ru,vers=1.0 ://thost/tdirectory1
	o    -fstype=cifs,multiuser,cruid=$USER,sec=krb5,domain=thost.ru,vers=1.0 ://thost/tdirectory2
	# systemctl enable autofs
	# systemctl start autofs
	# ls -la /mnt/.tdirectory/
	drwxr-xr-x 4 root root    0 авг 11 14:09 .
	drwxr-xr-x 5 root root 4096 авг 11 14:09 ..
	d????????? ? ?    ?       ?            ? o
	d????????? ? ?    ?       ?            ? s
	Task:
	Creating a Network Bridge interface
	Decision:
	# mkdir /etc/net/ifaces/tethernet1
	# cp /etc/net/ifaces/tethernet/* /etc/net/ifaces/tethernet1
	# rm -f /etc/net/ifaces/tethernet/{i,r}*
	# ls /etc/net/ifaces/tethernet1/
	ipv4address  options  resolv.conf
	# cat /etc/net/ifaces/tethernet1/options
	BOOTPROTO=dhcp
	TYPE=eth
	NM_CONTROLLED=yes
	DISABLED=yes
	CONFIG_WIRELESS=no
	SYSTEMD_BOOTPROTO=dhcp4
	CONFIG_IPV4=yes
	SYSTEMD_CONTROLLED=no
	# vim /etc/net/ifaces/tethernet1/options
	# ls /etc/net/ifaces/
	default  tethernet  lo  unknown  tethernet1
	# vim /etc/net/ifaces/tethernet1/options
	# vim /etc/net/ifaces/tethernet1/options
	# cat /etc/net/ifaces/tethernet1/options
	BOOTPROTO=static
	CONFIG_WIRELESS=no
	CONFIG_IPV4=yes
	HOST='tethernet'
	ONBOOT=yes
	TYPE=bri
	# ls /etc/net/ifaces/tethernet/
	ipv4address  options  resolv.conf
	# service network restart
	Task:
	Настройка сервера Postgresql+Pgadmin
	Decision:
	# apt-get update
	# apt-get install postgresql12-server
	# /etc/init.d/postgresql initdb
	# systemctl start postgresql
	# systemctl enable postgresql
	# pg_isready
	Decision:
	# psql -U postgres
	postgres=# CREATE USER tbuser WITH PASSWORD 'tbpassword';
	postgres=# CREATE DATABASE tbbase;
	postgres=# GRANT ALL PRIVILEGES ON DATABASE tbbase to tbuser;
	postgres=# psql -U postgres -c "\l+"
	                                                                         Список баз данных
	     Имя     | Владелец | Кодировка | LC_COLLATE  |  LC_CTYPE   |     Права доступа     | Размер  | Табл. пространство |                  Опис
	ание                  
	-------------+----------+-----------+-------------+-------------+-----------------------+---------+--------------------+----------------------
	----------------------
	 tbbase | postgres | UTF8      | ru_RU.UTF-8 | ru_RU.UTF-8 | =Tc/postgres         +| 8041 kB | pg_default         |
	             |          |           |             |             | postgres=CTc/postgres+|         |                    |
	             |          |           |             |             | tbuser=CTc/postgres    |         |                    |
	 postgres    | postgres | UTF8      | ru_RU.UTF-8 | ru_RU.UTF-8 |                       | 8185 kB | pg_default         | default administrativ
	e connection database
	...
	postgres=# \c tbbase
	tbbase=# GRANT ALL PRIVILEGES ON ALL TABLES IN SCHEMA public TO "tbuser";
	tbbase=# ALTER DATABASE tbbase OWNER TO tbuser;
	tbbase=# \q
	Task:
	Сделаем так, чтобы с клиентской машины Redos мы могли подключаться к серверу AltLinux удаленно
	Decision:
	# su - postgres -c "psql -c 'SHOW config_file;'"
	             config_file             
	-------------------------------------
	 /var/lib/pgsql/data/postgresql.conf
	(1 строка)
	# echo "listen_addresses = 'IpAddr3, IpAddr2, thost1'" >> /var/lib/pgsql/data/postgresql.conf
	# cat /var/lib/pgsql/data/pg_hba.conf
	...
	# "local" is for Unix domain socket connections only
	local   all             all                                     trust
	# IPv4 local connections:
	host    all             all             127.0.0.1/32            trust
	...
	# vim /var/lib/pgsql/data/pg_hba.conf
	# cat /var/lib/pgsql/data/pg_hba.conf | grep '10.38.'
	# "local" is for Unix domain socket connections only
	local   all             all                                     trust
	# IPv4 local connections:
	host    tbbase            tbuser             IpAddr2/21                  md5
	host    all             all             127.0.0.1/32            trust
	# systemctl restart postgresql
	# systemctl status postgresql
	$ psql -d tbbase -U tbuser -h thost1
	Task:
	Для работы с базой в графическом интерфейсе установим Pgadmin
	Decision:
	# apt-get install pgadmin3
	# pgadmin3 &
		add server - name - tbuser - host - thost1- password - tbpassword - ok
	# dnf install postgresql-server
	# postgresql-setup initdb
	# systemctl enable postgresql
	# systemctl start postgresql
	# pg_isready
	$ psql -d tbbase -U tbuser -h thost1
	tbbase=> \du
	                                          Список ролей
	 Имя роли |                                Атрибуты                                 | Член ролей
	----------+-------------------------------------------------------------------------+------------
	 tbuser   |                                                                         | {}
	 postgres | Суперпользователь, Создаёт роли, Создаёт БД, Репликация, Пропускать RLS | {}
	Decision:
	$ sudo dnf install pgadmin4 pgadmin4-qt
	$ pgadmin4-qt &
		root's password - add server - name - tbuser - host - thost1- password - tbpassword - ok
	Task:
	Создать таблицы. В первой таблице отметим в каких зданиях находятся кабинеты.
	Decision:
	CREATE TABLE offices (
	  id SERIAL PRIMARY KEY,
	  office VARCHAR,
	  building VARCHAR
	);
	INSERT INTO offices (office, building)
	VALUES ('1', 'Улица1'),
	('2', 'Улица1'),
	('3', 'Улица1'),
	('4', 'Улица2'),
	('5', 'Улица2'),
	('6', 'Улица2'),
	('7', 'Улица2'),
	('8', 'Улица2'),
	('9', 'Улица2');
	SELECT * FROM offices;
	+====+========+===============+
	| id | office | building      |
	+====+========+===============+
	| 1  | 1     | Улица1		|
	+----+--------+---------------+
	| 2  | 2     | Улица1		|
	+----+--------+---------------+
	| 3  | 3     | Улица1		|
	+----+--------+---------------+
	| 4  | 4    | Улица2		|
	+----+--------+---------------+
	| 5  | 5    | Улица2		|
	+----+--------+---------------+
	| 6  | 6    | Улица2		|
	+----+--------+---------------+
	| 7  | 7    | Улица2		|
	+----+--------+---------------+
	| 8  | 8    | Улица2		|
	+----+--------+---------------+
	| 9  | 9    | Улица2		|
	+----+--------+---------------+
	Task:
	Вторая таблица отвечает за названия оборудований
	Decision:
	CREATE TABLE devices (
	  id SERIAL PRIMARY KEY,
	  device VARCHAR,
	  title VARCHAR
	);
	INSERT INTO devices (device, title)
	VALUES ('Atc', 'Panasonic kx-tda100ru'),
	('Bидеокамера белая', NULL),
	('Интерактиная доска с короткофокусным проектором', 'Promethean activeboard i78 mount dlp'),
	('Колонки', 'Sven sps-605'),
	('Компьютер', 'Nuc'),
	('Программно-аапаратный комплекс', 'Vipnet coordinator hw 1000'),
	('Сетевой фильтр', 'Sven platinum'),
	('Маршрутизатор', 'Mtuserrottuser'),
	('Сетевой фильтр', 'Makel с заземлением mpg 137'),
	('Роутер', 'Mtuserrottuser browder rb9516'),
	('Dvd-плеер', 'Pioner dv-310-k'),
	('Акустическая система', 'Electrovoice'),
	('Коммутатор', 'Kramer'),
	('Масштабатор видео и графики', 'Kramer'),
	('Микрофон делегата настольный', NULL),
	('Микрофонная стойка', 'Qutuser lok a300'),
	('Мультимедийный проектор', 'Epson eb-965h'),
	('Пульт микшерский', 'Soundcraft epm8'),
	('Система вентилляции и кондиционирования', NULL),
	('Эран моторизированный', 'Projecta compact electrol'),
	('Ноутбук', 'Acer aspire as5560g-4333g32mn'),
	('Bидеокамера серая', NULL),
	('Микрофон', 'Shure sh58'),
	('Акустическая система', 'Mackie sr1530z'),
	('Сетевой фильтр', 'Sven optima'),
	('Сетевой фильтр', 'Surge protector'),
	('Мультимедийный проектор', 'Optima ex612'),
	('Экран настенный', 'Screenmedia economy-p'),
	('Колонки', 'Logitech s120'),
	('Компьютер', 'Nuc mini pc kit'),
	('Сетевой фильтр', 'Pc pet'),
	('Интерактиная доска', '80'),
	('Короткофокусный проектор', 'Benq'),
	('Колонки', 'Microlab solo 1'),
	('Акустическая система', 'Eurosound eg-26w 2*6'),
	('Микшерный пульт', 'Eurosound compact-802'),
	('Планшет графический', 'Wacom pl-1600'),
	('Телевизор плазменный', 'Lg 50pa6500'),
	('Усилитель мощности', 'Eurosound xz-400'),
	('8 port video splitter', NULL);
	SELECT * FROM devices;
	+====+=================================================+======================================+
	| id | device                                          | title                                |
	+====+=================================================+======================================+
	| 1  | Atc                                             | Panasonic kx-tda100ru                |
	+----+-------------------------------------------------+--------------------------------------+
	| 2  | Bидеокамера белая                               | (null)                               |
	+----+-------------------------------------------------+--------------------------------------+
	| 3  | Интерактиная доска с короткофокусным проектором | Promethean activeboard i78 mount dlp |
	+----+-------------------------------------------------+--------------------------------------+
	| 4  | Колонки                                         | Sven sps-605                         |
	+----+-------------------------------------------------+--------------------------------------+
	| 5  | Компьютер                                       | Nuc                                  |
	+----+-------------------------------------------------+--------------------------------------+
	| 6  | Программно-аапаратный комплекс                  | Vipnet coordinator hw 1000           |
	+----+-------------------------------------------------+--------------------------------------+
	| 7  | Сетевой фильтр                                  | Sven platinum                        |
	+----+-------------------------------------------------+--------------------------------------+
	| 8  | Маршрутизатор                                   | Mtuserrottuser                       |
	+----+-------------------------------------------------+--------------------------------------+
	| 9  | Сетевой фильтр                                  | Makel с заземлением mpg 137          |
	+----+-------------------------------------------------+--------------------------------------+
	| 10 | Роутер                                          | Mtuserrottuser browder rb9516        |
	+----+-------------------------------------------------+--------------------------------------+
	| 11 | Dvd-плеер                                       | Pioner dv-310-k                      |
	+----+-------------------------------------------------+--------------------------------------+
	| 12 | Акустическая система                            | Electrovoice                         |
	+----+-------------------------------------------------+--------------------------------------+
	| 13 | Коммутатор                                      | Kramer                               |
	+----+-------------------------------------------------+--------------------------------------+
	| 14 | Масштабатор видео и графики                     | Kramer                               |
	+----+-------------------------------------------------+--------------------------------------+
	| 15 | Микрофон делегата настольный                    | (null)                               |
	+----+-------------------------------------------------+--------------------------------------+
	| 16 | Микрофонная стойка                              | Qutuser lok a300                     |
	+----+-------------------------------------------------+--------------------------------------+
	| 17 | Мультимедийный проектор                         | Epson eb-965h                        |
	+----+-------------------------------------------------+--------------------------------------+
	| 18 | Пульт микшерский                                | Soundcraft epm8                      |
	+----+-------------------------------------------------+--------------------------------------+
	| 19 | Система вентилляции и кондиционирования         | (null)                               |
	+----+-------------------------------------------------+--------------------------------------+
	| 20 | Эран моторизированный                           | Projecta compact electrol            |
	+----+-------------------------------------------------+--------------------------------------+
	| 21 | Ноутбук                                         | Acer aspire as5560g-4333g32mn        |
	+----+-------------------------------------------------+--------------------------------------+
	| 22 | Bидеокамера серая                               | (null)                               |
	+----+-------------------------------------------------+--------------------------------------+
	| 23 | Микрофон                                        | Shure sh58                           |
	+----+-------------------------------------------------+--------------------------------------+
	| 24 | Акустическая система                            | Mackie sr1530z                       |
	+----+-------------------------------------------------+--------------------------------------+
	| 25 | Сетевой фильтр                                  | Sven optima                          |
	+----+-------------------------------------------------+--------------------------------------+
	| 26 | Сетевой фильтр                                  | Surge protector                      |
	+----+-------------------------------------------------+--------------------------------------+
	| 27 | Мультимедийный проектор                         | Optima ex612                         |
	+----+-------------------------------------------------+--------------------------------------+
	| 28 | Экран настенный                                 | Screenmedia economy-p                |
	+----+-------------------------------------------------+--------------------------------------+
	| 29 | Колонки                                         | Logitech s120                        |
	+----+-------------------------------------------------+--------------------------------------+
	| 30 | Компьютер                                       | Nuc mini pc kit                      |
	+----+-------------------------------------------------+--------------------------------------+
	| 31 | Сетевой фильтр                                  | Pc pet                               |
	+----+-------------------------------------------------+--------------------------------------+
	| 32 | Интерактиная доска                              | 80                                   |
	+----+-------------------------------------------------+--------------------------------------+
	| 33 | Короткофокусный проектор                        | Benq                                 |
	+----+-------------------------------------------------+--------------------------------------+
	| 34 | Колонки                                         | Microlab solo 1                      |
	+----+-------------------------------------------------+--------------------------------------+
	| 35 | Акустическая система                            | Eurosound eg-26w 2*6                 |
	+----+-------------------------------------------------+--------------------------------------+
	| 36 | Микшерный пульт                                 | Eurosound compact-802                |
	+----+-------------------------------------------------+--------------------------------------+
	| 37 | Планшет графический                             | Wacom pl-1600                        |
	+----+-------------------------------------------------+--------------------------------------+
	| 38 | Телевизор плазменный                            | Lg 50pa6500                          |
	+----+-------------------------------------------------+--------------------------------------+
	| 39 | Усилитель мощности                              | Eurosound xz-400                     |
	+----+-------------------------------------------------+--------------------------------------+
	| 40 | 8 port video splitter                           | (null)                               |
	+----+-------------------------------------------------+--------------------------------------+
	Task:
	Третья таблица отвечает за инвентарные номера оборудований, кабинетов и даты изменения
	Decision:
	CREATE TABLE inventories (
	  id SERIAL PRIMARY KEY,
	  inventory VARCHAR,
	  device_id INT REFERENCES devices(id),
	  office_id INT REFERENCES offices(id),                                               
	  quantity INT,                                                   
	  date TIMESTAMP
	);
	INSERT INTO inventories (inventory, device_id, office_id, quantity, date)
	VALUES ('457', '1', '1', '1', '2017-12-12 12:12:12'),
	(NULL, '2', '1', '1', '2017-12-12 12:12:12'),
	...
	('750', '30', '6', '1', '2021-09-12 12:12:12'),
	('707', '17', '6', '1', '2020-05-12 12:12:12'),
	('008', '4', '6', '1', '2020-09-12 12:12:12'),
	('010', '34', '9', '1', '2017-12-12 12:12:12'),
	('650', '5', '9', '1', '2017-12-12 12:12:12'),
	('556', '33', '9', '1', '2017-12-12 12:12:12'),
	('426', '32', '9', '1', '2017-12-12 12:12:12');
	SELECT * FROM inventories;
	+====+=============+===========+===========+==========+=====================+
	| id | inventory   | device_id | office_id | quantity | date                |
	+====+=============+===========+===========+==========+=====================+
	| 1  | 457         | 1         | 1         | 1        | 2017-12-12 12:12:12 |
	+----+-------------+-----------+-----------+----------+---------------------+
	| 2  | (null)      | 2         | 1         | 1        | 2017-12-12 12:12:12 |
	+----+-------------+-----------+-----------+----------+---------------------+
	...
	+----+-------------+-----------+-----------+----------+---------------------+
	| 62 | 750         | 30        | 6         | 1        | 2021-09-12 12:12:12 |
	+----+-------------+-----------+-----------+----------+---------------------+
	| 63 | 707         | 17        | 6         | 1        | 2020-05-12 12:12:12 |
	+----+-------------+-----------+-----------+----------+---------------------+
	| 64 | 008         | 4         | 6         | 1        | 2020-09-12 12:12:12 |
	+----+-------------+-----------+-----------+----------+---------------------+
	| 65 | 010         | 34        | 9         | 1        | 2017-12-12 12:12:12 |
	+----+-------------+-----------+-----------+----------+---------------------+
	| 66 | 650         | 5         | 9         | 1        | 2017-12-12 12:12:12 |
	+----+-------------+-----------+-----------+----------+---------------------+
	| 67 | 556         | 33        | 9         | 1        | 2017-12-12 12:12:12 |
	+----+-------------+-----------+-----------+----------+---------------------+
	| 68 | 426         | 32        | 9         | 1        | 2017-12-12 12:12:12 |
	+----+-------------+-----------+-----------+----------+---------------------+
	Task:
	Мне нужно вывести информацию, где в первом столбце будет инвентарные номера, во втором столбце, устройство и его название, а в третьем столбце вывести кабинеты, где находятся те самые оборудования
	Decision:
	SELECT inventory, device, title, office
	FROM inventories
	INNER JOIN devices
	ON inventories.device_id = devices.id
	INNER JOIN offices
	ON inventories.office_id = offices.id
	WHERE office_id='6';
	+=============+=========================+=================+========+
	| inventory   | device                  | title           | office |
	+=============+=========================+=================+========+
	| 008         | Колонки                 | Sven sps-605    | 6      |
	+-------------+-------------------------+-----------------+--------+
	| 707         | Мультимедийный проектор | Epson eb-965h   | 6      |
	+-------------+-------------------------+-----------------+--------+
	| 750         | Компьютер               | Nuc mini pc kit | 6      |
	+-------------+-------------------------+-----------------+--------+
	Task:
	Заметил ошибку в таблице, есть лишнее оборудование в кабинете. его на самом деле нету в кабинете и значит не должно быть в таблице.
	Decision:
	DELETE FROM inventories
	WHERE id='64';
	SELECT inventory, device, title, office
	FROM inventories
	INNER JOIN devices
	ON inventories.device_id = devices.id
	INNER JOIN offices
	ON inventories.office_id = offices.id
	WHERE office_id='6';
	+===========+=========================+=================+========+
	| inventory | device                  | title           | office |
	+===========+=========================+=================+========+
	| 707       | Мультимедийный проектор | Epson eb-965h   | 6      |
	+-----------+-------------------------+-----------------+--------+
	| 750       | Компьютер               | Nuc mini pc kit | 6      |
	+-----------+-------------------------+-----------------+--------+
	SELECT * FROM inventories;
	+====+=============+===========+===========+==========+=====================+
	| id | inventory   | device_id | office_id | quantity | date                |
	+====+=============+===========+===========+==========+=====================+
	| 1  | 457         | 1         | 1         | 1        | 2017-12-12 12:12:12 |
	+----+-------------+-----------+-----------+----------+---------------------+
	| 2  | (null)      | 2         | 1         | 1        | 2017-12-12 12:12:12 |
	+----+-------------+-----------+-----------+----------+---------------------+
	...
	+----+-------------+-----------+-----------+----------+---------------------+
	| 62 | 750         | 30        | 6         | 1        | 2021-09-12 12:12:12 |
	+----+-------------+-----------+-----------+----------+---------------------+
	| 63 | 707         | 17        | 6         | 1        | 2020-05-12 12:12:12 |
	+----+-------------+-----------+-----------+----------+---------------------+
	| 65 | 010         | 34        | 9         | 1        | 2017-12-12 12:12:12 |
	+----+-------------+-----------+-----------+----------+---------------------+
	| 66 | 650         | 5         | 9         | 1        | 2017-12-12 12:12:12 |
	+----+-------------+-----------+-----------+----------+---------------------+
	| 67 | 556         | 33        | 9         | 1        | 2017-12-12 12:12:12 |
	+----+-------------+-----------+-----------+----------+---------------------+
	| 68 | 426         | 32        | 9         | 1        | 2017-12-12 12:12:12 |
	+----+-------------+-----------+-----------+----------+---------------------+
	Task:
	Появилось новое обрудование, и нужно его внести в таблицу.
	Decision:
	INSERT INTO inventories (inventory, device_id, office_id, quantity, date)
	VALUES ('testinv1', '39', '1', '1', '2017-12-12 12:12:12');
	SELECT * FROM inventories;
	+====+=============+===========+===========+==========+=====================+
	| id | inventory   | device_id | office_id | quantity | date                |
	+====+=============+===========+===========+==========+=====================+
	| 1  | 457         | 1         | 1         | 1        | 2017-12-12 12:12:12 |
	+----+-------------+-----------+-----------+----------+---------------------+
	| 2  | (null)      | 2         | 1         | 1        | 2017-12-12 12:12:12 |
	+----+-------------+-----------+-----------+----------+---------------------+
	...
	+----+-------------+-----------+-----------+----------+---------------------+
	| 68 | 426         | 32        | 9         | 1        | 2017-12-12 12:12:12 |
	+----+-------------+-----------+-----------+----------+---------------------+
	| 69 | testinv1    | 39        | 1         | 1        | 2017-12-12 12:12:12 |
	+----+-------------+-----------+-----------+----------+---------------------+
	Task:
	в предыдущей задаче не верные данные внес в таблицу, нужно подкорректировать.
	Decision:
	UPDATE inventories
	SET inventory='testinv2', office_id='9'
	WHERE id='69';
	SELECT * FROM inventories;
	+====+=============+===========+===========+==========+=====================+
	| id | inventory   | device_id | office_id | quantity | date                |
	+====+=============+===========+===========+==========+=====================+
	| 1  | 457         | 1         | 1         | 1        | 2017-12-12 12:12:12 |
	+----+-------------+-----------+-----------+----------+---------------------+
	| 2  | (null)      | 2         | 1         | 1        | 2017-12-12 12:12:12 |
	+----+-------------+-----------+-----------+----------+---------------------+
	...
	+----+-------------+-----------+-----------+----------+---------------------+
	| 68 | 426         | 32        | 9         | 1        | 2017-12-12 12:12:12 |
	+----+-------------+-----------+-----------+----------+---------------------+
	| 69 | testinv2    | 39        | 9         | 1        | 2017-12-12 12:12:12 |
	+----+-------------+-----------+-----------+----------+---------------------+
	SELECT inventory, device, title, office
	FROM inventories
	INNER JOIN devices
	ON inventories.device_id = devices.id
	INNER JOIN offices
	ON inventories.office_id = offices.id
	WHERE office_id='9';
	+=============+==========================+==================+========+
	| inventory   | device                   | title            | office |
	+=============+==========================+==================+========+
	| 650         | Компьютер                | Nuc              | 9      |
	+-------------+--------------------------+------------------+--------+
	| 426         | Интерактиная доска       | 80               | 9      |
	+-------------+--------------------------+------------------+--------+
	| 556         | Короткофокусный проектор | Benq             | 9      |
	+-------------+--------------------------+------------------+--------+
	| 010         | Колонки                  | Microlab solo 1  | 9      |
	+-------------+--------------------------+------------------+--------+
	| testinv2    | Усилитель мощности       | Eurosound xz-400 | 9      |
	+-------------+--------------------------+------------------+--------+
	Source:
	https://www.altlinux.org/ActiveDirectory/Login#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2
	https://www.altlinux.org/SSSD/AD
	https://www.altlinux.org/%D0%A1%D0%B5%D1%82%D0%B5%D0%B2%D0%BE%D0%B9_%D0%BC%D0%BE%D1%81%D1%82
	https://www.altlinux.org/PostgreSQL#%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0_%D0%B8_%D0%BD%D0%B0%D1%87%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9_%D0%B7%D0%B0%D0%BF%D1%83%D1%81%D0%BA
	https://www.tecmint.com/install-postgresql-and-pgadmin-in-ubuntu/
	https://o7planning.org/11353/install-pgadmin-on-ubuntu
	https://redos.red-soft.ru/base/server-configuring/dbms/install-postgresql/?sphrase_id=53348
	https://redos.red-soft.ru/base/server-configuring/dbms/pgadmin4/

Установка и настройка Linux в рамках импортозамещения
	Task:
	Для импортозамещения с Windows на Redos, развернул виртуальную тестовую машину Redos в Hyber-v, протестировал машину на работоспобность с программами в организации, развернул Pxe сервер для развертывания Redos с загрузкой в Uefi по сети. Это сэкономило время на внедрение системы Redos в компьютерных классах
	Task:
	Установить Hyper-V в Windows Server 2012 c помощью Shell
	Decision:
	PS C:\Windows\system32> Get-Module -ListAvailable
	Каталог: C:\Windows\system32\WindowsPowerShell\v1.0\Modules
	ModuleType Version    Name                                ExportedCo
	---------- -------    ----                                ----------
	...
	Binary     1.1        Hyper-V                             {Add-VMDvd
	...
	PS C:\Windows\system32> Import-Module -Name Hyper-V
	Task:
	Развернуть виртуальную тестовую машину Redos в Hyber-v с помощью Powershell
	Decision:
	PS C:\Windows\system32> Get-VM
	Name State CPUUsage(%) MemoryAssigned(M) Uptime   Status
	---- ----- ----------- ----------------- ------   ------
	Alt  Off   0           0                 00:00:00 Работает нормально
	PS C:\Windows\system32> $ram=1*1024*1024*1024
	PS C:\Windows\system32> $ram
	1073741824
	PS C:\Windows\system32> $hdd=10*1024*1024*1024
	PS C:\Windows\system32> $hdd
	10737418240
	PS C:\Windows\system32> NEW-VM -Name Redos -MemoryStartupBytes $ram -NewVHDPath 'C:\Data\VM\Redos\Redos.vhdx'-NewVHD
	SizeBytes $hdd -Path 'C:\Data\VM\Redos'
	Name State CPUUsage(%) MemoryAssigned(M) Uptime   Status
	---- ----- ----------- ----------------- ------   ------
	Redos Off   0           0                 00:00:00 Работает нормально
	PS C:\Windows\system32> Get-VM
	Name State CPUUsage(%) MemoryAssigned(M) Uptime   Status
	---- ----- ----------- ----------------- ------   ------
	Alt  Off   0           0                 00:00:00 Работает нормально
	Redos Off   0           0                 00:00:00 Работает нормально
	PS C:\Windows\system32> Start-VM -name Redos
	PS C:\Windows\system32> Get-VM
	Name State   CPUUsage(%) MemoryAssigned(M) Uptime   Status
	---- -----   ----------- ----------------- ------   ------
	Alt  Off     0           0                 00:00:00 Работает нормально
	Redos Running 0           1024              00:00:16 Работает нормально
	PS C:\Windows\system32> Stop-VM Redos
	Подтверждение
	Hyper-V не удается завершить работу виртуальной машины Redos, так как служба интеграции по завершению работы недоступна.
	Во избежание потенциальной потери данных вы можете приостановить виртуальную машину или сохранить ее состояние. Другим
	вариантом является отключение виртуальной машины, но при этом возможна потеря данных.
	[Y] Да - Y  [N] Нет - N  [S] Приостановить - S  [?] Справка (значением по умолчанию является "Y"): y
	PS C:\Windows\system32> Get-VM
	Name State CPUUsage(%) MemoryAssigned(M) Uptime   Status
	---- ----- ----------- ----------------- ------   ------
	Alt  Off   0           0                 00:00:00 Работает нормально
	Redos Off   0           0                 00:00:00 Работает нормально
	Task:
	Установить и настроить дистрибутив Redos в виртуальной машине
	Decision:
	выбираем Install - выбрать размер разделов - поменяем систему разметки LVM на Standart Portition - нажимаем на click here to create them autmaticaly - установщик автоматически разделит диск - уменьшить размер корневого раздела / и раздел /home - Меняю у них размеры - Done - интернет настроить в Network & Host Name - Ethernet переключаем тумблер - Done - software Slection - minmal install- Done - запуск
	Task:
	# dnf -y install kernel-devel-$(uname -r)
		Last metadata expiration check: 0:52:33 ago on Thu 14 May 2020 03:36:35 AM EDT.
		No match for argument: kernel-devel-4.18.0-147.el8.x86_64
		Error: Unable to find a match: kernel-devel-4.18.0-147.el8.x86_64
	Decision:
	# dnf -y install kernel-devel
	Task:  
	Ввод компьютера в домен Windows и изменение имени хоста
	Decision:
	# yum install join-to-domain
	# join-to-domain.sh
	# reboot
	# hostname
		thost1.tdomain.ru
	# hostname thost2.tdomain.ru
	# hostname
		thost2.tdomain.ru
	# vim /etc/hostname
	# cat /etc/hostname
		thost2.tdomain.ru
	# vim /etc/hosts
	# cat /etc/hosts
		127.0.0.1 localhost localhost.localdomain localhost4 localhost4.localdomain4
		::1 localhost localhost.localdomain localhost6 localhost6.localdomain6
		127.0.0.1 thost2.tdomain.ru thost2
	Task:
	Установка Консультант Плюс и подключение сетевых директорий с использованием automount и механизма Kerberos
	Decision:
	$ yum install wine winetricks
	# winetricks riched30 winhttp
	Wine -> Wine Configuration -> Графика -> уберите галочку в пункте "Разрешить менеджеру окон декорировать окна". -> Для запуска «Консультант Плюс» на рабочей станции подключите сетевой диск с «Консультантом» -> Сделать это можно с помощью подключения сетевых директорий с использованием automount и механизма Kerberos
	$ smbclient -L thost -k
	Sharename Type Comment
	--------- ---- -------
	Consultant Disk
	ConsultantR Disk
	...
	S Disk
	Reconnecting with SMB1 for workgroup listing.
	Server Comment
	-------- -------
	Wg M
	--------- -------
	# yum install cifs-utils autofs
	$ klist
	Ticket cache: FILE:/tmp/krb5cc_1
	Default principal: tuser@tdomain.RU
	Valid starting Expires service principal
	31.08.2020 09:51:47 31.08.2020 19:51:47 krbtgt/tdomain.RU@tdomain.RU
	renew until 31.08.2020 19:51:47
	# vim /etc/auto.master
	# cat /etc/auto.master
	...
	/mnt/.thost    /etc/auto.samba    --ghost
	# vim /etc/auto.samba
	# cat /etc/auto.samba
	Consultant    -fstype=cifs,multiuser,cruid=tuser,sec=krb5,domain=tdomain.RU,vers=2.1     ://thost/Consultant
	Students      -fstype=cifs,multiuser,cruid=tuser,sec=krb5,domain=tdomain.RU,vers=2.1       ://thost/Students
	Для подключения скрытых сетевых каталогов необходимо экранировать символ $
	Consultant    -fstype=cifs,multiuser,cruid=tuser,sec=krb5,domain=tdomain.RU,vers=2.1     ://thost/Consultant\$
	В файле /etc/krb5.conf нужно закомментировать строку (если она ещё не закомментирована)
	#cat /etc/krb5.conf
	...
	default_ccache_name = KEYRING:persistent:%{uid}
	...
	#vim/etc/krb5.conf
	#cat /etc/krb5.conf
	...
	default_ccache_name = FILE:/tmp/krb5cc_%{uid}
	...
	# systemctl start autofs.service
	# systemctl enable autofs --now
	Created symlink from /etc/systemd/system/multi-user.target.wants/autofs.service to /usr/lib/systemd/system/autofs.service.
	# ls /mnt/.thost/Consultant/
	... cons.exe ...
	$ winecfg
	# wine /mnt/.thost/Сonsultant/cons.exe /linux /yes
	Task:
	Создать ярлык Консультант +
	Decision:
	# vim /home/tuser@thost.ru/Рабочий\ стол/Consultant.desktop
	# cat /home/tuser@thost.ru/Рабочий\ стол/Consultant.desktop
	[Desktop Entry]
	Name=ConsultantPlus
	Exec=wine /mnt/.thost/Сonsultant/cons.exe
	Type=Application
	StartupNotify=true
	Comment=ConsultantPlus
	icon=43D4_Cons.0
	StartupWMClass=c.exe
	Task:
	В случае замедленной работы можно добавить ключ /sprocess=0 При нормальной работе, не добавляйте этот ключ. Ключ /yes необходим для подавления сообщения об ошибке [WNetGetUniversalName ...] : NO_NETWORK
	Decision:
	# ln -s /mnt/.thost/S /home/tuser@thost.ru/Рабочий\ стол/S
	Task:
	Создание ярлыка для сетевой директории
	Decision:
	# ln -s /mnt/.thost/S /home/tuser@thost.ru/Рабочий\ стол/S
	Task:
	После добавления сетевых папок через Kerberos на следующий месяц, все етевые папки на ПК перестали работать. Для решения проблемы нужно обновлять билеты через kdestroy и kinit:
	Decision:
	$ smbclient -L thost -k
	gse_get_client_auth_token: gss_init_sec_context failed with [ Miscellaneous failure (see text): encryption type 0 not supported](2529639062)
	gensec_spnego_client_negTokenInit_step: gse_krb5: creating NEG_TOKEN_INIT for cifs/tusertsrvdoc failed (next[(null)]): NT_STATUS_LOGON_FAILURE
	session setup failed: NT_STATUS_LOGON_FAILURE
	$ klist
	Ticket cache: FILE:/tmp/krb5cc_17
	Default principal: tuser@tdomain.RU
	Valid starting Expires Service principal
	01.01.1970 08:00:00 01.01.1970 08:00:00 krbtgt/tdomain.RU@tdomain.RU
	$ date
	Вт окт 6 14:46:12 +08 2020
	$ kdestroy
	$ kinit
	$ klist
	Ticket cache: FILE:/tmp/krb5cc_17
	Default principal: tuser@tdomain.RU
	Valid starting Expires Service principal
	06.10.2020 14:46:51 07.10.2020 00:46:51 krbtgt/tdomain.RU@tdomain.RU
	renew until 13.10.2020 14:46:29
	Decision:
	Проблема решена, но билет кеширования, нужно было обновлять постоянно. Поэтому, на мой взгляд, проще подключать сетевые папки через automount без Kerberos.
	Task:
	Oграничение доступа к USB накопителям
	Decision:
	# vim /etc/udev/rules.d/99-usb.rules
	# cat /etc/udev/rules.d/99-usb.rules
	ENV{ID_USB_DRIVER}=="usb-storage",ENV{UDISKS_IGNORE}="1"
	# udevadm control --reload-rules
	Task:
	Запрет создания ярлыков и файлов на рабочем столе
	Decision:
	Проверить, поддерживает ли ваша файловая система ACL можно командой (вместо /dev/sda1 указать нужное имя дискового раздела):
	# tune2fs -l /dev/sda1 | grep "Default mount options:"
	Default mount options: user_xattr acl
	# vim /home/tuser@thost.ru/.config/user-dirs.dirs
	# cat /home/tuser@thost.ru/.config/user-dirs.dirs
	# This file is written by xdg-user-dirs-update
	# If you want to change or add directories, just edit the line you're
	# interested in. All local changes will be retained on the next run
	# Format is XDG_xxx_DIR="$HOME/yyy", where yyy is a shell-escaped
	# homedir-relative path, or XDG_xxx_DIR="/yyy", where /yyy is an
	# absolute path. No other format is supported.
	#
	XDG_DESKTOP_DIR="$HOME/Рабочий стол"
	XDG_DOWNLOAD_DIR="$HOME/Загрузки"
	XDG_TEMPLATES_DIR="$HOME/Шаблоны"
	XDG_PUBLICSHARE_DIR="$HOME/Общедоступные"
	XDG_DOCUMENTS_DIR="$HOME/Документы"
	XDG_MUSIC_DIR="$HOME/Музыка"
	XDG_PICTURES_DIR="$HOME/Изображения"
	XDG_VIDEOS_DIR="$HOME/Видео"
	# ls -la /home/tuser@thost.ru/.config
	...
	-rw-------. 1 tuser ïîëüçîâàòåëè äîìåíà 714 àâã 31 09:52 user-dirs.dirs
	-rw-r--r--. 1 tuser ïîëüçîâàòåëè äîìåíà 5 àâã 31 09:52 user-dirs.locale
	# chown root:root /home/tuser@thost.ru/.config/user-dirs.dirs
	# ls -la /home/tuser@thost.ru/.config
	...
	-rw-------. 1 root root 714 àâã 31 09:52 user-dirs.dirs
	-rw-r--r--. 1 tuser ïîëüçîâàòåëè äîìåíà 5 àâã 31 09:52 user-dirs.locale
	# ls -la
	...
	drwxr-xr-x. 2 tuser ïîëüçîâàòåëè äîìåíà 4096 àâã 31 09:52 'Рабочий стол'
	...
	# chown -R root:root /home/tuser@thost.ru/Рабочий\ стол/
	# ls -la
	...
	drwxr-xr-x. 2 root root 4096 àâã 31 09:52 'Рабочий стол'
	drwxr-xr-x. 2 tuser ïîëüçîâàòåëè äîìåíà 4096 àâã 31 09:52 Øàáëîíû
	Task:
	Как скрыть пользователей от экрана входа
	Decision:
	# cat /var/lib/AccountsService/users/user
	[User]
	Language=
	XSession=
	SystemAccount=false
	# vim /var/lib/AccountsService/users/user
	# cat /var/lib/AccountsService/users/user
	[User]
	Language=
	XSession=gnome
	SystemAccount=true
	Task:
	Добавление пользователя из доменной сети
	Decision:
	[root@thost user]# vim /var/lib/AccountsService/users/tuser
	[root@thost user]# cat /var/lib/AccountsService/users/tuser
	[User]
	Language=
	XSession=
	Icon=/home/tuser@thost.ru/.face
	SystemAccount=false
	Task:
	отключить сетевые принтеры
	Decision:
	# vim /etc/avahi/avahi-daemon.conf
	cat /etc/avahi/avahi-daemon.conf
	# This file is part of avahi.
	...
	enable-dbus=no
	...
	# reboot
	Task:
	Установка Gimp
	Decision:
	yum provides gimp
	Загружены модули: fastestmirror, langpacks
	Loading mirror speeds from cached hostfile
	2:gimp-2.8.22-2.el7.thost86 : GNU Image Manipulation Program
	Источник: base
	2:gimp-2.8.22-2.el7.x86_64 : GNU Image Manipulation Program
	Источник: base
	# yum list | grep gimp
	gimp.thost86 2:2.8.22-2.el7 base
	# yum -y install gimp
	Task:
	Запись дисков Linux в терминале
	Decision:
	# ls
	13 'MyTestX Tests'
	# pwd
	/home/is@tdomain.RU/Documents
	# mkisofs -o first.iso /home/is@tdomain.RU/Documents/13
	# ls
	13 first.iso 'MyTestX Tests'
	# mkisofs -l -o first.iso /home/is@tdomain.RU/Documents/13
	# ls
	13 first.iso 'MyTestX Tests'
	# mkisofs -D -l -o first.iso /home/is@tdomain.RU/Documents/13
	# mkisofs -J -l -o first.iso /home/is@tdomain.RU/Documents/13
	Warning: creating filesystem with Joliet extensions but without Rock Ridge
	extensions. It is highly recommended to add Rock Ridge.
	...
	Joliet tree sort failed. The -joliet-long switch may help you.
	# -joliet-long
	# mkisofs -J -joliet-long -l -o first.iso /home/is@tdomain.RU/Documents/13
	Warning: creating filesystem with Joliet extensions but without Rock Ridge
	extensions. It is highly recommended to add Rock Ridge.
	...
	99.90% done, estimate finish Fri Jan 15 11:29:00 2021
	Total translation table size: 0
	Total rockridge attributes bytes: 0
	Total directory bytes: 0
	Path table size(bytes): 10
	Max brk space used 0
	545548 extents written (1065 MB# lsblk -d -o +MODEL
	NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINT MODEL
	sda 8:0 0 111,8G 0 disk KINGSTON SA400S3
	sr0 11:0 1 2K 0 rom CDDVDW SN-208BB
	Если вы собираетесь записать образ на диск ubuntu DVD-RW/CD-RW необходимо сначала его очистить:
	cdrecord -dev=/dev/sr0 -v blank=fast
	# cd Documents/
	# ls
	13 first.iso 'MyTestX Tests'
	Здесь и ниже /dev/sr0 - адрес файла вашего привода:
	# cdrecord -dev=/dev/sr0 -speed=16 -eject -v first.iso
	first.iso - это файл образа, 16 - скорость записи, а опция -eject - заставляет извлечь диск из привода после записи. Можно указывать скорость 4, 8 и 16. Желательно выбирать минимальную скорость, так диск запишется более качественно.
	Task:
	Установка клиента 1С
	Decision:
	# yum -y install webkitgtk3
	# ls
	1C_Enterprise83-client-8.3.14-17.x86_64.rpm
	1C_Enterprise83-common-8.3.14-17.x86_64.rpm
	1C_Enterprise83-server-8.3.14-17.x86_64.rpm
	# yum -y install 1C_Enterprise83-*
	Task:
	Установка аналога paint
	Decision:
	# yum list | grep paint
	kolourpaint.thost86 17.12.1-2.el7 base
	kolourpaint.x86_64 17.12.1-2.el7 base
	kolourpaint-libs.thost86 17.12.1-2.el7 base
	kolourpaint-libs.x86_64 17.12.1-2.el7 base
	# yum -y install kolourpaint
	Task:
	Настройка оповещения и автоматического обновления пакетов в РЕД ОС с помощью yum-cron
	Decision:
	# yum -y install yum-cron
	# vim /etc/yum/yum-cron.conf
	# cat /etc/yum/yum-cron.conf
	[commands]
	# What kind of update to use:
	# default = yum upgrade
	# security = yum --security upgrade
	# security-severity:Critical = yum --sec-severity=Critical upgrade
	# minimal = yum --bugfix update-minimal
	# minimal-security = yum --security update-minimal
	# minimal-security-severity:Critical = --sec-severity=Critical update-minimal
	update_cmd = default
	# Whether a message should be emitted when updates are available,
	# were downloaded, or applied.
	update_messages = yes
	# Whether updates should be downloaded when they are available.
	download_updates = yes
	# Whether updates should be applied when they are available. Note
	# that download_updates must also be yes for the update to be applied.
	apply_updates = no
	# Maximum amout of time to randomly sleep, in minutes. The program
	# will sleep for a random amount of time between 0 and random_sleep
	# minutes before running. This is useful for e.g. staggering the
	# times that multiple systems will access update servers. If
	# random_sleep is 0 or negative, the program will run immediately.
	# 6*60 = 360
	random_sleep = 360
	...
	# vim /etc/yum/yum-cron.conf
	# cat /etc/yum/yum-cron.conf
	[commands]
	# What kind of update to use:
	# default = yum upgrade
	# security = yum --security upgrade
	# security-severity:Critical = yum --sec-severity=Critical upgrade
	# minimal = yum --bugfix update-minimal
	# minimal-security = yum --security update-minimal
	# minimal-security-severity:Critical = --sec-severity=Critical update-minimal
	update_cmd = default
	# Whether a message should be emitted when updates are available,
	# were downloaded, or applied.
	update_messages = yes
	# Whether updates should be downloaded when they are available.
	download_updates = yes
	# Whether updates should be applied when they are available. Note
	# that download_updates must also be yes for the update to be applied.
	apply_updates = yes
	# Maximum amout of time to randomly sleep, in minutes. The program
	# will sleep for a random amount of time between 0 and random_sleep
	# minutes before running. This is useful for e.g. staggering the
	# times that multiple systems will access update servers. If
	# random_sleep is 0 or negative, the program will run immediately.
	# 6*60 = 360
	random_sleep = 360
	...
	# systemctl enable yum-cron --now
	Task:  
	Если не требуется обновлять определенные пакеты (как вручную, так и автоматически), то добавляем их в исключение. Например, kernel и php.
	Decision:
	#nano /etc/yum.conf
	exclude=kernel, php
	Task:  
	Если не требуется обновлять пакеты ТОЛЬКО в автоматическом режиме, тогда в /etc/yum/yum-cron.conf , в раздел [base], добавляем следующую строку:
	Decision
	# nano /etc/yum/yum-cron.conf
	exclude=kernel* php*
	Task:
	Установка Anydesk
	Decision:
	# tee /etc/yum.repos.d/AnyDesk-RHEL.repo <<EOF
	> [anydesk]
	> name=AnyDesk RHEL - stable
	> baseurl=http://rpm.anydesk.com/rhel/\$basearch/
	> gpgcheck=1
	> repo_gpgcheck=1
	> gpgkey=https://keys.anydesk.com/repos/RPM-GPG-KEY
	> EOF
	# dnf makecache
	# dnf install -y redhat-lsb-core
	# dnf install anydesk
	# rpm -qi anydesk
	# systemctl status anydesk.service
	# exit
	$ anydesk
	Task:
	Создание загрузочных носителей
	Decision:
	# fdisk -l
	...
	Диск /dev/sdb: 3,61 GiB, 3880452096 байт, 7579008 секторов
	Disk model: Silicon-Power4G
	Единицы: секторов по 1 * 512 = 512 байт
	Размер сектора (логический/физический): 512 байт / 512 байт
	Размер I/O (минимальный/оптимальный): 512 байт / 512 байт
	Тип метки диска: gpt
	Идентификатор диска: 2BAC44AA-F36D-461C-B12A-D251E7E9373F
	Устр-во    начало   Конец Секторы Размер Тип
	/dev/sdb1    2048 7578974 7576927   3,6G Microsoft basic data
	# ls
	Zorin-OS-16.1-Core-64-bit.iso
	# dd if=Zorin-OS-16.1-Core-64-bit.iso of=/dev/sdb1 bs=8MB status=progress oflag=direct
	3058237440 байт (3,1 GB, 2,8 GiB) скопирован, 659 s, 4,6 MB/s
	382+1 записей получено
	382+1 записей отправлено
	3058237440 байт (3,1 GB, 2,8 GiB) скопирован, 659,39 s, 4,6 MB/s
	Task:
	Развернуть Pxe сервер для развертывания Redos с загрузкой в Uefi по сети
	Decision:
	# ifconfig
	enp2s0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
		inet IpAddr1  netmask Mask1  broadcast IpAddr.255
		...
	# dnf install dhcp tftp-server syslinux httpd dnf-plugins-core -y
	# mkdir /var/lib/tftpboot/pxelinux.cfg
	# mkdir /var/lib/tftpboot/uefi
	# mkdir -p /var/lib/tftpboot/images/REDOS
	# cp /usr/share/syslinux/{chain.c32,mboot.c32,memdisk,menu.c32,pxelinux.0,ldlinux.c32,libutil.c32} /var/lib/tftpboot/
	# chmod 777 /var/lib/tftpboot/pxelinux.0
	# dnf download shim-x64 grub2-efi-x64 --downloaddir=/root/
	# cd /root/
	# rpm2cpio shim-x64-*.rpm | cpio -dimv
	# rpm2cpio grub2-efi-x64-*.rpm | cpio -dimv
	# cp ./boot/efi/EFI/BOOT/BOOTX64.EFI /var/lib/tftpboot/uefi
	# cp ./boot/efi/EFI/redos/grubx64.efi /var/lib/tftpboot/uefi
	# chmod 777 /var/lib/tftpboot/uefi/*.*
	# mount -t iso9660 -o loop redos-MUROM-7.3.2-20211027.0-Everything-x86_64-DVD1.iso /mnt/
	# cp -vR /mnt/* /var/lib/tftpboot/images/REDOS/
	# umount /mnt/
	# vim /etc/dhcp/dhcpd.conf
	# cat /etc/dhcp/dhcpd.conf
	non-authoritative;
	allow bootp;
	option space pxelinux;
	option pxelinux.magic code 208 = string;
	option pxelinux.configfile code 209 = text;
	option pxelinux.pathprefix code 210 = text;
	option pxelinux.reboottime code 211 = unsigned integer 32;
	option architecture-type code 93 = unsigned integer 16;
	subnet IpAddr.0 netmask Mask1 {
	option routers IpAddr1;
	range IpAddr.70 IpAddr.80;
	class "pxeclients" {
	match if substring (option vendor-class-identifier, 0, 9) = "PXEClient";
	next-server IpAddr1;
	if option architecture-type = 00:07 {
	filename "uefi/grubx64.efi";
	} 
	else {
	filename "pxelinux.0";
	}
	}
	} 
	# systemctl enable dhcpd --now
	# vim /var/lib/tftpboot/pxelinux.cfg/default
	# cat /var/lib/tftpboot/pxelinux.cfg/default
	default menu.c32
	PROMPT 0
	TIMEOUT 150
	MENU TITLE PXE Menu
	LABEL REDOS 7.3
	MENU LABEL REDOS 7.3
	KERNEL images/REDOS/images/pxeboot/vmlinuz
	APPEND initrd=images/REDOS/images/pxeboot/initrd.img ramdisk_size=128000 ip=dhcp inst.repo=http://IpAddr1/images/REDOS/ 
	# vim /var/lib/tftpboot/uefi/grub.cfg 
	# cat /var/lib/tftpboot/uefi/grub.cfg 
	function load_video { 
	insmod efi_gop  
	insmod efi_uga 
	insmod video_bochs 
	insmod video_cirrus 
	insmod all_video 
	} 
	load_video 
	set gfxpayload=keep 
	insmod gzio 
	menuentry 'REDOS 7.3' { 
	linux images/REDOS/images/pxeboot/vmlinuz ip=dhcp inst.repo=http://IpAddr1/images/REDOS/ 
	initrd images/REDOS/images/pxeboot/initrd.img 
	} 
	Task:
	Используем web-сервер для публикации файлов дистрибутива РЕД ОС в локальной сети.
	Decision:
	# vim /etc/httpd/conf.d/pxeboot.conf 
	# cat /etc/httpd/conf.d/pxeboot.conf 
	Alias /images /var/lib/tftpboot/images 
	<Directory /var/lib/tftpboot/images> 
	Options Indexes FollowSymLinks 
	Require ip 127.0.0.1 IpAddr.0/24 
	</Directory>
	# systemctl enable httpd --now
	Task:
	Настройка и запуск службы tftp.
	Decision:
	# vim /usr/lib/systemd/system/tftp.service
	# cat /usr/lib/systemd/system/tftp.service
	...
	[Install]:
	WantedBy=multi-user.target 
	Also=tftp.socket
	...
	# vim /usr/lib/systemd/system/tftp.socket
	# cat /usr/lib/systemd/system/tftp.socket
	...
	[Unit] 
	Description=Tftp Server Activation Socket 
	[Socket] 
	ListenDatagram=0.0.0.0:69 
	[Install] 
	WantedBy=sockets.target 
	...
	# systemctl daemon-reload
	# systemctl enable tftp --now
	# ausearch -c 'httpd' --raw | audit2allow -M my-httpd
	# semodule -i my-httpd.pp
	Task:
	Автоматизация развертывания (kickstart)
	Создать файл кикстарта, Записать файл на локальный или удаленный носитель, Создать загрузочный диск, с которого будет запускаться установка, Предоставить доступ к установочной структуре, Начать процесс установки.
	Decision:
	# dnf install pykickstart -y
	# cp /root/anaconda-ks.cfg /var/lib/tftpboot
	# mv /var/lib/tftpboot/anaconda-ks.cfg /var/lib/tftpboot/ks.cfg
	# vim /var/lib/tftpboot/pxelinux.cfg/default
	# cat /var/lib/tftpboot/pxelinux.cfg/default
	...
	APPEND initrd=images/REDOS/images/pxeboot/initrd.img ramdisk_size=128000 ip=dhcp method=http://IpAddr1/images/REDOS/ devfs=nomount inst.ks=http://IpAddr1/ks.cfg 
	# vim /var/lib/tftpboot/uefi/grub.cfg
	# cat /var/lib/tftpboot/uefi/grub.cfg
	... { 
	linux images/REDOS/images/pxeboot/vmlinuz ip=dhcp kernel vmlinuz inst.repo=http://IpAddr1/images/REDOS/ inst.ks=http://IpAddr1/ks.cfg 
	initrd images/REDOS/images/pxeboot/initrd.img
	} 
	# vim /var/lib/tftpboot/ks.cfg
	# cat /var/lib/tftpboot/ks.cfg
	# Здесь указываем раскладку клавиатуры
	keyboard --vckeymap=us --xlayouts='us','ru' --switch='grp:alt_shift_toggle'
	# Системная локаль
	lang ru_RU.UTF-8
	# Информация о сетевом интерфейсе и имя машины
	network  --bootproto=dhcp --device=enp2s0 --noipv6 --activate
	network  --hostname=hostname1337
	# Пароль Root представлен в виде хэш-суммы
	rootpw --iscrypted $6$DUu0yyOYMRbGS8gL$9zHYPsxROGEZdDKG0wnf7h8SGnKOp3V272De6oGTVUsz2uBLmEeiR6T6cInRN5dyWcxNXh5fVluEUTQ/3rmzB0
	# Настройка сервисов (в данном случае сервис по обновлению меток времени и дат)
	services --enabled="chronyd"
	# Настройка временной зоны
	timezone Europe/Moscow --isUtc
	#Настройка локального пользователя
	user --groups=wheel --name=mekka --password=$6$83fyYZ7KMS7G9t6A$E5/99/ffOwjUOo8THr1ngqGDdKMimpTZf3IT9S/SI98BTV7dta7GksLYnQEZjtqqyZQrwibSRlvYccRqHB7m8/ --iscrypted --gecos="Mekka"
	# Настройка xorg при загрузке
	xconfig  --startxonboot
	# Указание загрузочного сектора и тип структуры
	bootloader --location=mbr --boot-drive=sda
	# Удаление всей информации с партиций для последующей установки
	clearpart --none --initlabel
	# Здесь указана вся разметка диска
	part /boot --fstype="xfs" --onpart=sda2
	part biosboot --fstype="biosboot" --noformat --onpart=sda4
	part pv.31 --fstype="lvmpv" --noformat --onpart=sda3
	part /boot/efi --fstype="efi" --onpart=sda1 --fsoptions="umask=0077,shortname=winnt"
	volgroup ro --noformat --useexisting
	logvol swap  --fstype="swap" --useexisting --name=swap --vgname=ro
	logvol /home  --fstype="xfs" --noformat --useexisting --name=home --vgname=ro
	logvol /  --fstype="ext4" --useexisting --name=root --vgname=ro
	#дополнительные пакеты для установки
	%packages
	@^mate-desktop-environment
	@backup-client
	@base
	@branding
	@core
	@desktop-debugging
	@dial-up
	@directory-client
	@fonts
	@guest-agents
	@guest-desktop-agents
	@input-methods
	@internet-applications
	@internet-browser
	@java-platform
	@mate-desktop
	@multimedia
	@network-file-system-client
	@print-client
	@x11
	chrony
	%end
	#настройка аварийных дампов памяти в случае сбоев (оставить как есть)
	%addon com_redhat_kdump --enable --reserve-mb='auto'
	%end
	#настройка анаконды (оставить как есть)
	%anaconda
	pwpolicy root --minlen=6 --minquality=1 --notstrict --nochanges --notempty
	pwpolicy user --minlen=6 --minquality=1 --notstrict --nochanges --emptyok
	pwpolicy luks --minlen=6 --minquality=1 --notstrict --nochanges --notempty
	%end
	Task:
	Настройка установки РЕД ОС по PXE через VNC вместо Kickstart
	Decision:
	# vim /var/lib/tftpboot/pxelinux.cfg/default
	# cat /var/lib/tftpboot/pxelinux.cfg/default
	...
	APPEND initrd=images/REDOS/images/pxeboot/initrd.img ramdisk_size=128000 ip=dhcp method=http://IpAddr1/images/REDOS/ devfs=nomount inst.vnc inst.vncpassword=tpassword
	# vim /var/lib/tftpboot/uefi/grub.cfg
	# cat /var/lib/tftpboot/uefi/grub.cfg
	... { 
	linux images/REDOS/images/pxeboot/vmlinuz ip=dhcp kernel vmlinuz inst.repo=http://IpAddr1/images/REDOS/ inst.vnc inst.vncpassword=tpassword
	initrd images/REDOS/images/pxeboot/initrd.img
	}
Task:
После того как в виртуальной машине Centos настроил Docker контейнер и презагрузил сам физический сервер с Centos, произошла бесконечная загрузка и как когда стрелками нажимал, появилась следующая ошибка в момент загрузки сервера:
Dependency failed for /var
Dependency failed for D-Bus System Message Bus
staring file system check on dev/disk/by-uuid/UUID1
failed to start file system check on dev/disk/UUID1
See 'systemctl status "systemd-fsck@dev-disk-by\\xzduuid-UUID1"'
Decision:
Для решения данной проблемы нужнозагрузиться с LiveCd (Ubuntu) и запустить Fsck для проверки и восстановления файловой системы
$ ls /dev/disk/by-uuid/UUID1
/dev/disk/by-uuid/UUID1
$ systemctl status "systemd-fsck@dev-disk-by\\UUID1.service" > test.txt
$ cat test.txt 
○ systemd-fsck@dev-disk-by\xZduuid-8f07e18e\xZd9d1a\xZd4dab\xZd8904\xZda86e0c2058b4.service
     Loaded: bad-setting (Reason: Unit systemd-fsck@dev-disk-by\xZduuid-8f07e18e\xZd9d1a\xZd4dab\xZd8904\xZda86e0c2058b4.service has a bad unit file setting.)
     Active: inactive (dead)
       Docs: man:systemd-fsck@.service(8)
Nov 15 12:50:19 ubuntu systemd[1]: systemd-fsck@dev-disk-by\xZduuid-8f07e18e\xZd9d1a\xZd4dab\xZd8904\xZda86e0c2058b4.service: Unit configuration has fatal error, unit will not be started.
Nov 15 12:52:01 ubuntu systemd[1]: /lib/systemd/system/systemd-fsck@.service:11: Failed to resolve unit specifiers in 'File System Check on %f', ignoring: Invalid argument
Nov 15 12:52:01 ubuntu systemd[1]: /lib/systemd/system/systemd-fsck@.service:23: Failed to resolve unit specifiers in %f: Invalid argument
Nov 15 12:52:01 ubuntu systemd[1]: systemd-fsck@dev-disk-by\xZduuid-8f07e18e\xZd9d1a\xZd4dab\xZd8904\xZda86e0c2058b4.service: Unit configuration has fatal error, unit will not be started.
Nov 15 12:52:30 ubuntu systemd[1]: /lib/systemd/system/systemd-fsck@.service:11: Failed to resolve unit specifiers in 'File System Check on %f', ignoring: Invalid argument
Nov 15 12:52:30 ubuntu systemd[1]: /lib/systemd/system/systemd-fsck@.service:23: Failed to resolve unit specifiers in %f: Invalid argument
Nov 15 12:52:30 ubuntu systemd[1]: systemd-fsck@dev-disk-by\xZduuid-8f07e18e\xZd9d1a\xZd4dab\xZd8904\xZda86e0c2058b4.service: Unit configuration has fatal error, unit will not be started.
Nov 15 12:53:50 ubuntu systemd[1]: /lib/systemd/system/systemd-fsck@.service:11: Failed to resolve unit specifiers in 'File System Check on %f', ignoring: Invalid argument
Nov 15 12:53:50 ubuntu systemd[1]: /lib/systemd/system/systemd-fsck@.service:23: Failed to resolve unit specifiers in %f: Invalid argument
Nov 15 12:53:50 ubuntu systemd[1]: systemd-fsck@dev-disk-by\xZduuid-8f07e18e\xZd9d1a\xZd4dab\xZd8904\xZda86e0c2058b4.service: Unit configuration has fatal error, unit will not be started.
$ df -h
...
/dev/sdb1            916G  339G  531G  39% /media/ubuntu/UUID1
...
$ sudo parted /dev/sdb1 'print'
Model: Unknown (unknown)
Disk /dev/sdb1: 1000GB
Sector size (logical/physical): 512B/4096B
Partition Table: loop
Disk Flags: 
Number  Start  End     Size    File system  Flags
 1      0.00B  1000GB  1000GB  ext4
$ sudo umount /dev/sdb1
$ sudo fsck /dev/sdb1
fsck from util-linux 2.37.2
e2fsck 1.46.5 (30-Dec-2021)
/dev/sdb1 contains a file system with errors, check forced.
Pass 1: Checking inodes, blocks, and sizes
Inode 40895771 extent tree (at level 2) could be narrower.  Optimize<y>? yes
...
Inode 41156677 extent tree (at level 2) could be narrower.  Optimize<y>? yes
Inodes that were part of a corrupted orphan linked list found.  Fix<y>? yes
Inode 56623165 was part of the orphaned inode list.  FIXED.
...
Inode 56623196 was part of the orphaned inode list.  FIXED.
Pass 1E: Optimizing extent trees
Pass 2: Checking directory structure
Pass 3: Checking directory connectivity
Pass 4: Checking reference counts
Pass 5: Checking group summary information
Block bitmap differences:  -(4172736--4172783) -(7917568--7917588) -(22880252--22881251) -(22910443--22912073) -(164069760--164069882) -(164070454--164070541)
Fix<y>? yes
Free blocks count wrong for group #127 (2152, counted=2200).
...
Fix<y>? yes
Free inodes count wrong (61050243, counted=61050252).
Fix<y>? yes
/dev/sdb1: ***** FILE SYSTEM WAS MODIFIED *****
/dev/sdb1: 4724/61054976 files (4.8% non-contiguous), 92947008/244190390 blocks
$ sudo fsck -N /dev/sdb1
fsck from util-linux 2.37.2
[/usr/sbin/fsck.ext4 (1) -- /dev/sdb1] fsck.ext4 /dev/sdb1 
$ sudo fsck -y /dev/sdb1
fsck from util-linux 2.37.2
e2fsck 1.46.5 (30-Dec-2021)
/dev/sdb1: clean, 4724/61054976 files, 92947008/244190390 blocks
$ sudo fsck -f /dev/sdb1
fsck from util-linux 2.37.2
e2fsck 1.46.5 (30-Dec-2021)
Pass 1: Checking inodes, blocks, and sizes
Pass 2: Checking directory structure
Pass 3: Checking directory connectivity
Pass 4: Checking reference counts
Pass 5: Checking group summary information
/dev/sdb1: 4724/61054976 files (4.8% non-contiguous), 92947008/244190390 blocks
$ sudo reboot
	Source:
	https://redos.red-soft.ru/base/other-soft/other-other/consultant/?sphrase_id=53349
	https://wtuseri.astralinuthost.ru/pages/viewpage.action?pageId=61574227
	https://askubuntu.ru/questions/21203/kak-skry-t-pol-zovatelej-ot-e-krana-vxoda-v-gdm
	https://computingforgeeks.com/how-to-install-gimp-on-centos-rhel-8-desktop/
	https://ru.wtuserihow.com/%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D1%82%D1%8C-ISO-%D1%84%D0%B0%D0%B9%D0%BB-%D0%B2-Linux
	https://losst.ru/zapis-diskov-v-ubuntu
	https://losst.ru/luchshie-analogi-paint-dlya-linux
	https://computingforgeeks.com/how-to-install-anydesk-on-centos-rhel-8/
	https://wiki.merionet.ru/articles/rukovodstvo-po-komande-fsck-dlya-proverki-i-vosstanovleniya-fajlovoj-sistemy/

Разработка программ, которые анализируют, обрабатывают и сортируют код на сайте организации
	Task:
	Разработал программы, которые анализируют, обрабатывают и сортируют код на сайте организации. Это позволило мне ускорить процесс корректировки тегов на сайте по запросу Россобрнадзор
	Task:
	Рроверить все страницы на сайте, на отсутствие pdf файлов больше 15 Мб.
	Decision:
	$ wget https://tsite.ru/sveden/document
	--2018-11-01 20:12:20--  https://tsite.ru/sveden/document
	Распознаётся tsite.ru (tsite.ru)… IpAddr
	Подключение к tsite.ru (tsite.ru)|IpAddr|:443... соединение установлено.
	ОШИБКА: Нет доверия сертификату для «tsite.ru».
	ОШИБКА: Неизвестный издатель сертификата «tsite.ru».
	$ wget --no-check-certificate -r -l 1 -A pdf https://tsite.ru/sveden/document
	$ vim bash-FileWeight.sh
	$ chmod +x bash-FileWeight.sh
	$ cat bash-FileWeight.sh
	#!/bin/bash
	echo -n "Enter a link to the site: "
	read linksite
	user=$(whoami)
	echo -n "Come up with a name for the directory where the files will be written: "
	read linkfiles
	if [ -d /home/$user/$linkfiles ]; then
			rm -rf /home/$user/$linkfiles
			echo "/home/$user/$filename delete"
	else
			mkdir /home/$user/$linkfiles
			cd /home/$user/$linkfiles
			echo "/home/$user/$linkfiles create"
	fi
	wget --no-check-certificate -r -l 1 -A pdf $linksite
	find /home/$user/$linkfiles -size +15M > output
	$ ./bash-FileWeight.sh
	Enter a link to the site: https://tsite.ru/sveden/document
	Come up with a name for the directory where the files will be written: tdir
	/home/tUser/tdir create
	...
	$ cat /home/tUser/tdir/output
	/home/tUser/tdir/tsite.ru/Media/irk/Документы института/2018/tDoc1.pdf
	$ ls -l /home/tUser/tdir/tsite.ru/Media/irk/Документы\ института/2018/tDoc1.pdf 
	-rw-r--r--. 1 tUser tUser 20055320 июн 30  2018 '/home/tUser/tdir/tsite.ru/Media/irk/Документы института/2018/tDoc1.pdf'
	Task:
	Отсортировать html-код страницы по атрибутам <tr><td>
	Decision:

	Task:
	Поменять/добавить тег на странице с таблицей,в некоторых строках тег отсутствует
	Decision:
	
	Source:
	https://stackoverflow.com/questions/4846007/check-if-directory-exists-and-delete-in-one-command-unix

Утилита для сканирования безопасности сети Nmap 
	Task:
    Для защиты выпускной квалификационной работы по теме "Утилита для сканирования безопасности сети Nmap" проанализировал состояние виртуальных машин в Qemu-Kvm инструментом Nmap. Дополнительно для перехвата трафиков использовал Tcpdump. Для того чтобы обезопасить свои системы, настроил правила в Iptables и развернул антируткит, который по определенному раписанию выгружал отчет о состоянии системы. В курсовой работе своил навыки по следующим инструментам: Qemu-Kvm, Virtualbox, Linux, Ssh, Iptables, Nmap, Bash, Vsftpd, Telnet, Nginx, Squid, Tcpdump, Icmp, Tripwire, Rkhunter, Crontab
    Task:
    У руководителя уже установлена тестовая система Centos в машине Qemu-Kvm. Наша первая задача скоипровать у него систему 
    Decision:
    $ sudo virsh list --all
     ID   Имя           Состояние
    -------------------------------
     2    Centos9       работает
     -    Alt           выключен
     -    Centos        выключен
     -    Kali          выключен
     -    ubuntu22.04   выключен
     -    Windows       выключен
    $ sudo virsh shutdown Centos9
    $ sudo virsh domblklist Centos9
     Назначение   Источник
    ---------------------------------------------------
     vda          /images/Centos9.img
     sda          -
    $ rsync -avzP user@IpAddrCentos:/images/Centos9.img Centos/.
    $ sudo virsh dumpxml Centos9 > Centos9.xml
    $ head Centos9.xml
    <domain type='kvm'>
      <name>Centos9</name>
      <uuid>8cdbcba9-a955-4ca1-b75e-ab3145255c8d</uuid>
      <metadata>
        <libosinfo:libosinfo xmlns:libosinfo="http://libosinfo.org/xmlns/libvirt/domain/1.0">
          <libosinfo:os id="http://centos.org/centos-stream/9"/>
        </libosinfo:libosinfo>
      </metadata>
      <memory unit='KiB'>2097152</memory>
      <currentMemory unit='KiB'>2097152</currentMemory>
    $ sudo head /etc/libvirt/qemu/Centos9.xml
    <!--
    WARNING: THIS IS AN AUTO-GENERATED FILE. CHANGES TO IT ARE LIKELY TO BE
    OVERWRITTEN AND LOST. Changes to this xml configuration should be made using:
      virsh edit Centos9
    or other application using the libvirt API.
    -->
    <domain type='kvm'>
      <name>Centos9</name>
      <uuid>8cdbcba9-a955-4ca1-b75e-ab3145255c8d</uuid>
    $ sudo qemu-img info Centos9.img
    image: Centos9.img
    file format: qcow2
    virtual size: 50 GiB (53687091200 bytes)
    disk size: 50 GiB
    cluster_size: 65536
    Snapshot list:
    ID        TAG               VM SIZE                DATE     VM CLOCK     ICOUNT
    1         snapshot1             0 B 2023-09-28 13:18:14 00:00:00.000          0
    Format specific information:
        compat: 1.1
        compression type: zlib
        lazy refcounts: true
        refcount bits: 16
        corrupt: false
        extended l2: false
    Child node '/file':
        filename: Centos9.img
        protocol type: file
        file length: 50 GiB (53695545344 bytes)
        disk size: 50 GiB
    $ sudo qemu-img convert Centos9.img tmp.bin -p
    $ VBoxManage convertdd tmp.bin virtualbox.vdi
    $ VBoxManage modifyvdi virtualbox.vdi compact
    Task:
    Работа с iptables. 
    Проверяем наличие пакета iptables. 
    Убедимся, что iptables запускается при старте системы. 
    Выводим список текущих правил iptables.
    проанализируем какие порты открыты в сервере Centos. 
    Для этого нужно подключиться с сервера ubuntu.
    Decision:
    $ virsh start Centos9
    $ virsh start ubuntu22.04
    $ ssh -X user@IpAddrCentos
    $ sudo su
    [root@centos user]# yum install iptables-services
    [root@centos user]# iptables --version
    [root@centos user]# iptables -L -v
    Chain INPUT (policy ACCEPT 0 packets, 0 bytes)
     pkts bytes target     prot opt in     out     source               destination         
    Chain FORWARD (policy ACCEPT 0 packets, 0 bytes)
     pkts bytes target     prot opt in     out     source               destination         
    Chain OUTPUT (policy ACCEPT 0 packets, 0 bytes)
     pkts bytes target     prot opt in     out     source               destination 
    [root@centos user]# systemctl start iptables
    [root@centos user]# systemctl enable iptables
    [root@centos user]# service iptables status
    $ ssh -X user@IpAddrUbuntu
    user@ubuntu:~$ nmap IpAddrCentos
    Starting Nmap 7.80 ( https://nmap.org ) at 2023-10-17 08:33 CDT
    Nmap scan report for centos (IpAddrCentos)
    Host is up (0.00089s latency).
    Not shown: 999 filtered ports
    PORT   STATE SERVICE
    22/tcp open  ssh
    MAC Address: MacAddrCentos (QEMU virtual NIC)
    Nmap done: 1 IP address (1 host up) scanned in 5.30 seconds
    Task:
    В сервере Centos Напишем набор правил iptables, в котором мы разрешаем все исходящие соединения и строго ограничиваем входящие. 
    Доступ будет возможен по портам TCP: 21, 22, 25, 53, 80, 143, 443, по портам UDP: 20, 21, 53, также мы пропускаем пакеты для уже установленных соединений.
    С удаленной машины просканируем порты на нашем сервере.
    Decision:
    [root@centos user]# vim firewall.sh
    [root@centos user]# cat firewall.sh
    #!/bin/bash
    IPT="/sbin/iptables"
    # Очищаем правила и удаляем цепочки.
    $IPT -F
    $IPT -X
    # По умолчанию доступ запрещен.
    $IPT -P INPUT DROP
    $IPT -P FORWARD DROP
    $IPT -P OUTPUT DROP
    # Список разрешенных TCP и UDP портов.
    TCP_PORTS="21,22,25,53,80,143,443"
    UDP_PORTS="53,21,20"
    # Разрешаем пакеты для интерфейса обратной петли.
    $IPT -A INPUT -i lo -j ACCEPT
    $IPT -A OUTPUT -o lo -j ACCEPT
    # Разрешаем пакеты для установленных соединений.
    $IPT -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT
    # Разрешаем исходящие соединения.
    $IPT -A OUTPUT -m state --state NEW,ESTABLISHED,RELATED -j ACCEPT
    # Разрешаем доступ к портам, описанным в переменных TCP_PORTS и UDP_PORTS.
    $IPT -A INPUT -p tcp -m multiport --dport $TCP_PORTS -j ACCEPT
    $IPT -A INPUT -p udp -m multiport --dport $UDP_PORTS -j ACCEPT
    # Разрешаем исходящий ping.
    $IPT -A INPUT -p icmp -m icmp --icmp-type echo-reply -j ACCEPT
    [root@centos user]# chmod +x firewall.sh
    [root@centos user]# ./firewall.sh
    [root@centos user]# iptables -L -v
    Chain INPUT (policy DROP 1986 packets, 87384 bytes)
     pkts bytes target     prot opt in     out     source               destination         
        0     0 ACCEPT     all  --  lo     any     anywhere             anywhere            
       79  5604 ACCEPT     all  --  any    any     anywhere             anywhere             state RELATED,ESTABLISHED
        9   396 ACCEPT     tcp  --  any    any     anywhere             anywhere             multiport dports ftp,ssh,smtp,domain,http,imap,https
        0     0 ACCEPT     udp  --  any    any     anywhere             anywhere             multiport dports domain,ftp,ftp-data
        0     0 ACCEPT     icmp --  any    any     anywhere             anywhere             icmp echo-reply
    Chain FORWARD (policy DROP 0 packets, 0 bytes)
     pkts bytes target     prot opt in     out     source               destination         
    Chain OUTPUT (policy DROP 0 packets, 0 bytes)
     pkts bytes target     prot opt in     out     source               destination         
        0     0 ACCEPT     all  --  any    lo      anywhere             anywhere            
       60  7920 ACCEPT     all  --  any    any     anywhere             anywhere             state NEW,RELATED,ESTABLISHED
    [root@centos user]# service iptables save
    user@ubuntu:~$ nmap IpAddrCentos
    Starting Nmap 7.80 ( https://nmap.org ) at 2023-10-17 08:37 CDT
    Nmap scan report for centos (IpAddrCentos)
    Host is up (0.00095s latency).
    Not shown: 993 filtered ports
    PORT    STATE  SERVICE
    21/tcp  closed ftp
    22/tcp  open   ssh
    25/tcp  closed smtp
    53/tcp  closed domain
    80/tcp  closed http
    143/tcp closed imap
    443/tcp closed https
    MAC Address: MacAddrCentos (QEMU virtual NIC)
    Nmap done: 1 IP address (1 host up) scanned in 5.20 seconds
    Task:
    Если сетевых интерфейсов два или более, то необходимо включить перенаправление трафика и перечитать конфигурационный файл
    Decision:
    [root@centos user]# vim /etc/sysctl.conf
    [root@centos user]# cat /etc/sysctl.conf
    ...
    net.ipv4.ip_forward = 1
    [root@centos user]# sysctl -p /etc/sysctl.conf
    net.ipv4.ip_forward = 1
    Task:
    Install and configure an FTP server. Securing the connection to the FTP server.
    Decision:
    [root@centos user]# dnf update -y
    [root@centos user]# dnf install vsftpd -y
    [root@centos user]# systemctl enable vsftpd --now
    [root@centos user]# systemctl status vsftpd
    user@ubuntu:~$ nmap IpAddrCentos
    Starting Nmap 7.80 ( https://nmap.org ) at 2023-10-18 07:41 CDT
    Nmap scan report for IpAddrCentos
    Host is up (0.0012s latency).
    Not shown: 993 filtered ports
    PORT    STATE  SERVICE
    21/tcp  open   ftp
    22/tcp  open   ssh
    25/tcp  closed smtp
    53/tcp  closed domain
    80/tcp  closed http
    143/tcp closed imap
    443/tcp closed https
    MAC Address: MacAddrCentos (QEMU virtual NIC)
    Nmap done: 1 IP address (1 host up) scanned in 5.80 seconds
    [root@centos user]# useradd -m -d "/home/ftpuser" ftpuser
    [root@centos user]# passwd ftpuser
    [root@centos user]# mkdir -p /home/ftpuser/shared
    [root@centos user]# chmod -R 750 /home/ftpuser/shared
    [root@centos user]# chown ftpuser: /home/ftpuser/shared
    [root@centos user]# vim /etc/vsftpd/user_list
    [root@centos user]# cat /etc/vsftpd/user_list | grep ftp
    ftpuser
    [root@centos user]# vim /etc/vsftpd/vsftpd.conf
    [root@centos user]# cat /etc/vsftpd/vsftpd.conf
    ...
    anonymous_enable=NO
    ...
    local_enable=YES
    ...
    write_enable=YES
    ...
    chroot_local_user=YES
    ...
    allow_writeable_chroot=YES
    pasv_min_port=31500
    pasv_max_port=32500
    userlist_file=/etc/vsftpd/user_list
    userlist_deny=NO
    [root@centos user]# systemctl restart vsftpd
    [root@centos user]# openssl req -x509 -nodes -days 3650 \
    -newkey rsa:2048 -keyout /etc/vsftpd.pem \
    -out /etc/vsftpd/vsftpd.pem
    [root@centos user]# vim /etc/vsftpd/vsftpd.conf
    [root@centos user]# cat /etc/vsftpd/vsftpd.conf
    ...
    #rsa_cert_file=/etc/vsftpd/vsftpd.pem
    #rsa_private_key_file=/etc/vsftpd.pem
    #ssl_enable=YES
    [root@centos user]# systemctl restart vsftpd
    [root@centos user]# cat /etc/sysconfig/iptables
    # Generated by iptables-save v1.8.8 (nf_tables) on Sun Oct 22 12:10:33 2023
    *mangle
    :PREROUTING ACCEPT [45:3316]
    :INPUT ACCEPT [45:3316]
    :FORWARD ACCEPT [0:0]
    :OUTPUT ACCEPT [34:5048]
    :POSTROUTING ACCEPT [34:5048]
    COMMIT
    # Completed on Sun Oct 22 12:10:33 2023
    # Generated by iptables-save v1.8.8 (nf_tables) on Sun Oct 22 12:10:33 2023
    *raw
    :PREROUTING ACCEPT [45:3316]
    :OUTPUT ACCEPT [34:5048]
    COMMIT
    # Completed on Sun Oct 22 12:10:33 2023
    # Generated by iptables-save v1.8.8 (nf_tables) on Sun Oct 22 12:10:33 2023
    *filter
    :INPUT DROP [0:0]
    :FORWARD DROP [0:0]
    :OUTPUT DROP [0:0]
    -A INPUT -i lo -j ACCEPT
    -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT
    -A INPUT -p tcp -m multiport --dports 21,22,25,53,80,143,443 -j ACCEPT
    -A INPUT -p udp -m multiport --dports 53,21,20 -j ACCEPT
    -A INPUT -p icmp -m icmp --icmp-type 0 -j ACCEPT
    -A OUTPUT -o lo -j ACCEPT
    -A OUTPUT -m state --state NEW,RELATED,ESTABLISHED -j ACCEPT
    COMMIT
    # Completed on Sun Oct 22 12:10:33 2023
    # Generated by iptables-save v1.8.8 (nf_tables) on Sun Oct 22 12:10:33 2023
    *nat
    :PREROUTING ACCEPT [0:0]
    :INPUT ACCEPT [0:0]
    :OUTPUT ACCEPT [0:0]
    :POSTROUTING ACCEPT [0:0]
    COMMIT
    # Completed on Sun Oct 22 12:10:33 2023
    [root@centos user]# iptables -t filter -A INPUT -p tcp --dport 20:21 -j ACCEPT
    [root@centos user]# iptables -t filter -A INPUT -p tcp --dport 31500:32500 -j ACCEPT
    [root@centos user]# service iptables save
    [root@centos user]# systemctl restart iptables
    user@ubuntu:~$ telnet IpAddrCentos 21
    Trying IpAddrCentos...
    Connected to IpAddrCentos.
    Escape character is '^]'.
    220 (vsFTPd 3.0.5)
    USER ftpuser
    331 Please specify the password.
    PASS tpassword
    230 Login successful.
    PWD
    257 "/" is the current directory
    PASV
    227 Entering Passive Mode (I,P,126,61).
    user@ubuntu:~$ 126*256+61
    32317
    user@ubuntu:~$ telnet IpAddrCentos 32317
    Trying IpAddrCentos...
    Connected to IpAddrCentos.
    Escape character is '^]'.
    LIST
    150 Here comes the directory listing.
    226 Directory send OK.
    drwxr-x---    2 1001     1001            6 Oct 21 03:06 shared
    QUIT
    221 Goodbye.
    Task:
    Запрещаем доступ к фтп всем пользователям, кроме пользователя с MAC-адресом MacAddrUbuntu.
    Decision:
    [root@centos user]# iptables -I INPUT -p tcp --dport 21 -m mac ! --mac-source MacAddrUbuntu -j REJECT
    [root@centos user]# service iptables save
    [root@centos user]# systemctl restart iptables
    user@ubuntu:~$ ifconfig | grep MacAddrUbuntu
            ether MacAddrUbuntu  txqueuelen 1000  (Ethernet)
    user@ubuntu:~$ ftp IpAddrCentos
    Connected to IpAddrCentos.
    220 (vsFTPd 3.0.5)
    Name (IpAddrCentos:user): ftpuser
    331 Please specify the password.
    Password: 
    230 Login successful.
    Remote system type is UNIX.
    Using binary mode to transfer files.
    ftp> ls
    229 Entering Extended Passive Mode (|||31695|)
    150 Here comes the directory listing.
    drwxr-x---    2 1001     1001            6 Oct 21 03:06 shared
    226 Directory send OK.
    ftp> exit
    221 Goodbye.
    ┌──(user㉿kali)-[~]
    └─$ ftp IpAddrCentos
    ftp: Can't connect to `IpAddrCentos:21': Connection refused
    ftp: Can't connect to `IpAddrCentos:ftp'
    ftp> exit
    ┌──(user㉿kali)-[~]
    └─$ telnet IpAddrCentos 21 
    Trying IpAddrCentos...
    telnet: Unable to connect to remote host: Connection refused
    Task:
    Install Nginx
    Decision:
    [root@centos user]# dnf update -y
    [root@centos user]# dnf install nginx
    [root@centos user]# systemctl start nginx
    [root@centos user]# systemctl enable nginx
    [root@centos user]# nginx -v
    nginx version: nginx/1.22.1
    [root@centos user]# firefox IpAddrCentos
    Task:
    Configure Squid Proxy
    Decision:
    ┌──(root㉿kali)-[/home/user]
    └─#  apt update
    ┌──(root㉿kali)-[/home/user]
    └─#  apt install squid
    ┌──(root㉿kali)-[/home/user]
    └─# systemctl start squid
    ┌──(root㉿kali)-[/home/user]
    └─# systemctl enable squid
    ┌──(root㉿kali)-[/home/user]
    └─# grep -Eiv '(^#|^$)' /etc/squid/squid.conf
    acl localnet src 0.0.0.1-0.255.255.255  # RFC 1122 "this" network (LAN)
    acl localnet src 10.0.0.0/8             # RFC 1918 local private network (LAN)
    acl localnet src 100.64.0.0/10          # RFC 6598 shared address space (CGN)
    acl localnet src 169.254.0.0/16         # RFC 3927 link-local (directly plugged) machines
    acl localnet src 172.16.0.0/12          # RFC 1918 local private network (LAN)
    acl localnet src 192.168.0.0/16         # RFC 1918 local private network (LAN)
    acl localnet src fc00::/7               # RFC 4193 local private network range
    acl localnet src fe80::/10              # RFC 4291 link-local (directly plugged) machines
    acl SSL_ports port 443
    acl Safe_ports port 80          # http
    acl Safe_ports port 21          # ftp
    acl Safe_ports port 443         # https
    acl Safe_ports port 70          # gopher
    acl Safe_ports port 210         # wais
    acl Safe_ports port 1025-65535  # unregistered ports
    acl Safe_ports port 280         # http-mgmt
    acl Safe_ports port 488         # gss-http
    acl Safe_ports port 591         # filemaker
    acl Safe_ports port 777         # multiling http
    http_access deny !Safe_ports
    http_access deny CONNECT !SSL_ports
    http_access allow localhost manager
    http_access deny manager
    http_access allow localhost
    http_access deny to_localhost
    http_access deny to_linklocal
    include /etc/squid/conf.d/*.conf
    http_access deny all
    http_port 3128
    coredump_dir /var/spool/squid
    refresh_pattern ^ftp:           1440    20%     10080
    refresh_pattern -i (/cgi-bin/|\?) 0     0%      0
    refresh_pattern .               0       20%     4320
    ┌──(root㉿kali)-[/home/user]
    └─# mv /etc/squid/squid.conf /etc/squid/squid.conf.bac
    ┌──(root㉿kali)-[/home/user]
    └─# vim /etc/squid/squid.conf
    ┌──(root㉿kali)-[/home/user]
    └─# cat /etc/squid/squid.conf    
    acl localnet src IpAddrKali
    http_access allow localnet
    http_port 3128
    ┌──(root㉿kali)-[/home/user]
    └─# systemctl restart squid   
    ┌──(root㉿kali)-[/home/user]
    └─# cat /var/log/squid/access.log
    1698153952.395      1 IpAddrKali NONE_NONE/400 3816 - / - HIER_NONE/- text/html
    1698153953.958      7 IpAddrKali TCP_DENIED/403 4185 GET http://kali:3128/squid-internal-static/icons/SN.png - HIER_NONE/- text/html
    ...
    1698154905.087      2 IpAddrKali TCP_MISS/400 3889 GET http://IpAddrKali:3128/ - HIER_DIRECT/IpAddrKali text/html
    1698154906.698    149 IpAddrKali TCP_TUNNEL/200 39 CONNECT static.vk.com:443 - HIER_DIRECT/87.240.137.164 -
    1698154906.796      0 IpAddrKali NONE_NONE/400 3838 - /favicon.ico - HIER_NONE/- text/html
    1698154906.797      2 IpAddrKali TCP_MISS/400 3911 GET http://IpAddrKali:3128/favicon.ico - HIER_DIRECT/IpAddrKali text/html
    ┌──(root㉿kali)-[/home/user]
    └─# apt install apache2-utils   
    ┌──(root㉿kali)-[/home/user]
    └─# htpasswd -c /etc/squid/passwd user
    ┌──(root㉿kali)-[/home/user]
    └─# vim /etc/squid/squid.conf         
    ┌──(root㉿kali)-[/home/user]
    └─# cat /etc/squid/squid.conf
    #acl localnet src IpAddrKali
    #http_access allow localnet
    http_port 3128
    via off
    auth_param basic program /usr/lib/squid/basic_ncsa_auth /etc/squid/passwd
    auth_param basic children 5
    auth_param basic credentialsttl 2 hours
    auth_param basic casesensitive on
    auth_param basic realm Squid proxy for kali
    acl auth_users proxy_auth REQUIRED
    http_access allow auth_users
    ┌──(root㉿kali)-[/home/user]
    └─# systemctl restart squid
    Task:
    Configure Squid Proxy
    Decision:
    [root@centos user]# dnf install squid
    [root@centos user]# systemctl enable --now squid
    [root@centos user]# grep -Eiv '(^#|^$)' /etc/squid/squid.conf
    acl localnet src 0.0.0.1-0.255.255.255  # RFC 1122 "this" network (LAN)
    acl localnet src 10.0.0.0/8             # RFC 1918 local private network (LAN)
    acl localnet src 100.64.0.0/10          # RFC 6598 shared address space (CGN)
    acl localnet src 169.254.0.0/16         # RFC 3927 link-local (directly plugged) machines
    acl localnet src 172.16.0.0/12          # RFC 1918 local private network (LAN)
    acl localnet src 192.168.0.0/16         # RFC 1918 local private network (LAN)
    acl localnet src fc00::/7               # RFC 4193 local private network range
    acl localnet src fe80::/10              # RFC 4291 link-local (directly plugged) machines
    acl SSL_ports port 443
    acl Safe_ports port 80          # http
    acl Safe_ports port 21          # ftp
    acl Safe_ports port 443         # https
    acl Safe_ports port 70          # gopher
    acl Safe_ports port 210         # wais
    acl Safe_ports port 1025-65535  # unregistered ports
    acl Safe_ports port 280         # http-mgmt
    acl Safe_ports port 488         # gss-http
    acl Safe_ports port 591         # filemaker
    acl Safe_ports port 777         # multiling http
    http_access deny !Safe_ports
    http_access deny CONNECT !SSL_ports
    http_access allow localhost manager
    http_access deny manager
    http_access allow localnet
    http_access allow localhost
    http_access deny all
    http_port 3128
    coredump_dir /var/spool/squid
    refresh_pattern ^ftp:           1440    20%     10080
    refresh_pattern ^gopher:        1440    0%      1440
    refresh_pattern -i (/cgi-bin/|\?) 0     0%      0
    refresh_pattern .               0       20%     4320
    [root@centos user]# mv /etc/squid/squid.conf /etc/squid/squid.conf.bac
    [root@centos user]# vim /etc/squid/squid.conf
    [root@centos user]# cat /etc/squid/squid.conf
    acl localnet src IpAddrCentos
    acl localnet src IpAddr.0/32
    acl Safe_ports port 80
    acl Safe_ports port 443
    cache_dir ufs /var/spool/squid 1000 16 256
    http_access allow localnet
    http_port 3128   
    [root@centos user]# systemctl restart squid
    [root@centos user]# iptables -t filter -A INPUT -p tcp --dport 3128 -j ACCEPT
    [root@centos user]# service iptables save
    [root@centos user]# systemctl restart iptables.service
    [root@centos user]# curl -O -L "https://www.redhat.com/index.html" -x "IpAddrCentos:
    3128"
      % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                     Dload  Upload   Total   Spent    Left  Speed
      0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
    100  156k    0  156k    0     0   147k      0 --:--:--  0:00:01 --:--:--  795k
    user@ubuntu:~$ sudo nmap IpAddrCentos
    Starting Nmap 7.80 ( https://nmap.org ) at 2023-10-25 08:12 CDT
    Nmap scan report for IpAddrCentos
    Host is up (0.00086s latency).
    Not shown: 991 filtered ports
    PORT     STATE  SERVICE
    20/tcp   closed ftp-data
    21/tcp   open   ftp
    22/tcp   open   ssh
    25/tcp   closed smtp
    53/tcp   closed domain
    80/tcp   open   http
    143/tcp  closed imap
    443/tcp  closed https
    3128/tcp open   squid-http
    MAC Address: MacAddrCentos (QEMU virtual NIC)
    Nmap done: 1 IP address (1 host up) scanned in 5.16 seconds
    [root@centos user]# dnf install httpd-tools
    [root@centos user]# touch /etc/squid/passwd
    [root@centos user]# chown squid /etc/squid/passwd
    [root@centos user]# htpasswd /etc/squid/passwd proxyuser
    [root@centos user]# vim /etc/squid/squid.conf
    [root@centos user]# cat /etc/squid/squid.conf
    #acl localnet src IpAddrCentos
    #acl localnet src IpAddr.0/32
    #acl Safe_ports port 80
    #acl Safe_ports port 443
    #cache_dir ufs /var/spool/squid 1000 16 256
    #http_access allow localnet
    http_port 3128   
    auth_param basic program /usr/lib64/squid/basic_ncsa_auth /etc/squid/passwd
    auth_param basic children 5
    auth_param basic realm Squid Basic Authentication
    auth_param basic credentialsttl 2 hours
    acl auth_users proxy_auth REQUIRED
    http_access allow auth_users
    [root@centos user]# systemctl restart squid
    [root@centos user]# curl -O -L "https://www.redhat.com/index.html" -x "proxyuser:tpassword@IpAddrCentos:3128"
      % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                     Dload  Upload   Total   Spent    Left  Speed
      0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0
    100  156k    0  156k    0     0   124k      0 --:--:--  0:00:01 --:--:--  562k
    Task:
    Перенаправление пакетов, идущих на 80-й порт, на стандартный порт прокси-сервера.
    Decision:
    [root@centos user]# iptables -t nat -A PREROUTING -s IpAddr.0 -p tcp --dport 80 -j REDIRECT --to-port 3128
    [root@centos user]# service iptables save
    [root@centos user]# systemctl restart iptables.service
    Task:
    Предоставляем доступ из Интернет к веб-серверу, который расположен в локальной сети (проброс порта). Вместо IpAddrUbuntu укажите IP-адрес вашего веб-сервера.
    Decision:
    [root@centos user]# iptables -t nat -A PREROUTING -p tcp --dport 80 -j DNAT --to-destination IpAddrUbuntu:80
    [root@centos user]# service iptables save
    [root@centos user]# systemctl restart iptables.service
    Tas
    Включаем маскарадинг для доступа в Интернет пользователей локальной сети.
    Decision:
    [root@centos user]# iptables -t nat -A POSTROUTING -o LanCard -s IpAddr.0/32 -j MASQUERADE
    [root@centos user]# service iptables save
    [root@centos user]# systemctl restart iptables.service
    Task:
    сканирование сети
    Decision:
    [root@centos user]# nmap -sL IpAddrCentos/24
    Starting Nmap 7.92 ( https://nmap.org ) at 2023-10-29 11:25 +08
    Nmap scan report for IpAddr.0
    ...
    Nmap scan report for kali (IpAddrKali)
    ...
    Nmap scan report for centos (IpAddr)
    ...
    Nmap scan report for ubuntu (IpAddrUbuntu)
    ...
    Nmap scan report for IpAddr.255
    Nmap done: 256 IP addresses (0 hosts up) scanned in 28.06 seconds
    Decision:
    Утилита обнаружила активные устройства в сети. Среди них показались ip-адреса, в котором были развернуты мои виртуальные машины
    Task:
    Просканируем удаленный хост (агрессивный режим).
    Decision:
    user@ubuntu:~$ sudo nmap -A -T4 IpAddrCentos
    Starting Nmap 7.80 ( https://nmap.org ) at 2023-10-27 23:24 CDT
    Nmap scan report for IpAddrCentos
    Host is up (0.00084s latency).
    Not shown: 992 filtered ports
    PORT     STATE  SERVICE    VERSION
    20/tcp   closed ftp-data
    21/tcp   open   ftp        vsftpd 3.0.5
    22/tcp   open   ssh        OpenSSH 8.7 (protocol 2.0)
    25/tcp   closed smtp
    53/tcp   closed domain
    143/tcp  closed imap
    443/tcp  closed https
    3128/tcp open   http-proxy Squid http proxy 5.5
    |_http-server-header: squid/5.5
    |_http-title: ERROR: The requested URL could not be retrieved
    MAC Address: MacAddrCentos (QEMU virtual NIC)
    Aggressive OS guesses: Linux 2.6.32 - 3.13 (94%), Linux 2.6.22 - 2.6.36 (92%), Linux 3.10 (92%), Linux 3.10 - 4.11 (92%), Linux 2.6.39 (92%), Linux 2.6.32 (91%), Linux 3.2 - 4.9 (91%), Linux 2.6.32 - 3.10 (91%), Linux 2.6.18 (90%), Linux 3.16 - 4.6 (90%)
    No exact OS matches for host (test conditions non-ideal).
    Network Distance: 1 hop
    Service Info: OS: Unix
    TRACEROUTE
    HOP RTT     ADDRESS
    1   0.83 ms IpAddrCentos
    OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
    Nmap done: 1 IP address (1 host up) scanned in 24.18 seconds
    Task:
    узнать более подробную информацию о машине и запущенных на ней сервисах
    Decision:
    [root@centos user]# nmap -sV IpAddrUbuntu
    Starting Nmap 7.92 ( https://nmap.org ) at 2023-10-29 11:35 +08
    Nmap scan report for ubuntu (IpAddrUbuntu)
    Host is up (0.0010s latency).
    Not shown: 997 filtered tcp ports (no-response)
    PORT    STATE  SERVICE VERSION
    22/tcp  open   ssh     OpenSSH 8.9p1 Ubuntu 3ubuntu0.3 (Ubuntu Linux; protocol 2.0)
    80/tcp  open   http    Apache httpd 2.4.52 ((Ubuntu))
    443/tcp closed https
    MAC Address: MacAddrUbuntu (QEMU virtual NIC)
    Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel
    Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
    Nmap done: 1 IP address (1 host up) scanned in 12.27 seconds
    Task:
    В виртуальной машине запущен веб-сервер, поэтому мы можем рассмотреть эту службу подробнее.
    Decision:
    [root@centos user]# nmap -sC IpAddrUbuntu -p 80
    Starting Nmap 7.92 ( https://nmap.org ) at 2023-10-29 11:45 +08
    Nmap scan report for ubuntu (IpAddrUbuntu)
    Host is up (0.00078s latency).
    PORT   STATE SERVICE
    80/tcp open  http
    |_http-title: david138it
    MAC Address: MacAddrUbuntu (QEMU virtual NIC)
    Nmap done: 1 IP address (1 host up) scanned in 1.88 seconds
    Task:
    Найти все скрипты, которые позволяют проверить порты более детально, для нашего веб-сервера. Затем попытаемся использовать один из них, для этого достаточно указать его с помощью опции —script. Но сначала вы можете посмотреть информацию о скрипте. 
    Decision:
    [root@centos user]# find /usr/share/nmap/scripts/ -name '*.nse' | grep http
    /usr/share/nmap/scripts/http-brute.nse
    ...
    /usr/share/nmap/scripts/riak-http-info.nse
    [root@centos user]# nmap --script-help http-brute.nse
    Starting Nmap 7.92 ( https://nmap.org ) at 2023-10-29 11:50 +08
    http-brute
    Categories: intrusive brute
    https://nmap.org/nsedoc/scripts/http-brute.html
      Performs brute force password auditing against http basic, digest and ntlm authentication.
      This script uses the unpwdb and brute libraries to perform password
      guessing. Any successful guesses are stored in the nmap registry, using
      the creds library, for other scripts to use.
    [root@centos user]# nmap --script http-brute.nse IpAddrWindServ84 -p 80
    Starting Nmap 7.92 ( https://nmap.org ) at 2023-10-29 11:54 +08
    Note: Host seems down. If it is really up, but blocking our ping probes, try -Pn
    Nmap done: 1 IP address (0 hosts up) scanned in 3.61 seconds
    [root@centos user]# nmap --script http-brute.nse IpAddrWindServ84 -p 80 -Pn
    Starting Nmap 7.92 ( https://nmap.org ) at 2023-10-29 12:08 +08
    Nmap scan report for IpAddrWindServ84
    Host is up.
    PORT   STATE    SERVICE
    80/tcp filtered http
    Nmap done: 1 IP address (1 host up) scanned in 2.61 seconds
    Decision:
    В последней команде пытался узнать пароль веб-сервера. В некоторых случаях можно вытащить логин и пароль. Такое происходит, когда используются параметры входа по умолчанию.
    Task:
    Сканируем диапазон портов
    Decision:
    user@ubuntu:~$ sudo nmap -sT -p 21-80 IpAddrCentos
    Starting Nmap 7.80 ( https://nmap.org ) at 2023-10-27 23:41 CDT
    Nmap scan report for IpAddrCentos
    Host is up (0.0030s latency).
    Not shown: 56 filtered ports
    PORT   STATE  SERVICE
    21/tcp open   ftp
    22/tcp open   ssh
    25/tcp closed smtp
    53/tcp closed domain
    MAC Address: MacAddrCentos (QEMU virtual NIC)
    Nmap done: 1 IP address (1 host up) scanned in 1.85 seconds
    Task:
    Перехватываем весь трафик для MAC-адреса MacAddrUbuntu на сетевом интерфейсе LanCard.
    Decision:
    user@ubuntu:~$ sudo tcpdump -n -i LanCard "ether host MacAddrCentos"
    tcpdump: verbose output suppressed, use -v[v]... for full protocol decode
    listening on LanCard, link-type EN10MB (Ethernet), snapshot length 262144 bytes
    [root@centos user]# ssh user@IpAddrUbuntu
    user@IpAddrUbuntu's password: 
    user@ubuntu:~$ sudo tcpdump -n -i LanCard "ether host MacAddrCentos"
    ...
    00:11:09.121772 IP IpAddrCentos.58598 > IpAddrUbuntu.22: Flags [S], seq 3127527477, win 64240, options [mss 1460,sackOK,TS val 3107336019 ecr 0,nop,wscale 7], length 0
    00:11:09.121894 IP IpAddrUbuntu.22 > IpAddrCentos.58598: Flags [S.], seq 2200785231, ack 3127527478, win 65160, options [mss 1460,sackOK,TS val 2462886528 ecr 3107336019,nop,wscale 7], length 0
    00:11:09.122300 IP IpAddrCentos.58598 > IpAddrUbuntu.22: Flags [.], ack 1, win 502, options [nop,nop,TS val 3107336020 ecr 2462886528], length 0
    00:11:09.123009 IP IpAddrCentos.58598 > IpAddrUbuntu.22: Flags [P.], seq 1:22, ack 1, win 502, options [nop,nop,TS val 3107336020 ecr 2462886528], length 21: SSH: SSH-2.0-OpenSSH_8.7
    00:11:09.123086 IP IpAddrUbuntu.22 > IpAddrCentos.58598: Flags [.], ack 22, win 509, options [nop,nop,TS val 2462886529 ecr 3107336020], length 0
    00:11:09.148795 IP IpAddrUbuntu.22 > IpAddrCentos.58598: Flags [P.], seq 1:42, ack 22, win 509, options [nop,nop,TS val 2462886555 ecr 3107336020], length 41: SSH: SSH-2.0-OpenSSH_8.9p1 Ubuntu-3ubuntu0.3
    00:11:09.149526 IP IpAddrCentos.58598 > IpAddrUbuntu.22: Flags [.], ack 42, win 502, options [nop,nop,TS val 3107336047 ecr 2462886555], length 0
    00:11:09.150579 IP IpAddrCentos.58598 > IpAddrUbuntu.22: Flags [P.], seq 22:1382, ack 42, win 502, options [nop,nop,TS val 3107336048 ecr 2462886555], length 1360
    00:11:09.151887 IP IpAddrUbuntu.22 > IpAddrCentos.58598: Flags [P.], seq 42:1122, ack 1382, win 501, options [nop,nop,TS val 2462886558 ecr 3107336048], length 1080
    00:11:09.157642 IP IpAddrCentos.58598 > IpAddrUbuntu.22: Flags [P.], seq 1382:1430, ack 1122, win 501, options [nop,nop,TS val 3107336055 ecr 2462886558], length 48
    00:11:09.171709 IP IpAddrUbuntu.22 > IpAddrCentos.58598: Flags [P.], seq 1122:1654, ack 1430, win 501, options [nop,nop,TS val 2462886578 ecr 3107336055], length 532
    00:11:09.185522 IP IpAddrCentos.58598 > IpAddrUbuntu.22: Flags [P.], seq 1430:1446, ack 1654, win 501, options [nop,nop,TS val 3107336083 ecr 2462886578], length 16
    00:11:09.228923 IP IpAddrUbuntu.22 > IpAddrCentos.58598: Flags [.], ack 1446, win 501, options [nop,nop,TS val 2462886635 ecr 3107336083], length 0
    00:11:09.229685 IP IpAddrCentos.58598 > IpAddrUbuntu.22: Flags [P.], seq 1446:1498, ack 1654, win 501, options [nop,nop,TS val 3107336127 ecr 2462886635], length 52
    00:11:09.229782 IP IpAddrUbuntu.22 > IpAddrCentos.58598: Flags [.], ack 1498, win 501, options [nop,nop,TS val 2462886636 ecr 3107336127], length 0
    00:11:09.229995 IP IpAddrUbuntu.22 > IpAddrCentos.58598: Flags [P.], seq 1654:1706, ack 1498, win 501, options [nop,nop,TS val 2462886636 ecr 3107336127], length 52
    00:11:09.230579 IP IpAddrCentos.58598 > IpAddrUbuntu.22: Flags [P.], seq 1498:1566, ack 1706, win 501, options [nop,nop,TS val 3107336128 ecr 2462886636], length 68
    00:11:09.238565 IP IpAddrUbuntu.22 > IpAddrCentos.58598: Flags [P.], seq 1706:1758, ack 1566, win 501, options [nop,nop,TS val 2462886644 ecr 3107336128], length 52
    00:11:09.280247 IP IpAddrCentos.58598 > IpAddrUbuntu.22: Flags [.], ack 1758, win 501, options [nop,nop,TS val 3107336177 ecr 2462886644], length 0
    00:11:12.034402 IP IpAddrCentos.58598 > IpAddrUbuntu.22: Flags [P.], seq 1566:1714, ack 1758, win 501, options [nop,nop,TS val 3107338932 ecr 2462886644], length 148
    00:11:12.076713 IP IpAddrUbuntu.22 > IpAddrCentos.58598: Flags [.], ack 1714, win 501, options [nop,nop,TS val 2462889483 ecr 3107338932], length 0
    00:11:12.274441 IP IpAddrUbuntu.22 > IpAddrCentos.58598: Flags [P.], seq 1758:1794, ack 1714, win 501, options [nop,nop,TS val 2462889680 ecr 3107338932], length 36
    00:11:12.275003 IP IpAddrCentos.58598 > IpAddrUbuntu.22: Flags [.], ack 1794, win 501, options [nop,nop,TS val 3107339172 ecr 2462889680], length 0
    00:11:12.275445 IP IpAddrCentos.58598 > IpAddrUbuntu.22: Flags [P.], seq 1714:1834, ack 1794, win 501, options [nop,nop,TS val 3107339173 ecr 2462889680], length 120
    00:11:12.275497 IP IpAddrUbuntu.22 > IpAddrCentos.58598: Flags [.], ack 1834, win 501, options [nop,nop,TS val 2462889681 ecr 3107339173], length 0
    00:11:12.447785 IP IpAddrUbuntu.22 > IpAddrCentos.58598: Flags [P.], seq 1794:2422, ack 1834, win 501, options [nop,nop,TS val 2462889854 ecr 3107339173], length 628
    00:11:12.489012 IP IpAddrCentos.58598 > IpAddrUbuntu.22: Flags [.], ack 2422, win 501, options [nop,nop,TS val 3107339386 ecr 2462889854], length 0
    00:11:12.489092 IP IpAddrUbuntu.22 > IpAddrCentos.58598: Flags [P.], seq 2422:2474, ack 1834, win 501, options [nop,nop,TS val 2462889895 ecr 3107339386], length 52
    00:11:12.489453 IP IpAddrCentos.58598 > IpAddrUbuntu.22: Flags [.], ack 2474, win 501, options [nop,nop,TS val 3107339387 ecr 2462889895], length 0
    00:11:12.489928 IP IpAddrCentos.58598 > IpAddrUbuntu.22: Flags [P.], seq 1834:2242, ack 2474, win 501, options [nop,nop,TS val 3107339387 ecr 2462889895], length 408
    00:11:12.490014 IP IpAddrUbuntu.22 > IpAddrCentos.58598: Flags [.], ack 2242, win 501, options [nop,nop,TS val 2462889896 ecr 3107339387], length 0
    00:11:12.493478 IP IpAddrUbuntu.22 > IpAddrCentos.58598: Flags [P.], seq 2474:2582, ack 2242, win 501, options [nop,nop,TS val 2462889899 ecr 3107339387], length 108
    00:11:12.494668 IP IpAddrUbuntu.22 > IpAddrCentos.58598: Flags [P.], seq 2582:2906, ack 2242, win 501, options [nop,nop,TS val 2462889901 ecr 3107339387], length 324
    00:11:12.494876 IP IpAddrUbuntu.22 > IpAddrCentos.58598: Flags [P.], seq 2906:2942, ack 2242, win 501, options [nop,nop,TS val 2462889901 ecr 3107339387], length 36
    00:11:12.494942 IP IpAddrUbuntu.22 > IpAddrCentos.58598: Flags [P.], seq 2942:2978, ack 2242, win 501, options [nop,nop,TS val 2462889901 ecr 3107339387], length 36
    00:11:12.494972 IP IpAddrUbuntu.22 > IpAddrCentos.58598: Flags [P.], seq 2978:3062, ack 2242, win 501, options [nop,nop,TS val 2462889901 ecr 3107339387], length 84
    00:11:12.495040 IP IpAddrUbuntu.22 > IpAddrCentos.58598: Flags [P.], seq 3062:3098, ack 2242, win 501, options [nop,nop,TS val 2462889901 ecr 3107339387], length 36
    00:11:12.495108 IP IpAddrUbuntu.22 > IpAddrCentos.58598: Flags [P.], seq 3098:3198, ack 2242, win 501, options [nop,nop,TS val 2462889901 ecr 3107339387], length 100
    00:11:12.495173 IP IpAddrUbuntu.22 > IpAddrCentos.58598: Flags [P.], seq 3198:3234, ack 2242, win 501, options [nop,nop,TS val 2462889901 ecr 3107339387], length 36
    00:11:12.495242 IP IpAddrUbuntu.22 > IpAddrCentos.58598: Flags [P.], seq 3234:3270, ack 2242, win 501, options [nop,nop,TS val 2462889901 ecr 3107339387], length 36
    00:11:12.495311 IP IpAddrUbuntu.22 > IpAddrCentos.58598: Flags [P.], seq 3270:3370, ack 2242, win 501, options [nop,nop,TS val 2462889901 ecr 3107339387], length 100
    00:11:12.495324 IP IpAddrCentos.58598 > IpAddrUbuntu.22: Flags [.], ack 3198, win 501, options [nop,nop,TS val 3107339393 ecr 2462889899], length 0
    00:11:12.495436 IP IpAddrUbuntu.22 > IpAddrCentos.58598: Flags [P.], seq 3370:3406, ack 2242, win 501, options [nop,nop,TS val 2462889901 ecr 3107339393], length 36
    00:11:12.495512 IP IpAddrCentos.58598 > IpAddrUbuntu.22: Flags [.], ack 3370, win 501, options [nop,nop,TS val 3107339393 ecr 2462889901], length 0
    00:11:12.495525 IP IpAddrUbuntu.22 > IpAddrCentos.58598: Flags [P.], seq 3406:3522, ack 2242, win 501, options [nop,nop,TS val 2462889901 ecr 3107339393], length 116
    00:11:12.495620 IP IpAddrUbuntu.22 > IpAddrCentos.58598: Flags [P.], seq 3522:3558, ack 2242, win 501, options [nop,nop,TS val 2462889902 ecr 3107339393], length 36
    00:11:12.495693 IP IpAddrUbuntu.22 > IpAddrCentos.58598: Flags [P.], seq 3558:3594, ack 2242, win 501, options [nop,nop,TS val 2462889902 ecr 3107339393], length 36
    00:11:12.495753 IP IpAddrCentos.58598 > IpAddrUbuntu.22: Flags [.], ack 3522, win 501, options [nop,nop,TS val 3107339393 ecr 2462889901], length 0
    00:11:12.495765 IP IpAddrUbuntu.22 > IpAddrCentos.58598: Flags [P.], seq 3594:3694, ack 2242, win 501, options [nop,nop,TS val 2462889902 ecr 3107339393], length 100
    00:11:12.495844 IP IpAddrUbuntu.22 > IpAddrCentos.58598: Flags [P.], seq 3694:3730, ack 2242, win 501, options [nop,nop,TS val 2462889902 ecr 3107339393], length 36
    00:11:12.495907 IP IpAddrCentos.58598 > IpAddrUbuntu.22: Flags [.], ack 3694, win 501, options [nop,nop,TS val 3107339393 ecr 2462889902], length 0
    00:11:12.536934 IP IpAddrCentos.58598 > IpAddrUbuntu.22: Flags [.], ack 3730, win 501, options [nop,nop,TS val 3107339434 ecr 2462889902], length 0
    00:11:12.586762 IP IpAddrUbuntu.22 > IpAddrCentos.58598: Flags [P.], seq 3730:3782, ack 2242, win 501, options [nop,nop,TS val 2462889993 ecr 3107339434], length 52
    00:11:12.586838 IP IpAddrUbuntu.22 > IpAddrCentos.58598: Flags [P.], seq 3782:3898, ack 2242, win 501, options [nop,nop,TS val 2462889993 ecr 3107339434], length 116
    00:11:12.588205 IP IpAddrCentos.58598 > IpAddrUbuntu.22: Flags [.], ack 3782, win 501, options [nop,nop,TS val 3107339485 ecr 2462889993], length 0
    00:11:12.588207 IP IpAddrCentos.58598 > IpAddrUbuntu.22: Flags [.], ack 3898, win 501, options [nop,nop,TS val 3107339486 ecr 2462889993], length 0
    Task:
    Перехватываем только ICMP-пакеты
    Decision:
    user@ubuntu:~$ sudo tcpdump -i LanCard -n -nn -ttt 'ip proto \icmp'
    tcpdump: verbose output suppressed, use -v[v]... for full protocol decode
    listening on LanCard, link-type EN10MB (Ethernet), snapshot length 262144 bytes
    [root@centos user]# ping IpAddrUbuntu
    PING IpAddrUbuntu (IpAddrUbuntu) 56(84) bytes of data.
    64 bytes from IpAddrUbuntu: icmp_seq=1 ttl=64 time=0.692 ms
    64 bytes from IpAddrUbuntu: icmp_seq=2 ttl=64 time=0.764 ms
    64 bytes from IpAddrUbuntu: icmp_seq=3 ttl=64 time=0.868 ms
    64 bytes from IpAddrUbuntu: icmp_seq=4 ttl=64 time=1.01 ms
    64 bytes from IpAddrUbuntu: icmp_seq=5 ttl=64 time=1.13 ms
    ^C
    --- IpAddrUbuntu ping statistics ---
    5 packets transmitted, 5 received, 0% packet loss, time 4006ms
    rtt min/avg/max/mdev = 0.692/0.892/1.130/0.159 ms
    user@ubuntu:~$ sudo tcpdump -i LanCard -n -nn -ttt 'ip proto \icmp'
    ...
     00:00:00.000000 IP IpAddrCentos > IpAddrUbuntu: ICMP echo request, id 4, seq 1, length 64
     00:00:00.000171 IP IpAddrUbuntu > IpAddrCentos: ICMP echo reply, id 4, seq 1, length 64
     00:00:01.001145 IP IpAddrCentos > IpAddrUbuntu: ICMP echo request, id 4, seq 2, length 64
     00:00:00.000077 IP IpAddrUbuntu > IpAddrCentos: ICMP echo reply, id 4, seq 2, length 64
     00:00:01.001365 IP IpAddrCentos > IpAddrUbuntu: ICMP echo request, id 4, seq 3, length 64
     00:00:00.000077 IP IpAddrUbuntu > IpAddrCentos: ICMP echo reply, id 4, seq 3, length 64
     00:00:01.001375 IP IpAddrCentos > IpAddrUbuntu: ICMP echo request, id 4, seq 4, length 64
     00:00:00.000077 IP IpAddrUbuntu > IpAddrCentos: ICMP echo reply, id 4, seq 4, length 64
     00:00:01.001573 IP IpAddrCentos > IpAddrUbuntu: ICMP echo request, id 4, seq 5, length 64
     00:00:00.000125 IP IpAddrUbuntu > IpAddrCentos: ICMP echo reply, id 4, seq 5, length 64
    Task:
    Перехватываем DNS-трафик между сервером и каким-нибудь узлом в сети.
    Decision:
    $ sudo virsh start Windows12
    [root@centos user]# nmap IpAddrWindServ
    Starting Nmap 7.92 ( https://nmap.org ) at 2023-10-28 13:24 +08
    Nmap scan report for RT-GM2-9 (IpAddrWindServ)
    Host is up (0.0017s latency).
    Not shown: 901 filtered tcp ports (no-response), 96 closed tcp ports (reset)
    PORT    STATE SERVICE
    53/tcp  open  domain
    80/tcp  open  http
    443/tcp open  https
    Nmap done: 1 IP address (1 host up) scanned in 3.64 seconds
    [root@centos user]# tcpdump -i LanCard -n -nn -ttt 'host IpAddrWindServ and port 53'
    Task:
    Перехватываем входящий трафик на порт 80. сохраняем статистику в файл my.log для первых 500 пакетов. Будет создан бинарный файл my.log, который можно отпарсить с помощью команды
    Decision:
    [root@centos user]# firefox IpAddrUbuntu
    [root@centos user]# tcpdump -v -i LanCard dst port 80
    dropped privs to tcpdump
    tcpdump: listening on LanCard, link-type EN10MB (Ethernet), snapshot length 262144 bytes
    14:07:24.835633 IP (tos 0x0, ttl 64, id 15549, offset 0, flags [DF], proto TCP (6), length 60)
        centos.45022 > ubuntu.http: Flags [S], cksum 0x76d1 (incorrect -> 0x9a90), seq 1076682845, win 64240, options [mss 1460,sackOK,TS val 3110711737 ecr 0,nop,wscale 7], length 0
    14:07:24.836511 IP (tos 0x0, ttl 64, id 15550, offset 0, flags [DF], proto TCP (6), length 52)
        centos.45022 > ubuntu.http: Flags [.], cksum 0x76c9 (incorrect -> 0x51b3), ack 2952605173, win 502, options [nop,nop,TS val 3110711738 ecr 3247231251], length 0
    14:07:24.836838 IP (tos 0x0, ttl 64, id 15551, offset 0, flags [DF], proto TCP (6), length 412)
        centos.45022 > ubuntu.http: Flags [P.], cksum 0x7831 (incorrect -> 0xb0a2), seq 0:360, ack 1, win 502, options [nop,nop,TS val 3110711739 ecr 3247231251], length 360: HTTP, length: 360
            GET / HTTP/1.1
            Host: IpAddrUbuntu
            User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:109.0) Gecko/20100101 Firefox/115.0
            Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8
            Accept-Language: ru-RU,ru;q=0.8,en-US;q=0.5,en;q=0.3
            Accept-Encoding: gzip, deflate
            Connection: keep-alive
            Upgrade-Insecure-Requests: 1
    14:07:24.844920 IP (tos 0x0, ttl 64, id 15552, offset 0, flags [DF], proto TCP (6), length 52)
        centos.45022 > ubuntu.http: Flags [.], cksum 0x76c9 (incorrect -> 0x4285), ack 3522, win 489, options [nop,nop,TS val 3110711747 ecr 3247231260], length 0
    14:07:29.846014 IP (tos 0x0, ttl 64, id 15553, offset 0, flags [DF], proto TCP (6), length 52)
        centos.45022 > ubuntu.http: Flags [F.], cksum 0x76c9 (incorrect -> 0x2eef), seq 360, ack 3522, win 501, options [nop,nop,TS val 3110716748 ecr 3247231260], length 0
    14:07:29.846795 IP (tos 0x0, ttl 64, id 15554, offset 0, flags [DF], proto TCP (6), length 52)
        centos.45022 > ubuntu.http: Flags [.], cksum 0x76c9 (incorrect -> 0x1b63), ack 3523, win 501, options [nop,nop,TS val 3110716749 ecr 3247236262], length 0
    [root@centos user]# tcpdump -v -n -w my.log dst port 80 -c 500
    dropped privs to tcpdump
    tcpdump: listening on LanCard, link-type EN10MB (Ethernet), snapshot length 262144 bytes
    [root@centos user]# ls my.log
    my.log
    [root@centos user]# tcpdump -nr my.log | awk '{print $3}' | grep -oE '[0-9]{1,}\.[0-9]{1,}\.[0-9]{1,}\.[0-9]{1,}' | sort | uniq -c | sort -rn
    reading from file my.log, link-type EN10MB (Ethernet), snapshot length 262144
    dropped privs to tcpdump
          6 IpAddrCentos
    Decision:
    Чем больше подключений для одного IP-адреса, тем больше вероятность, что это какая-то нехорошая деятельность.
    Task:
    IP-адреса, которые вызывают подозрение, можно заблокировать в iptables с помощью команды, указанной ниже.
    Decision:
    [root@centos user]# iptables -A INPUT -s IpAddrUbuntu -j DROP
    [root@centos user]# service iptables save
    [root@centos user]# systemctl restart iptables.service
    Task:
    Системы обнаружения вторжения (Intrusion Detection System, IDS). Установка и настройка tripwire.
    Decision:
    [root@centos user]# dnf -y install epel-releasey
    [root@centos user]# dnf -y install tripwire
    [root@centos user]# tripwire-setup-keyfiles
    [root@centos user]# tripwire --init
    ...
    ### Warning: File system error.
    ### Filename: /proc/pci
    ### Нет такого файла или каталога
    ### Continuing...
    ...
    [root@centos user]# cat /etc/tripwire/twpol.txt
    ...
         /proc/pci                         -> $(Device) ;
    ...
    [root@centos user]# vim /etc/tripwire/twpol.txt
    [root@centos user]# cat /etc/tripwire/twpol.txt
    ...
         #/proc/pci                         -> $(Device) ;
    ...
    [root@centos user]# tripwire --update-policy --secure-mode low /etc/tripwire/twpol.txt
    [root@centos user]# tripwire --check —interactive
    Task:
    Создаем конфигурацию, Создаем базу данных, Проверим на работоспособность
    Decision:
    [root@centos user]# ls /etc/tripwire/
    centos-local.key  site.key  tw.cfg  twcfg.txt  tw.pol  tw.pol.bak  twpol.txt
    [root@centos user]# twadmin -m F -c /etc/tripwire/tw.cfg -S /etc/tripwire/site.key /etc/tripwire/twcfg.txt
    [root@centos user]# vim /etc/tripwire/twpolmake.pl
    [root@centos user]# cat /etc/tripwire/twpolmake.pl
    #!/usr/bin/perl
    # Tripwire Policy File customize tool
    # ----------------------------------------------------------------
    # Copyright (C) 2003 Hiroaki Izumi
    # This program is free software; you can redistribute it and/or
    # modify it under the terms of the GNU General Public License
    # as published by the Free Software Foundation; either version 2
    # of the License, or (at your option) any later version.
    # This program is distributed in the hope that it will be useful,
    # but WITHOUT ANY WARRANTY; without even the implied warranty of
    # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    # GNU General Public License for more details.
    # You should have received a copy of the GNU General Public License
    # along with this program; if not, write to the Free Software
    # Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
    # ----------------------------------------------------------------
    # Usage:
    #     perl twpolmake.pl {Pol file}
    # ----------------------------------------------------------------
    #
    $POLFILE=$ARGV[0];
    open(POL,"$POLFILE") or die "open error: $POLFILE" ;
    my($myhost,$thost) ;
    my($sharp,$tpath,$cond) ;
    my($INRULE) = 0 ;
    while (<POL>) {
        chomp;
        if (($thost) = /^HOSTNAME\s*=\s*(.*)\s*;/) {
            $myhost = `hostname` ; chomp($myhost) ;
            if ($thost ne $myhost) {
                $_="HOSTNAME=\"$myhost\";" ;
            }
        }
        elsif ( /^{/ ) {
            $INRULE=1 ;
        }
        elsif ( /^}/ ) {
            $INRULE=0 ;
        }
        elsif ($INRULE == 1 and ($sharp,$tpath,$cond) = /^(\s*\#?\s*)(\/\S+)\b(\s+->\s+.+)$/) {
            $ret = ($sharp =~ s/\#//g) ;
            if ($tpath eq '/sbin/e2fsadm' ) {
                $cond =~ s/;\s+(tune2fs.*)$/; \#$1/ ;
            }
            if (! -s $tpath) {
                $_ = "$sharp#$tpath$cond" if ($ret == 0) ;
            }
            else {
                $_ = "$sharp$tpath$cond" ;
            }
        }
        print "$_\n" ;
    }
    close(POL) ;
    [root@centos user]# perl /etc/tripwire/twpolmake.pl /etc/tripwire/twpol.txt > /etc/tripwire/twpol.txt.new 
    [root@centos user]# twadmin -m P -c /etc/tripwire/tw.cfg -p /etc/tripwire/tw.pol -S /etc/tripwire/site.key /etc/tripwire/twpol.txt.new
    [root@centos user]# tripwire -m i -s -c /etc/tripwire/tw.cfg
    [root@centos user]# tripwire -m c -s -c /etc/tripwire/tw.cfg
    Open Source Tripwire(R) 2.4.3.7 Integrity Check Report
    Report generated by:          root
    Report created on:            Вс 29 окт 2023 14:26:04
    Database last updated on:     Never
    ...
    ===============================================================================
    Object Summary: 
    ===============================================================================
    -------------------------------------------------------------------------------
    # Section: Unix File System
    -------------------------------------------------------------------------------
    No violations.
    ===============================================================================
    Error Report: 
    ===============================================================================
    ...
    [root@centos user]# ll /var/lib/tripwire/report
    итого 28
    -rw-r--r--. 1 root root  350 окт 29 13:55 centos-20231029-135511.twr
    -rw-r--r--. 1 root root  350 окт 29 13:57 centos-20231029-135712.twr
    -rw-r--r--. 1 root root  350 окт 29 14:00 centos-20231029-140029.twr
    -rw-r--r--. 1 root root  350 окт 29 14:08 centos-20231029-140853.twr
    -rw-r--r--. 1 root root  350 окт 29 14:09 centos-20231029-140919.twr
    -rw-r--r--. 1 root root 6446 окт 29 14:27 centos-20231029-142604.twr
    [root@centos user]# touch /var/lib/tripwire/tfile3.txt
    [root@centos user]# tripwire -m c -s -c /etc/tripwire/tw.cfg
    Open Source Tripwire(R) 2.4.3.7 Integrity Check Report
    ...
    -------------------------------------------------------------------------------
    Rule Name: Tripwire Data Files (/var/lib/tripwire)
    Severity Level: 100
    -------------------------------------------------------------------------------
    Added:
    "/var/lib/tripwire/tfile3.txt"
    ===============================================================================
    Error Report: 
    ===============================================================================
    ...
    Decision:
    Мы создали файл /var/lib/tripwire/tfile3.txt и утилита tripwire показала нам, что мы создали один файл.
    Task:
    Поиск руткитов. Установка RkHunter, обновление БД вирусов, Создадим образ нашей ОС, для того, чтобы RootKit Hunter мог сравнивать текущее состояние команд в системе с созданной базой, сканируем систему
    Decision:
    [root@centos user]# dnf install rkhunter -y
    [root@centos user]# rkhunter --update
    [root@centos user]# cat /etc/rkhunter.conf
    [root@centos user]# rkhunter --propupd
    [root@centos user]# rkhunter --check
    [root@centos user]# cat /var/log/rkhunter/rkhunter.log
    Task:
    добавить выполнение сканирования krootkit в планировщик под пользователем
    Decision:
    [user@centos ~]$ crontab -e
    [user@centos ~]$ crontab -l
    0 14 * * *    /usr/bin/rkhunter --update; /usr/bin/rkhunter -c --createlogfile --cronjob
    Task:
    Сбор информации до и после взлома
    сравнить образ раздела или файла перед взломом с образом из взломанной системы.
    Decision:
    [root@centos user]# dd if=/bin/ls of=ls.dd | md5sum ls.dd > sum.txt
    274+1 записей получено
    274+1 записей отправлено
    140760 байт (141 kB, 137 KiB) скопирован, 0,00362538 s, 38,8 MB/s
    [root@centos user]# cat sum.txt
    0ad8006df0caff12335f45fdf6c7c0f7  ls.dd
    [root@centos user]# file /bin/ls
    /bin/ls: ELF 64-bit LSB pie executable, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, BuildID[sha1]=bdfe7bf382f12e8361d590aa148cb3e591f83d30, for GNU/Linux 3.2.0, stripped
    [root@centos user]# stat /bin/ls
      Файл: /bin/ls
      Размер: 140760        Блоков: 280        Блок В/В: 4096   обычный файл
    Устройство: fd00h/64768d        Инода: 33894006    Ссылки: 1
    Доступ: (0755/-rwxr-xr-x)  Uid: (    0/    root)   Gid: (    0/    root)
    Контекст: system_u:object_r:bin_t:s0
    Доступ:        2023-10-29 10:10:37.199000000 +0800
    Модифицирован: 2023-01-06 19:42:38.000000000 +0800
    Изменён:       2023-09-28 12:38:12.337575533 +0800
    Создан:        2023-09-28 12:38:12.333575533 +0800
    Task:
    создать список контрольных сумм для популярных файлов, которые обычно могут изменяться при взломе системы
    Decision:
    [root@centos user]# md5sum /bin/ls >> sums.txt
    [root@centos user]# cat sums.txt
    07c62424e4c26afc0d7e393bab60546c  /bin/ls
    Source:
    https://serverspace.ru/support/help/utilita-rsync-dlya-sinkhronizatsii-fajlov/
    https://elatov.github.io/2013/06/migrate-from-libvirt-kvm-to-virtualbox/
    https://www.opennet.ru/tips/1870_qemu_virtualbox_disk.shtml
    https://blog.sedicomm.com/2016/12/16/iptables-ustanovka-i-nastrojka/?ysclid=ln3wplng53988958006#1
    https://www.youtube.com/playlist?list=PLtSGboPf3g50Aejrp6KjQsqqjxvAO4aKw
    https://unixcop.com/how-to-install-and-configure-an-ftp-server-on-centos-9-stream/
    https://losst.pro/kak-otkryt-port-iptables?ysclid=lnvrpgxwj8175390861
    https://techviewleo.com/configure-vsftpd-ftp-server-on-ubuntu-linux/
    https://tokmakov.msk.ru/blog/item/477
    https://stackoverflow.com/questions/38523250/vsftpd-login-is-not-successful
    https://linux-notes.org/fil-tratsiya-mac-ispol-zuya-iptables-v-linux/?ysclid=lo0z3u2sro842609893
    https://ru.linux-console.net/?p=1297&ysclid=lo0tx5owhk496498608
    https://devcoops.com/install-nginx-on-centos-9-stream/
    https://itsecforu.ru/2022/01/14/%F0%9F%90%89-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-http-%D1%81%D0%B5%D1%80%D0%B2%D0%B5%D1%80%D0%B0-kali-linux/?ysclid=lo4exvw84m943299837
    https://hackware.ru/?p=15739
    https://support.mozilla.org/ru/kb/parametry-soedineniya-v-firefox
    https://techviewleo.com/configure-squid-proxy-on-centos-almalinux-rhel/
    https://uzverss.livejournal.com/109496.html?ysclid=lo9hqkxw2s612202120
    https://habr.com/ru/companies/alexhost/articles/531170/
    https://linux-notes.org/ustanovka-i-nastrojka-tripwire-v-centos-redhat-fedora/?ysclid=loazeq8vjc96566460
    https://linux-notes.org/poisk-rutkitov-v-debian-ubuntu-linux-mint-i-red-hat-centos-fedora/?ysclid=lob3rn9gk6547904603
    https://winitpro.ru/index.php/2020/04/21/planirovshhik-zadach-cron-v-linux/
    https://drive.google.com/drive/folders/1SUpqELdGy0O2zEDbmfnx35zViexy5xZL
    https://losst.ru/kak-polzovatsya-nmap-dlya-skanirovaniya-seti
    https://www.server-world.info/en/note?os=CentOS_7&p=tripwire
    https://www.lisenet.com/2017/configure-tripwire-on-centos-7/
    https://habr.com/sandbox/29825/
    https://kamaok.org.ua/?p=813
    https://habr.com/company/first/blog/243487/
    https://habr.com/sandbox/29825/

Организация локальной сети
    Task:
	Для защиты лабораторных работ по дисциплине Локально-вычислительные сети в виртуальной машине Ubuntu настроил программу для проектирования сетей Packet Tracer, спроектрировал лабораторные работы по темам "Использование DHCP-протокола через маршрутизатор и через сервер", "Wi-Fi - беспроводная передача данных", а также по теме "Локальная сеть" развернул виртуальные машины в Virtualbox две операционные системы Windows 10 и Windows Server 2012 для настройки локальной сети. В Windows Server установил DHCP и DNS сервера и добавил в домен клиентского компьютера Windows 10.
    Task:
    Packet Tracer Install Ubuntu
    Decision:
    $ sudo virsh start ubuntu22.04
    $ ssh -X user@IpAddrUbuntu
    $ google-chrome https://www.google.ru/search?q=cisco+account+create&newwindow=1&source=hp&ei=Z8eqYdOSEcTIrgSIwIeQDQ&iflsig=ALs-wAMAAAAAYarVd9Qob1A5NSTfBETDiQsuP3G5I7gv&ved=0ahUKEwiT4p6Jgsn0AhVEpIsKHQjgAdIQ4dUDCAY&uact=5&oq=cisco+account+create&gs_lcp=Cgdnd3Mtd2l6EAMyBQgAEIAEMgUIABCABDIGCAAQFhAeMgYIABAWEB4yBggAEBYQHjIGCAAQFhAeMgYIABAWEB4yBggAEBYQHjIGCAAQFhAeMgYIABAWEB5QAFgAYPgEaABwAHgAgAGBAYgBgQGSAQMwLjGYAQCgAQKgAQE&sclient=gws-wiz &
    $ google-chrome https://id.cisco.com/signin/register &
    $ google-chrome https://temp-mail.org/ &
    xanaveb196@simdpi.com - https://id.cisco.com/signin/register - mail: xanaveb196@simdpi.com - https://temp-mail.org/ - 
    Активировать Аккаунт - https://id.cisco.com/signin/register - xanaveb196@simdpi.com
    $ google-chrome https://www.google.ru/search?q=netacad+introduction+to+packet+tracer&newwindow=1&ei=Ks-qYZugA5a_rgTF_beoDw&oq=netacad+into+to+pa&gs_lcp=Cgdnd3Mtd2l6EAMYAjIGCAAQFhAeMgYIABAWEB4yBggAEBYQHjoHCAAQRxCwAzoNCC4QxwEQ0QMQsAMQQzoHCAAQsAMQQzoFCAAQgAQ6BQghEKABOgUIABDNAkoFCDwSATJKBAhBGABKBAhGGABQ96cZWMXDGWC44RloAnACeACAAZwBiAHGCpIBBDAuMTCYAQCgAQHIAQrAAQE&sclient=gws-wiz &
    $ google-chrome https://www.netacad.com/portal/resources/packet-tracer &
    $ wget https://www.netacad.com/portal/resources/file/71b29477-0abb-4a52-97eb-cc23d5771574
    $ ls
    CiscoPacketTracer_821_Ubuntu_64bit.deb
    $ sudo dpkg -i CiscoPacketTracer_821_Ubuntu_64bit.deb
    ...
    dpkg: error processing package packettracer (--install):
     dependency problems - leaving unconfigured
    ...
    Errors were encountered while processing:
     packettracer
    $ sudo apt install -f
    $ sudo dpkg -i CiscoPacketTracer_821_Ubuntu_64bit.deb
    $ packettracer &
    Task:
    The simplest network
    Для организации простейшей сети потребуется Два компьютера и Патч-корд. В случае отсутствия патч-корда
    необходимы: Кусок витой пары, Два коннектора RJ45.
    Decision:
    end devices - PC0 - PC1 - connections - copper cross-cover - PC0 - Desktop - ip configuration - ipv4 - 192.168.1.1 - subnet mask - 255.255.255.0 - PC1 - Desktop - ip configuration - ipv4 - 192.168.1.2 - subnet mask - 255.255.255.0 - PC0 - Desktop - Command Prompt
    C:\>ping 192.168.1.2
        Pinging 192.168.1.2 with 32 bytes of data:
        Reply from 192.168.1.2: bytes=32 time<1ms TTL=128
        Reply from 192.168.1.2: bytes=32 time<1ms TTL=128
        Reply from 192.168.1.2: bytes=32 time<1ms TTL=128
        Reply from 192.168.1.2: bytes=32 time<1ms TTL=128
        Ping statistics for 192.168.1.2:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 0ms, Average = 0ms
    Task:
    Используем DHCP-протокол через маршрутизатор: We have one switch and router and several computers, Create a DHCP pool (some kind of ip address space), Exclude certain ip addresses, Настроить компьютеры (Убедимся, что ip адреса автоматически добавляются), Проверить связь, See which computers and which ip addresses were issued, Настроим порты, задать VLAN 2,3 на порты fa0/1,2,3,4, The vlan needs to be pushed to the router, Configure the router's sub-interface for 2,3,4 vlans, Configure the DHCP Server. The Dhcp server is located in a separate segment and a broadcast request from computers 3,4,5,6 in the search for a Dhcp server, the router will not pass. Since the computers are in different segments. It is necessary to forward computer requests to the Dhcp server
    Decision:
    Switch -2960 - PC0 - PC1 - PC2 - Router0 - 1841 - Copper Straight-Through - Router0 - CLI
    Router>en
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#int fa0/0
    Router(config-if)#no sh
    Router(config-if)#no shutdown
    Router(config-if)#
        %LINK-5-CHANGED: Interface FastEthernet0/0, changed state to up
        %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/0, changed state to up
    Router(config-if)#ip add
    Router(config-if)#ip address 192.168.1.1 255.255.255.0
    Router(config-if)#exit
    Router(config)#ip dhcp pool DHCP
    Router(dhcp-config)#network 192.168.1.0 255.255.255.0
    Router(dhcp-config)#defa
    Router(dhcp-config)#default-router 192.168.1.1
    Router(dhcp-config)#dns-server 8.8.8.8
    Router(dhcp-config)#exit
    Router(config)#ip dhcp  excluded-address 192.168.1.100
    Router(config)#ip dhcp  excluded-address 192.168.1.1
    Router(config)#exit
    Router#wr mem
    PC0,1,2 - Desktop - ip configuration - +DHCP - PC0 - Desktop - command prompt
    C:\>ping 192.168.1.1
    ...
    Ping statistics for 192.168.1.1:
    	Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
    Approximate round trip times in milli-seconds:
    	Minimum = 0ms, Maximum = 11ms, Average = 2ms
    C:\>ping 192.168.1.3
    ...
    Ping statistics for 192.168.1.3:
    	Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
    Approximate round trip times in milli-seconds:
    	Minimum = 0ms, Maximum = 1ms, Average = 0ms
    C:\>ping 192.168.1.4
    ...
    Ping statistics for 192.168.1.4:
    	Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
    Approximate round trip times in milli-seconds:
    	Minimum = 0ms, Maximum = 0ms, Average = 0ms
    Router0 - CLI
    Router#show ip dhcp binding
    IP address       Client-ID/              Lease expiration        Type
                    Hardware address
    192.168.1.2      0090.21EC.999A           --                     Automatic
    192.168.1.3      0060.3E23.49DD           --                     Automatic
    192.168.1.4      0010.1109.2ACD           --                     Automatic
    Task:
    Используем DHCP-протокол через сервер: We have 3 different network segments (Vlan2,3,4) and a dedicated dhcp server, Segmenting our network, Create a VLAN, 
    Decision:
    Switch - 2960 - PC3,4,5 - Router1 - 1841 - Sever0 - Copper Straight-Through - switch1 - cli
    Switch>en
    Switch#conf t
    Switch(config)#vlan 2
    Switch(config-vlan)#name VLAN2
    Switch(config-vlan)#exit
    Switch(config)#vlan 3
    Switch(config-vlan)#name VLAN3
    Switch(config-vlan)#exit
    Switch(config)#vlan 4
    Switch(config-vlan)#name DHCP
    Switch(config-vlan)#exit
    Switch(config)#int range fa
    Switch(config)#int range fastEthernet 0/1-2
    Switch(config-if-range)#swi
    Switch(config-if-range)#switchport mode
    Switch(config-if-range)#switchport mode acc
    Switch(config-if-range)#switchport mode access
    Switch(config-if-range)#swi
    Switch(config-if-range)#switchport acc
    Switch(config-if-range)#switchport access vla
    Switch(config-if-range)#switchport access vlan 2
    Switch(config-if-range)#exit
    Switch(config)#int range fastEthernet 0/3-4
    Switch(config-if-range)#switchport mode access
    Switch(config-if-range)#switchport access vlan 3
    Switch(config-if-range)#exit
    Switch(config)#int range fastEthernet 0/5
    Switch(config-if-range)#switchport mode access
    Switch(config-if-range)#switchport access vlan 4
    Switch(config-if-range)#exit
    Switch(config)#int fa
    Switch(config)#int fastEthernet 0/6
    Switch(config-if)#switchport mode trunk
    Switch(config-if)#swi
    Switch(config-if)#switchport tr
    Switch(config-if)#switchport trunk all
    Switch(config-if)#switchport trunk allowed vla
    Switch(config-if)#switchport trunk allowed vlan 2,3,4
    Switch(config-if)#exit
    Switch(config)#end
    Switch#wr mem
    Switch#show run
        Building configuration...
        Current configuration : 1388 bytes
        !
        version 15.0
        no service timestamps log datetime msec
        no service timestamps debug datetime msec
        no service password-encryption
        !
        hostname Switch
        !
        !
        !
        !
        !
        !
        spanning-tree mode pvst
        spanning-tree extend system-id
        !
        interface FastEthernet0/1
         switchport access vlan 2
         switchport mode access
        !
        interface FastEthernet0/2
         switchport access vlan 2
         switchport mode access
        !
        interface FastEthernet0/3
         switchport access vlan 3
         switchport mode access
        !
        interface FastEthernet0/4
         switchport access vlan 3
         switchport mode access
        !
        interface FastEthernet0/5
         switchport access vlan 4
         switchport mode access
        !
        interface FastEthernet0/6
         switchport trunk allowed vlan 2-4
         switchport mode trunk
    router1 - cli
    Router>en
    Router#conf t
    Router(config)#int g
    Router(config)#int gigabitEthernet 0/0.2
    Router(config-subif)#enc
    Router(config-subif)#encapsulation do
    Router(config-subif)#encapsulation dot1Q 2
    Router(config-subif)#ip
    Router(config-subif)#ip add
    Router(config-subif)#ip address 192.168.2.1 255.255.255.0
    Router(config-subif)#no sh
    Router(config-subif)#no shutdown
    Router(config-subif)#exit
    Router(config)#int gigabitEthernet 0/0
    Router(config-if)#no shutdown
    Router(config-if)#
        %LINK-5-CHANGED: Interface GigabitEthernet0/0, changed state to up
        %LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet0/0, changed state to up
        %LINK-5-CHANGED: Interface GigabitEthernet0/0.2, changed state to up
        %LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet0/0.2, changed state to up
    Router(config-if)#exit
    Router(config)#int gigabitEthernet 0/0.3
    Router(config-subif)#
        %LINK-5-CHANGED: Interface GigabitEthernet0/0.3, changed state to up
        %LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet0/0.3, changed state to up
    Router(config-subif)#encapsulation dot1Q 3
    Router(config-subif)#ip address 192.168.3.1 255.255.255.0
    Router(config-subif)#no shutdown
    Router(config-subif)#exit
    Router(config)#int gigabitEthernet 0/0.4
    Router(config-subif)#
        %LINK-5-CHANGED: Interface GigabitEthernet0/0.4, changed state to up
        %LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet0/0.4, changed state to up
    Router(config-subif)#encapsulation dot1Q 4
    Router(config-subif)#ip address 192.168.4.1 255.255.255.0
    Router(config-subif)#no shutdown
    Router(config-subif)#end
    Router#
    Router#wr mem
    Router#show run
        Building configuration...
        Current configuration : 882 bytes
        !
        version 15.1
        no service timestamps log datetime msec
        no service timestamps debug datetime msec
        no service password-encryption
        !
        hostname Router
        !
        !
        !
        !
        !
        !
        !
        !
        ip cef
        no ipv6 cef
        !
        !
        !
        !
        license udi pid CISCO2901/K9 sn FTX1524I7AI-
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        spanning-tree mode pvst
        !
        !
        !
        !
        !
        !
        interface GigabitEthernet0/0
         no ip address
         duplex auto
         speed auto
        !
        interface GigabitEthernet0/0.2
         encapsulation dot1Q 2
         ip address 192.168.2.1 255.255.255.0
        !
        interface GigabitEthernet0/0.3
         encapsulation dot1Q 3
         ip address 192.168.3.1 255.255.255.0
        !
        interface GigabitEthernet0/0.4
         encapsulation dot1Q 4
         ip address 192.168.4.1 255.255.255.0
        !
        interface GigabitEthernet0/1
         no ip address
         duplex auto
         speed auto
         shutdown
        !
    server0 - dekstop - ip configuration - ip address 192.168.4.2 - subnet mask 255.255.255.0 - default gateway 192.168.4.1 - command prompt
    C:\>ping 192.168.4.1
        ...
        Ping statistics for 192.168.4.1:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 6ms, Average = 1ms
        services - dhcp - убеждаемся, что видим один дефолтный server pool - pool name DCHP-VLAN2 - start ip address 192.168.2.0 - default gateway 192.168.2.1 - dns server - 8.8.8.8 - service +On - Add - тоже самое для 3тьего vlan
    Router1 - ClI
    Router>en
    Router#conf t
    Router(config)#int g
    Router(config)#int gigabitEthernet 0/0.2
    Router(config-subif)#ip hel
    Router(config-subif)#ip help
    Router(config-subif)#ip helper-address 192.168.4.2
    Router(config-subif)#exit
    Router(config)#int gigabitEthernet 0/0.3
    Router(config-subif)#ip helper-address 192.168.4.2
    Router(config-subif)#end
    Router#wr mem
    PC3,4,5,6 - desktop - ip configuration - +dhcp - Убеждаемтся в том, что dhcp автоматически раздал адреса - PC6 - command prompt
    C:\>ping 192.168.3.1
        ...
        Ping statistics for 192.168.3.1:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 2ms, Average = 1ms
    C:\>ping 192.168.2.2
        ...
        Ping statistics for 192.168.2.2:
            Packets: Sent = 4, Received = 3, Lost = 1 (25% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 1ms, Average = 0ms
    Task:
    Wifi: setting up a Wi fi router, Add a custom device laptop, add another stationary computer. assume that the organization already has some kind of network. we need to deploy wi-fi to our organization. we have a guest room of the organization. make sure that the wi-fi network is in a separate segment. On the port that connects to our router1 router, you need to add this vlan4 to trunkport. We need to create a sub interface on our router. Set the possibility to distribute addresses. Add some kind of wireless device, that is, let's assume that a client of the organization came to us and he has a laptop that wants to connect to wifi. Что получить ноутбуку ip адрес wifi нужно определить точку доступа к vlan.
    Необходимо донастроить nat.    
    Decision:
    Router0-CLI
    Router>en
    Router#conf t
    Router(config)#int fa
    Router(config)#int fastEthernet 0/0
    Router(config-if)#ip add
    Router(config-if)#ip address 210.210.0.1 255.255.255.252
    Router(config-if)#no sh
    Router(config-if)#no shutdown
    Router(config-if)#
        %LINK-5-CHANGED: Interface FastEthernet0/0, changed state to up
        %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/0, changed state to up
    Router(config-if)#end
    Router#wr mem
    Wireless router 0 - gui - static ip - ip address: 210.210.0.2 - subnet mask: 255.255.255.252 - gateway: 210.210.0.1 - save setting - wireless - network name ssid: netskills-home - save setting - wireless security - wpa2 personal - passphase: ciscocisco - save setting
    lalptop0 - выключаем - убираем (перетаскиваем) подключенный сетевой модуль - заместо него wrc300n - включаем ноутбук - desktop - pc wireless - connect - refresh - netskills-home - connect - pre-shared key - ciscocisco - command promprt
    C:\>ipconfig
        Bluetooth Connection:(default port)
           Connection-specific DNS Suffix..:
           Link-local IPv6 Address.........: ::
           IPv6 Address....................: ::
           IPv4 Address....................: 0.0.0.0
           Subnet Mask.....................: 0.0.0.0
           Default Gateway.................: ::
                                             0.0.0.0
        Wireless0 Connection:
           Connection-specific DNS Suffix..:
           Link-local IPv6 Address.........: FE80::202:4AFF:FE66:D186
           IPv6 Address....................: ::
           IPv4 Address....................: 192.168.0.100
           Subnet Mask.....................: 255.255.255.0
           Default Gateway.................: ::
                                             192.168.0.1
    C:\>ping 192.168.0.1
        ...
        Ping statistics for 192.168.0.1:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 23ms, Maximum = 122ms, Average = 56ms
    C:\>ping 210.210.0.1
        ...
        Ping statistics for 210.210.0.1:
            Packets: Sent = 4, Received = 3, Lost = 1 (25% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 17ms, Maximum = 32ms, Average = 26ms
    pc0 - ip conf - dbhcp - command prompt
    C:\>ping 192.168.0.1
        ...
        Ping statistics for 192.168.0.1:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 1ms, Average = 0ms
    C:\>ping 210.210.0.1
        ...
        Ping statistics for 210.210.0.1:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 1ms, Average = 0ms
    C:\>ping 192.168.0.100
        ...
        Ping statistics for 192.168.0.100:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 11ms, Maximum = 158ms, Average = 62ms
    Switch0 - CLI
    Switch>en
    Switch#show run
        Building configuration...
        Current configuration : 1436 bytes
        !
        version 12.2
        no service timestamps log datetime msec
        no service timestamps debug datetime msec
        no service password-encryption
        !
        hostname Switch
        !
        !
        !
        !
        !
        !
        spanning-tree mode pvst
        spanning-tree extend system-id
        !
        interface FastEthernet0/1
         description ToRouter
         switchport trunk allowed vlan 2-4
         switchport mode trunk
        !
        interface FastEthernet0/2
         description Users
         switchport access vlan 2
         switchport mode access
        !
        interface FastEthernet0/3
         description Users
         switchport access vlan 2
         switchport mode access
        !
        interface FastEthernet0/4
         description srv
         switchport access vlan 3
         switchport mode access
        !
        interface FastEthernet0/5
         description WiFi-AP
         switchport access vlan 4
         switchport mode access
        !
        interface FastEthernet0/6
        !

        router1-cli
    Switch>en
    Switch#show run
        Building configuration...
        Current configuration : 1436 bytes
        !
        version 12.2
        no service timestamps log datetime msec
        no service timestamps debug datetime msec
        no service password-encryption
        !
        hostname Switch
        !
        !
        !
        !
        !
        !
        spanning-tree mode pvst
        spanning-tree extend system-id
        !
        interface FastEthernet0/1
         description ToRouter
         switchport trunk allowed vlan 2-4
         switchport mode trunk
        !
        interface FastEthernet0/2
         description Users
         switchport access vlan 2
         switchport mode access
        !
        interface FastEthernet0/3
         description Users
         switchport access vlan 2
         switchport mode access
        !
        interface FastEthernet0/4
         description srv
         switchport access vlan 3
         switchport mode access
        !
        interface FastEthernet0/5
         description WiFi-AP
         switchport access vlan 4
         switchport mode access
        !
        interface FastEthernet0/6
        !
    access point0 - config - port1 - ssid: netskill - wpa2-psk - pass phrase: ciscocisco
    switch-cli
    #en
    # conf t
    # vlan 4
    # name wifi
    # end
    #show run
        ...
        switchport trunk allowed vlan 2-4
    router1 - cli
    #en
    # conf t
    # int fa0/1.4
    # encapsulation dot1Q 4
    # ip address 192.168.4.1 255.255.255.0
    # no shutdown
    # end
    # conf t
    # ip dhcp pool Wifi-pool
    # network 192.168.4.0 255.255.255.0
    # default-router 192.168.4.1
    # exit
    # ip dhcp excluded-address 192.168.4.1
    # end
    # wr mem
    Laptop1 - выключаем - убираем (перетаскиваем) подключенный сетевой модуль - заместо него wrc300n - включаем ноутбук - desktop - pc wireless - connect - refresh - netskills - save setting - wireless security - wpa2 personal - passphase: ciscocisco - save setting - command prompt
    switch0-cli
    #en
    # conf t
    # switchport mode access
    # switchport access vlan 4
    # description WiFi-AP
    # end
    # wr mem
    Router1-cli
    # en
    # conf t
    # ip access-list standart FOR-NAT
    # permit 192.168.4.0  0.0.0.255
    # exit
    # int fa0/1.4
    # ip nat inside
    # end
    # wr mem
    lalptop1 - ip configuration - dhcp - ok - command prompt
    C:\>ipconfig
        Bluetooth Connection:(default port)
           Connection-specific DNS Suffix..:
           Link-local IPv6 Address.........: ::
           IPv6 Address....................: ::
           IPv4 Address....................: 0.0.0.0
           Subnet Mask.....................: 0.0.0.0
           Default Gateway.................: ::
                                             0.0.0.0
        Wireless0 Connection:
           Connection-specific DNS Suffix..:
           Link-local IPv6 Address.........: FE80::203:E4FF:FE34:D1E7
           IPv6 Address....................: ::
           IPv4 Address....................: 192.168.4.2
           Subnet Mask.....................: 255.255.255.0
           Default Gateway.................: ::
                                             192.168.4.1
    C:\>ping 192.168.4.1
        ...
        Ping statistics for 192.168.4.1:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 48ms, Maximum = 171ms, Average = 96ms
    C:\>ping 192.168.2.3
        ...
        Ping statistics for 192.168.2.3:
            Packets: Sent = 4, Received = 3, Lost = 1 (25% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 27ms, Maximum = 60ms, Average = 39ms
    C:\>ping 210.210.0.1
        ...
        Ping statistics for 210.210.0.1:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 38ms, Maximum = 69ms, Average = 52ms
    Task:
    Install VirtualBox
    Decision:
    $ sudo dnf config-manager --add-repo=https://download.virtualbox.org/virtualbox/rpm/el/virtualbox.repo
    $ sudo rpm --import https://www.virtualbox.org/download/oracle_vbox.asc
    $ sudo dnf install https://dl.fedoraproject.org/pub/epel/epel-release-latest-9.noarch.rpm
    $ sudo dnf install binutils kernel-devel kernel-headers libgomp make patch gcc glibc-headers glibc-devel dkm
    $ sudo dnf search virtualbox
    $ sudo dnf install VirtualBox-7.0
    $ sudo usermod -aG vboxusers $USER
    $ newgrp vboxusers
    $ wget https://download.virtualbox.org/virtualbox/7.0.10/Oracle_VM_VirtualBox_Extension_Pack-7.0.10-158379.vbox-extpack
    $ sudo VBoxManage extpack install Oracle_VM_VirtualBox_Extension_Pack-7.0.10-158379.vbox-extpack
    Task:
    Использовать Virtualbox
    Decision:
    $ VBoxManage list ostypes
    ...
    ID:          Windows2012_64
    Description: Windows 2012 (64-bit)
    Family ID:   Windows
    Family Desc: Microsoft Windows
    64 bit:      true
    ...
    $ VBoxManage createvm --name "Windows2012" --ostype "Windows2012_64" --register --basefolder /vboximages/
    $ vboxmanage modifyvm Windows2012 --memory 2048 --vram 128
    $ vboxmanage modifyvm Windows2012 --nic1 bridged
    $ vboxmanage createhd --filename /vboximages/Windows2012/Windows2012_DISK.vdi --size 75000 --format VDI 
    $ vboxmanage storagectl Windows2012 --name "SATA Controller" --add sata --controller IntelAhci
    $ vboxmanage storageattach Windows2012 --storagectl "SATA Controller" --port 0 --device 0 --type hdd --medium /vboximages/Windows2012/Windows2012_DISK.vdi
    $ vboxmanage storagectl Windows2012 --name "IDE Controller" --add ide --controller PIIX4
    $ vboxmanage storageattach Windows2012 --storagectl "IDE Controller" --port 1 --device 0 --type dvddrive --medium /iso/Server2012.iso
    $ vboxmanage modifyvm Windows2012 --boot1 dvd --boot2 disk --boot3 none --boot4 none
    $ vboxmanage modifyvm Windows2012 --vrde on
    $ vboxmanage modifyvm Windows2012 --vrdemulticon on --vrdeport 10001
    $ vboxmanage modifyvm Windows2012 --graphicscontroller vboxsvga
    $ vboxmanage sharedfolder add Windows2012 --name "Загрузки" --hostpath /Загрузки/ --automount
    $ vboxmanage startvm --type gui Windows2012 &
    Task:
    Установить DHCP и DNS сервера, добавить в домен клиентского компьютера, и проверить их работоспособность. Делать это все мы будем в виртуальной машине KVM с установленными операционными системами Windows Server 2019 и Windows 10. В KVM когда настраиваем сеть операционных систем, нужно подключить внутреннюю сеть и в неразборчивом режиме разрешить все. После чего для настройки сервера запускаем Windows Server 2019
    Decision:
    Диспетчер серверов - Локальная сеть - ipv4 - уберем галочку ipv6 - нажмем на ipv4 - настроить - прописать адреса: 
    ip-адрес 192.168.0.1
    маска подсети 255.255.255.0
    Основной шлюз 192.168.0.1
    Предпочитаемый Днс-сервер 8.8.8.8
    Диспетчер серверов - Локальная сеть - имя компьютера - изменить (например, Server) - перезагрузиться
    Диспетчер серверов - Локальная сеть - управление - добавить роли и компоненты - тип установки - установка ролей и компонентов - выбор сервера - видим наш сервер (Server) и выбираем его - роли сервера ставим флажок на DNS-сервер и доменные службы Active Directory - компоненты - Windows Powershell -	подтверждаем - ставим галочку на автоматический перезапуск - устанавливаем
	Диспетчер серверов - Локальная сеть - видим восклицательный знак -	повысить роли и компоненты - в конфигурации развертывания добавить новый лес - даем имя корневого раздела (на моем примере - server.local) - придумываем пароль, имя домена - устанавливаем
	Диспетчер серверов - Локальная сеть - Средства - DNS - в зоне обратного просмотра правой кнопкой мыши создаем новую зону - добавляем идентификатор сети 192.168.0. 
    Сеть и интернет - центр управления сетями - дополнительные параметры - +включить сетевые обнаружения - +включить общий доступ к файлам и принтерам - вернемся обратно и снова зайдем в дополнительные парметры, увидиим что сохранения не изменинились. Для этого нужно зайти в диспетчер задач - службы - находим Публикация ресурсов обнаружения функции, Обнаружение SSDP - тип запуска у всех Автоматически - запускаем - Сеть и интернет - центр управления сетями - дополнительные параметры - оставляем флажки на "включить сетевые обнаружения" и "включить общий доступ к файлам и принтерам"
    Диспетчер серверов - Локальная сеть - Управление - добавить роли и компоненты - тип установки - установка ролей и компонентов - роли сервера - добавим флажок на DHCP-сервер - подтверждаем - ставим галочку на автоматический перезапуск - устанавливаем - по восклицательному знаку в разделе Локальная сеть - настраиваем DHCP - имя пользователя - добавляем то самое имя учетной записи, с которой мы все это настраиваем (в моем случае - Администратор) - фиксируем 
    Диспетчер серверов - Локальная сеть - средства - DHCP - IPv4 правой кнопкой мыши создаем область - пишем имя области (в моем случае - Server) - добавляем диапозон айпи адресов и маску:
    Начальный IP адрес 192.168.0.10
    Конечный IP адрес 192.168.0.20
    Длина 24
    маска подсети 255.255.255.0
    срок действия аренды я выбрал 7 дней - добавляем айпи адрес маршрутизатора 192.168.0.1. В DHCP - IPv4 - область 192.168.0.0 - пул ардесов - должна появиться инфа по DHCP
    панельуправлени - система безопасности - брандмауер - включение и отключение брандмауера
    $ sudo virsh start Windows
    $ virt-viewer --connect qemu:///system --wait Windows
    свойства компьютера - изменить настройки,изменить - ставим флажок на добавление домена - вводим в домен (в моем случае это server.local) - вводим данные сервера (имя и пароль учетки сервера) - После перезагрузки можем спокойно работать в домене.
    Task:
    Перенос виртуальной машины VirtualBox в KVM
    Decision:
    $ vboxmanage list hdds
    UUID:           90d93e42-c567-4ff4-8ab8-5a21971604dc
    Parent UUID:    base
    State:          created
    Type:           normal (base)
    Location:       /vboximages/Windows2012/Windows2012_DISK.vdi
    Storage format: VDI
    Capacity:       75000 MBytes
    Encryption:     disabled
    $ VBoxManage clonehd /vboximages/Windows2012/Snapshots/\{41cf81da-b2f5-4dfe-9afb-e5c0d5f0d301\}.vdi /vboximages/Windows2012/Windows12static.vdi --format VDI --variant Fixed
    $ sudo qemu-img convert -f vdi /vboximages/Windows2012/Windows12static.vdi -O qcow2 /images/Windows12.qcow2
    $ sudo virt-install --osinfo list
    ...
    win2k12r2
    ...
    $ sudo virt-install \
    --name Windows12 \
    --ram 2048 \
    --vcpus=2 \
    --import \
    --disk path=/images/Windows12.qcow2,format=qcow2 \
    --vnc \
    --noautoconsole \
    --os-variant win2k12r2 \
    --accelerate \
    --network bridge=br0
    $ virt-viewer --connect qemu:///system --wait Windows12
    Decision:
    Вернемся к серверу - меню пуск - администрирование - DHCP-сервер - IPv4 - область - арендованные адреса видим наш клиентский компьютер
    $ sudo virsh shutdown Windows
    $ vboxmanage controlvm Windows12 poweroff soft
    Source:
    https://www.youtube.com/watch?v=04VpVYO7F78
    https://www.youtube.com/watch?v=kg5CalaPOLA
    https://www.youtube.com/playlist?list=PLcDkQ2Au8aVNYsqGsxRQxYyQijILa94T9
    https://www.linuxhowto.net/how-to-install-virtualbox-on-rhel-9-step-by-step/?ysclid=ln2gkjl488389400056
    https://www.dmosk.ru/miniinstruktions.php?mini=virtualbox-install
    https://devminz.github.io/posts/devops/virtualbox-cli-vm-bridged-networking/
    https://urn.su/dvps/virtualbox/vboxmanage/?ysclid=ln6wyljfpr336059458
    https://urn.su/dvps/virtualbox/vboxmanage/man/?ysclid=ln6xc4orjl822339529
    https://askubuntu.com/questions/161759/how-to-access-a-shared-folder-in-virtualbox
    https://superuser.com/questions/116946/how-do-i-press-ctrlaltdelete-in-virtualbox
    https://www.youtube.com/playlist?list=PL90TRL5CLgV68UQJZIWU_aoQhQGSXZJiS
    https://obu4alka.ru/perenos-virtualnoj-mashiny-virtualbox-v-kvm.html
    https://doc.s-terra.ru/rh_output/4.2/Virt_gate/output/mergedProjects/KVM/%D0%98%D0%BC%D0%BF%D0%BE%D1%80%D1%82_%D0%B2_KVM.htm

Использование данных с одночастотных приемников спутниковых радионавигационных систем для коррекции модели ионосферы
    Task:
    Для защиты диссертации по теме "Использование данных с одночастотных приемников спутниковых радионавигационных систем для коррекции модели ионосферы" освоил технологию приёма получения данных с одночастотных приемников спутниковых радионавигационных систем, получил данные, разработал программу на C++, которая обрабатывает и сортирует данные двух координат из файла по столбцам, рисует график, чтобы увидеть желаемый результат в точности определения координат спутников, рассмотрел способы уменьшения ошибок измерения псевдодальности и показал, что из-за нестабильности аппаратуры потребителя информация о состоянии ионосферы может быть получена в каждый момент времени по разностям ПД двух навигационных спутников
    Task:
    Установка виртуальной машины Windows в Qemu-Kvm
    Decision:
    # virt-install \
    --name Windows \
    --ram 2048 \
    --disk path=/ПУТЬ/Windows.img,size=75 \
    --vcpus 2 \
    --os-variant Windows \
    --network bridge=br0 \
    --graphics none \
    --console pty,target_type=serial \
    --location /var/lib/libvirt/iso/Windows.iso \
    --extra-args 'console=ttyS0,115200n8'
    $ sudo virsh list --all
     ID   Имя           Состояние
    -------------------------------
    ...
     -    Windows       выключен
    $ sudo virsh start Windows
    Task:
    Настройка удаленного доступа к виртуальной машине для передачи файлов
    Decision:
    Панель управления - Система - Настройка удаленного доступа - +разрешить подключения удаленного помощника к этому компьютеру - +разрешить удаленные подключения к этому компьютеру - -Разрешить подключение только с компьютеров, ...
    $ sudo dnf install rdesktop
    $ rdesktop IP -u tuser -p tpassword -g 1400x900
    PS C:\Windows\system32> Add-WindowsCapability -Online -Name OpenSSH.Client~~~~0.0.1.0
    PS C:\Windows\system32> Add-WindowsCapability -Online -Name OpenSSH.Server~~~~0.0.1.0
    PS C:\Windows\system32> Get-WindowsCapability -Online | Where-Object Name -like 'OpenSSH*'
    Name  : OpenSSH.Client~~~~0.0.1.0
    State : Installed
    Name  : OpenSSH.Server~~~~0.0.1.0
    State : Installed
    PS C:\Windows\system32> Start-Service sshd
    PS C:\Windows\system32> Set-Service -Name sshd -StartupType 'Automatic'
    PS C:\Windows\System32\OpenSSH> notepad.exe C:\ProgramData\ssh\sshd_config
    tuser@KVM-TWINDOWS C:\Users\tuser>type C:\ProgramData\ssh\sshd_config
    ...
    PasswordAuthentication yes
    ...
    # override default of no subsystems
    Subsystem    sftp    sftp-server.exe
    ...
    Match User tuser
        ChrootDirectory C:\Users\tuser\Documents
    #    ForceCommand internal-sftp
        X11Forwarding yes
    ...
    PS C:\Windows\System32\OpenSSH> Restart-Service sshd
    $ ssh tuser@IP
    tuser@KVM-TWINDOWS C:\Users\tuser>powershell
    PS C:\Users\tuser> Start-Process powershell -Verb runAs
    PS C:\Users\tuser> exit
    $ ls
    DataProcessingInCpp  Drivers  ReceivingDataFromSatellite
    $ sftp tuser@IP
    sftp> put -r ReceivingDataFromSatellite
    sftp> put -r DataProcessingInCpp
    sftp> ls
    DataProcessingInCpp                                                             
    ReceivingDataFromSatellite
    sftp> exit
    $ rdesktop IP -u tuser -p tpassword -g 1400x900 &
    Task:
    Получение данных с одночастотного приемника СРНС
    Decision:
    Для проверки способа определения вариации ионосферной задержки 19 мая 2015 года провел обработку данных измерения навигационных сигналов от нескольких НС. Для измерений использовался 20 канальный  одночастотный  приемник BU-353 фирмы  GlobalSat. Этот приемник предназначен для ГНСС GPS, работает на частоте L1 по C/A коду и имеет высокую чувствительность 159 дБм. Данные о псевдодальностях доступны только при использовании бинарного протокола, поэтому при наблюдениях применялась программа SirfTech версии 2.20 и данные записывались в RINEX файл.
    Task:
    Установка Borland C++ Builder под Windows
    Decision:
    $ ssh tuser@IP
    tuser@KVM-TWINDOWS C:\Users\tuser>powershell
    PS C:\users\tuser\documents> Mount-DiskImage -ImagePath "C:\users\tuser\documents\DataProcessingInCpp\Borland C++ Builder 6.0 Enterprise [cd1].iso"
    zPS C:\users\tuser\documents> Get-PSDrive -PSProvider FileSystem
    Name           Used (GB)     Free (GB) Provider      Root                                                                                               CurrentLocation
    ----           ---------     --------- --------      ----                                                                                               ---------------
    C                  25,27         49,16 FileSystem    C:\                                                                                          users\tuser\documents
    D                   4,32          0,00 FileSystem    D:\
    E                                      FileSystem    E:\
    F                   0,61          0,00 FileSystem    F:\
    PS C:\users\tuser\documents> ls F:\
        Каталог: F:\
    Mode                 LastWriteTime         Length Name
    ----                 -------------         ------ ----
    d-----        01.02.2002     17:00                Install
    --r---        01.02.2002     17:00          29550 license.txt
    --r---        01.02.2002     17:00          54878 readme.rtf
    --r---        01.02.2002     17:00          33959 readme.txt
    --r---        01.02.2002     17:00          29550 license.txt
    --r---        01.02.2002     17:00          54878 readme.rtf
    --r---        01.02.2002     17:00          33959 readme.txt
    --r---        01.02.2002     17:00           5337 remote.rtf
    --r---        01.02.2002     17:00           1750 remote.txt
    --r---        01.02.2002     17:00           1750 install.exe
    Запустим от администратора install.exe - выбираем С++ Builder 6 - нужно ввести сгенерированный ключ программы, зайдя в папку Borland - запустить генератор ключей Borland KeyGen - копируем - вставляем серийный номер - ключ программы в установщик
    PS C:\users\tuser\documents> Dismount-DiskImage -ImagePath "C:\users\tuser\documents\DataProcessingInCpp\Borland C++ Builder 6.0 Enterprise [cd1].iso"
    PS C:\users\tuser\documents> Mount-DiskImage -ImagePath "C:\users\tuser\documents\DataProcessingInCpp\Borland C++ Builder 6.0 Enterprise [cd2].iso"
    Ок - finish - NO (Ни в коем случае не перезагружаться)
    PS C:\users\tuser\documents> Dismount-DiskImage -ImagePath "C:\users\tuser\documents\DataProcessingInCpp\Borland C++ Builder 6.0 Enterprise [cd2].iso"
    C:\Programms file (x86)\Bornald\Builder\Bin\ - свойства совместимости bcb.exe - +всегда выполнять от администратора это программу - Запускаем bcb.exe - +регистрируем ее с помощью генератора ключей Borland KeyGe - копировать - вставить - перезагрузиться
    Task:
    Мы хотим чтобы наша программа с графическим интерфейсом с нами поздоровалась в Bornald Builder
    Decision:
    //---------------------------------------------------------------------------
    #include <vcl.h>
    #pragma hdrstop
    #include "Unit1.h"
    //---------------------------------------------------------------------------
    #pragma package(smart_init)
    #pragma resource "*.dfm"
    TForm1 *Form1;
    //---------------------------------------------------------------------------
    __fastcall TForm1::TForm1(TComponent* Owner)
            : TForm(Owner)
    {
    }
    //---------------------------------------------------------------------------
    void __fastcall TForm1::Button1Click(TObject *Sender)
    {
            ShowMessage("Hello world!");
    }
    //---------------------------------------------------------------------------
    Task:
    Для дальнейшей обработки и сортировки данных мною была написана программа на языке С++, которая считывает rinex файлы в текстовом формате и сортирует псевдодальности по каждому НС, что упрощает дальнейшую обработку.
    Task:
    Попробуем в файле irkj1380.txt вывести всю информацию до END OF HEADER в out.txt.
    Decision:
         2              OBSERVATION DATA    M (MIXED)           RINEX VERSION / TYPE
    CCRINEXO V2.4.1 LH  imvp                19-MAY-15 06:30     PGM / RUN BY / DATE
    no comments                                                 COMMENT
    JPS2RIN 1.40 LNX    IMVP                18-MAY-15 01:08     COMMENT
    BUILD MAY 14 2009 (C) TOPCON POSITIONING SYSTEMS            COMMENT
    IRKJ40190000.JPS                                            COMMENT
    SE TPS 00000000                                             COMMENT
    IRKJ                                                        MARKER NAME
    12313M002                                                   MARKER NUMBER
                        VS NIIFTRI, IRKUTSK                     OBSERVER / AGENCY
    00517               JPS LEGACY          2.6.0 OCT,24,2007   REC # / TYPE / VERS
    RA0225              JPSREGANT_SD_E1 NONE                    ANT # / TYPE
      -968328.4915  3794423.9665  5018165.4637                  APPROX POSITION XYZ
            0.1280        0.0000        0.0000                  ANTENNA: DELTA H/E/N
         1     1                                                WAVELENGTH FACT L1/2
         7    C1    P1    P2    L1    L2    D1    D2            # / TYPES OF OBSERV
        30                                                      INTERVAL
      2015     5    18     0     0    0.000000      GPS         TIME OF FIRST OBS
                                                                END OF HEADER
    Task:
    Вывести следующую строку после END OF HEADER
    Decision:
    15  5 18  0  0  0.0000000  1 19G01G04G11G12G14G18G22G24G25G31G32R05
    Task:
    Выведем количество спутников и названия спутников в строке
    Decision:
    19
    G01G04G11G12G14G18G22G24G25G31G32R05
    Task:
    нужно сделать так, что бы строка G01G04G11G12G14G18G22G24G25G31G32R05 читалась буквам, то есть создаем динамический массив с указателем.
    Decision:
    19
    G01G04G11G12G14G18G22G24G25G31G32R05
    G
    G
    G
    G
    G
    G
    G
    G
    G
    G
    G
    R
    Task:
    Вывести вторую строку.
    Decision:
    19
    G01G04G11G12G14G18G22G24G25G31G32R05
    R06R07R09R15R16R22R23
    Task:
    Вывести буквы спутников в столбец.
    Decision:
    19
    G01G04G11G12G14G18G22G24G25G31G32R05
    R
    R
    R
    R
    R
    R
    R
    Task:
    вывести по буквам и по цифрам. если увидим пробел, тогда операция не должна выполняться.
    Decision:
    19
    G01G04G11G12G14G18G22G24G25G31G32R05
    R
    0
    6
    R
    0
    7
    R
    0
    9
    R
    1
    5
    R
    1
    6
    R
    2
    2
    R
    2
    3
    Task:
    вывести все спутники в столбец.
    Decision:
    19
    G01
    G04
    G11
    G12
    G14
    G18
    G22
    G24
    G25
    G31
    G32
    R05
    R06
    R07
    R09
    R15
    R16
    R22
    R23
    Task:
    Нужно вывести псевдодальности для одной/первой эпохи (время - 0:0).
    Decision:
    19
    G01 G04 G11 G12 G14 G18 G22 G24 G25 G31 G32 R05 R06 R07 R09 R15 R16 R22 R23 2.40771e+07
    2.28061e+07
    2.4023e+07
    2.23889e+07
    2.06979e+07
    2.17159e+07
    2.04115e+07
    2.22393e+07
    2.35478e+07
    2.41313e+07
    2.3745e+07
    2.20981e+07
    1.91242e+07
    2.1007e+07
    2.22533e+07
    2.12016e+07
    1.94745e+07
    2.35659e+07
    2.28647e+07
    Task:
    мы вывели все псевдодальности для каждого спутника, но только для первой эпохи (время - 0:0). Чтобы посчитать для каждой эпохи, давайте переделаем программу, используя векторы. Сначала попробуем также считать и вывести названия спутников для первой эпохи.
    Decision:
    19
    G01
    G04
    G11
    G12
    G14
    G18
    G22
    G24
    G25
    G31
    G32
    R05
    R06
    R07
    R09
    R15
    R16
    R22
    Task:
    вывести псевдодальности для каждого спутника.
    Decision:
    19
    G01 G04 G11 G12 G14 G18 G22 G24 G25 G31 G32 R05 R06 R07 R09 R15 R16 R22 R23
    24077128.1194 22806124.8054 24022983.9984 22388929.9144 20697892.8884 21715906.8854 20411541.2704 22239301.1624 23547808.7034 24131268.6434 23745039.8404 22098086.832 19124242.27 21007031.526 22253250.468 21201583.22 19474489.084 23565923.703 22864670.122 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
    Task:
    Попробуем и для первой и для второй эпохи (время: 0:00 - 0:30) проделать такие операции. Выводится название спутника, и расстояние (дальность) спутника. первая строка - для первой эпохи, вторая строка - для второй эпохи
    Decision:
    19
    19
              G01           G04           G11           G12           G14           G18           G22           G24           G25           G31           G32           R05           R06           R07           R09           R15           R16           R22           R23
    24077128.1194 22806124.8054 24022983.9984 22388929.9144 20697892.8884 21715906.8854 20411541.2704 22239301.1624 23547808.7034 24131268.6434 23745039.8404  22098086.832   19124242.27  21007031.526  22253250.468   21201583.22  19474489.084  23565923.703  22864670.122             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0
    24065818.3394 22804492.2684 24023768.7094 22378483.9394 20691105.4344 21730480.5744 20415751.1104 22255260.6984 23528148.4594 24109572.7604 23726475.0794  22118176.666  19126075.998  20989472.459  22228716.936  21220136.852  19466441.002   23584399.66  22865445.005             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0
    Task:
    наведем теперь порядок в коде, чтобы все переменные были наверху, во вторых, чтобы постоянно вручную не считывать дальность для каждого спутника и для каждой эпохи, давайте изменим программу. Создадим цикл. 4 - 4 эпохи (время 0:00-1:30).
    Decision:
    19
    19
    19
    19
              G01           G04           G11           G12           G14           G18           G22           G24           G25           G31           G32           R05           R06           R07           R09           R15           R16           R22           R23
    24077128.1194 22806124.8054 24022983.9984 22388929.9144 20697892.8884 21715906.8854 20411541.2704 22239301.1624 23547808.7034 24131268.6434 23745039.8404  22098086.832   19124242.27  21007031.526  22253250.468   21201583.22  19474489.084  23565923.703  22864670.122             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0
    24065818.3394 22804492.2684 24023768.7094 22378483.9394 20691105.4344 21730480.5744 20415751.1104 22255260.6984 23528148.4594 24109572.7604 23726475.0794  22118176.666  19126075.998  20989472.459  22228716.936  21220136.852  19466441.002   23584399.66  22865445.005             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0
    24054604.4524 22802978.2284 24024661.7794 22368141.6094 20684380.5444 21745121.8054 20420058.9764 22271281.9174 23508530.9834 24087901.1804 23707941.2624 118341978.858 102070810.568 112264586.751 118569402.732   21238782.99 103944062.756 125994130.633 122319666.917             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0
    24043483.7924 22801583.0244 24025665.3284 22357904.6154 20677717.7854 21759831.8404 20424464.4854 22287364.6624 23488954.4584 24066257.0444 23689442.3374 118449919.114 102081788.249 112171158.621 118438955.294  21257519.389 103902612.851 126093535.929 122325408.502             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0             0
    Task:
    Попробуем вывести для всех эпох данные спутников. Просто регулируем цикл.
    мы отсортировали данные псевдодальности к каждому спутник для всех эпох. нули в столбцах означают, что в спутниках отсутсвуют нужные данные. единственное, в нижнем скриншоте увидим, что появилиись какие-то нули и у них не обозначены спутники. Дело в том, что в программе мы указали размерность вектора массива 100 и в каждом файле принимаемого с приемника в нашем случае irkj1380.txt, количество эпох может быть разное. Поэтому тут нужно регулировать в нашем случае цифру 100. Я, например, посталю значение здесь 55. Уже покрасивее будет выглядеть наша таблица.
    Но давайте выведем на экран данные для двух спутников
    Decision:
    G01 G04 G11 G12 и т.д.
    24077128.119 22806124.805
    24065818.339 22804492.268
    24054604.452 22802978.228
    24043483.792 22801583.024
    24032459.125 22800306.861
    24021529.084 22799148.829
    24010696.527 22798110.763
    23999959.98 22797191.503
    23989317.858 22796390.025
    23978776.092 22795708.426
    23968330.915 22795144.69
    23957983.22 22794700.309
    23947732.989 22794375.481
    23937583.568 22794167.697
    23927530.52 22794080.594
    23917578.625 22794109.516
    23907725.007 22794258.689
    23897972.386 22794526.148
    23888318.516 22794910.502
    23878766.415 22795414.62
    ... ...
    Task:
    вывести данные именно для одного спутника, например первого. Для этого закомментируем ненужные строки.
    Decision:
    24077128.119
    24065818.339
    24054604.452
    24043483.792
    24032459.125
    24021529.084
    24010696.527
    23999959.98
    23989317.858
    23978776.092
    23968330.915
    23957983.22
    23947732.989
    ...
    Task:
    Попробуем просто сделать это все на графическом интерфейсе, вывести данные двух спутников, плюс еще нарисовать графики этих данных для двух спутников.
    Теперь нужно обработать и сортировать данные с геометрической дальностью для спутников. Файл называется igr18451.txt. Вот как выглядят данные, которые нужно отсортировать. Тут уже одна эпоха равняется 15 минутам.
    То что я выделил, это координаты спутника X,Y,Z. Именно их и нужно отсортировать. PG01 - название первого спутника. Попробуем вывести данные именно для него.
    Decision:
    PG04 16571.755106 7091.147720 19268.134634
    PG04 17081.817393 9222.831883 17918.904800
    PG04 17633.922784 11162.951350 16256.328779
    PG04 18194.986791 12883.319207 14310.615388
    PG04 18728.745598 14363.489413 12116.696076
    PG04 19197.262350 15591.290270 9713.525830
    PG04 19562.489921 16563.032391 7143.333216
    PG04 19787.827341 17283.391677 4450.837454
    PG04 19839.609715 17764.980464 1682.449322
    PG04 19688.476298 18027.631365 -1114.528992
    PG04 19310.568086 18097.427949 -3892.691773
    PG04 18688.514262 18005.524210 -6605.294077
    PG04 17812.175758 17786.800613 -9206.983073
    PG04 16679.123638 17478.408399 -11654.488894
    PG04 15294.839581 17118.255856 -13907.269035
    PG04 13672.635233 16743.490595 -15928.101701
    PG04 11833.296299 16389.030589 -17683.624513
    PG04 9804.465824 16086.194088 -19144.815686
    PG04 7619.789018 15861.474593 -20287.415200
    ...
    Task:
    Это мы вывели координаты X,Y,Z и название спутника. Но мне теперь нужно вывести данные только Х для первого спутника.
    Decision:
    14736.411108
    15414.203154
    16201.304785
    17074.555745
    18004.439905
    18956.228081
    19891.328698
    20768.792721
    21546.914135
    ...
    Task:
    Аналогично выводяся только для Y и Z выводим данные. Просто нужно поменять в коде x на y или z.
    Давайте попробуем поситать данные псевдодальности полученные с моего приемника, название файла называется sirfrin1.txt. Вот как выглядит файл:
    Здесь мы уже видим только две данные для спутников. первые, это дальность, которую как раз и нужно отсортировать по каждом НС, а вторые это, видимо, какие-то сигналы спутника, которые нас не особо не интересуют. И эпоха здесь начинается не с нуля, как мы видим, а с 41 минуты 23 секунды. Это тоже нужно учитывать, когда нужно будет сравнивать эти данные с ГД.
    Decision:
    Мы задачу выполнили (отсортировать данные ГД и ПД по каждом навигационному спутнику), остается только обработать эти данные по формулам и посторить по ним графики через Эксель.
    Source:
        https://forum.calculate-linux.org/t/windows-qemu-kvm-libvirt/9357
        https://blog.sedicomm.com/2019/07/21/rdesktop-klient-rdp-dlya-podklyucheniya-rabochego-stola-windows-iz-linux/
        https://learn.microsoft.com/ru-ru/windows-server/administration/openssh/openssh_install_firstuse
        https://learn.microsoft.com/ru-ru/powershell/scripting/learn/remoting/ssh-remoting-in-powershell-core?view=powershell-7.3
        https://learn.microsoft.com/en-us/powershell/module/storage/dismount-diskimage?view=windowsserver2022-ps
        https://superuser.com/questions/499264/how-can-i-mount-an-iso-via-powershell-programmatically
        https://winitpro.ru/index.php/2016/03/31/sftp-ssh-ftp-na-windows-server-2012-r2/
        https://mhelp.pro/ru/kak-zapustit-powershell-ot-imeni-administratora/?ysclid=lmzwqntxfi559273426
        https://remontka.pro/text-files-cmd-powershell/?ysclid=lmzy2p5172409325479
        https://www.digitalocean.com/community/tutorials/sftp-ru
        http://ftp.glonass-iac.ru/guide/navfaq.php
        https://ru.wtuseripedia.org/wtuseri/%D0%A1%D0%BF%D1%83%D1%82%D0%BD%D0%B8%D0%BA%D0%BE%D0%B2%D0%B0%D1%8F_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0_%D0%BD%D0%B0%D0%B2%D0%B8%D0%B3%D0%B0%D1%86%D0%B8%D0%B8
        Харисов В.Н. Глобальная спутниковая радионавигационная система ГЛОНАСС
        Грудинская Г.П. Распространение радиоволн
        http://begin.clan.su/news/speciftusera_provedenija_psevdodalnomernykh_i_fazov/2013-09-18-135
        http://rrv.iszf.irk.ru/sites/default/files/conf2014/articles/tom2/17-20.pdf
        http://www.u-blox.com
        Дэвис К. Радиоволны в ионосфере
        https://www.youtube.com/watch?v=bDvVosvyVp0&list=LL&index=315

Разработка сайта
	Task:
	Для разработки своего сайта, куда публиковал все решенные мной интересные задачи, отчеты лабораторных работ и презентации, сверстал простой сайт, установил в Qemu-kvm виртуальную машину с операционной системой Ubuntu, в котором развернул тестовый веб-сервер Lamp с своей базой данных на Mysql, после развернул LAMP в сервисе Timeweb.clouds, в данный сервис перенес данные веб-сервера (база и структура сайта) с виртуальной машины и зарегистрировал домен
	Decision:
	$ wget https://ubuntu.com/download/desktop/thank-you?version=22.04.3&architecture=amd64
	$ sudo dnf install https://kojihub.stream.centos.org/kojifiles/packages/libvirt-python/8.5.0/2.el9/x86_64/
	$ sudo dnf install libguestfs-tools
	$ sudo dnf install libvirt-python
	$ sudo systemctl enable libvirtd
	$ sudo systemctl start libvirtd
	$ systemctl status libvirtd
	$ lsmod | grep kvm
	$ sudo ls -l /ПУТЬ/
	$ sudo ls -l /var/lib/libvirt/iso
	$ rpm -qa | grep bridge-utils
	$ sudo yum install bridge-utils
	$ ip a
	$ brctl show
	$ systemctl enable --now libvirtd
	$ nmcli connection add type bridge autoconnect yes con-name br0 ifname br0
	$ sudo su
	# nmcli connection modify br0 ipv4.addresses 10.0.0.30/24 ipv4.method manual
	# nmcli connection modify br0 ipv4.gateway 10.0.0.1
	# nmcli connection modify br0 ipv4.dns 10.0.0.10
	# nmcli connection modify br0 ipv4.dns-search srv.world
	# nmcli connection up enp0s21f0u1u4
	# nmcli connection del enp0s21f0u1u4
	# nmcli device
	# nmcli connection add type bridge-slave autoconnect yes con-name enp0s21f0u1u4 ifname enp0s21f0u1u4 master br0
	# nmcli device
	# reboot
	# ip addr
	...
	5: virbr0: <NO-CARRIER,BROADCAST,MULTICAST,UP> mtu 1500 qdisc noqueue state DOWN group default qlen 1000
	    link/ether 52:54:00:b7:00:3c brd ff:ff:ff:ff:ff:ff
	    inet 192.168.122.1/24 brd 192.168.122.255 scope global virbr0
	       valid_lft forever preferred_lft forever
	# sudo virsh net-list
	 Имя       Состояние   Автозапуск   Постоянный
	------------------------------------------------
	 default   активен     yes          yes
	# virsh net-edit default
	<network>
	  <name>default</name>
	  <uuid>745f121b-3c89-1281-a19a-aa62808c4241</uuid>
	  <forward mode="nat">
	  <bridge delay="0" name="virbr0" stp="on">
	  <mac address="16:18:00:21:8c:15">
	  <ip address="192.168.122.1" netmask="255.255.255.0">
	    <dhcp>
	      <range end="192.168.122.254" start="192.168.122.2">
	    </range></dhcp>
	  </ip>
	</mac></bridge></forward></network>
	# virt-install \
	--network network=default \
	--name ubuntu22.04 \
	--ram 2048 \
	--vcpus 2 \
	--disk path=/ПУТЬ/ubuntu22.04.img,size=75,format=qcow2 \
	--graphics vnc,password=tpassword \
	--location /var/lib/libvirt/iso/CentOS-Stream-9-latest-x86_64-dvd1.iso \
	--boot cdrom,hd,menu=on 
	WARNING  Не удалось подключиться к графической консоли. Для этого необходимо установить virt-viewer.
	...
	# dnf install virt-viewer
	# virt-install \
	--network network=default \
	--name ubuntu22.04 \
	--ram 2048 \
	--vcpus 2 \
	--disk path=/ПУТЬ/ubuntu22.04.img,size=50,format=qcow2 \
	--graphics vnc,password=tpassword \
	--location /var/lib/libvirt/iso/CentOS-Stream-9-latest-x86_64-dvd1.iso \
	--boot cdrom,hd,menu=on 
	Запуск установки...
	Получение «vmlinuz»                                        |  11 MB  00:00     
	Получение «initrd.img»                                     |  79 MB  00:00     
	Выделение «ubuntu22.04.img»                                    |  50 GB  00:20     
	WARNING  Переопределение объёма памяти на 3072 МиБ, необходимых для установки centos-stream9 с помощью сети.
	Удаление диска «ubuntu22.04.img»                               |         00:00     
	ERROR    конфигурация не поддерживается: VNC password is 9 characters long, only 8 permitted
	Возможно, установка домена завершилась неудачей. 
	Если вы уверены, что установка прошла нормально, перезапустите домен:
	 virsh --connect qemu:///system start ubuntu22.04
	В противном случае начните процесс установки заново.
	# virt-install \
	--network network=default \
	--name ubuntu22.04 \
	--ram 2048 \
	--vcpus 2 \
	--disk path=/ПУТЬ/ubuntu22.04.img,size=50,format=qcow2 \
	--graphics vnc \
	--location /var/lib/libvirt/iso/Ubuntu.iso \
	--boot cdrom,hd,menu=on 
	# virt-install \
	--name ubuntu22.04 \
	--ram 2048 \
	--disk path=/ПУТЬ/ubuntu22.04.img,size=50 \
	--vcpus 2 \
	--os-variant Ubuntu \
	--network bridge=br0 \
	--graphics none \
	--console pty,target_type=serial \
	--location /var/lib/libvirt/iso/Ubuntu.iso \
	--extra-args 'console=ttyS0,115200n8'
	$ sudo virsh list --all
	$ sudo virsh start ubuntu22.04
	$ virt-viewer --connect qemu:///system --wait ubuntu22.04
	$ sudo virsh vncdisplay ubuntu22.04
	127.0.0.1:0
	$ sudo virsh domblklist ubuntu22.04
	 Назначение   Источник
	---------------------------------------------------
	 vda          /ПУТЬ/ubuntu22.04.img
	 sda          -
	$ ssh -X tuser@IP
	Decision:
	$ sudo apt update
	$ sudo apt install apache2
	$ sudo ufw app list
	Available applications:
	  Apache
	  Apache Full
	  Apache Secure
	  CUPS
	  OpenSSH
	$ sudo ufw enable
	$ sudo ufw allow in "Apache"
	$ sudo ufw allow in "OpenSSH"
	$ sudo ufw status
	Status: active
	To                         Action      From
	--                         ------      ----
	Apache                     ALLOW       Anywhere                  
	Apache Full                ALLOW       Anywhere                  
	OpenSSH                    ALLOW       Anywhere                  
	Apache (v6)                ALLOW       Anywhere (v6)             
	Apache Full (v6)           ALLOW       Anywhere (v6)             
	OpenSSH (v6)               ALLOW       Anywhere (v6)
	$ firefox
	update.go:85: cannot change mount namespace according to change mount (/var/lib/snapd/hostfs/usr/share/gimp/2.0/help /usr/share/gimp/2.0/help none bind,ro 0 0): cannot open directory "/var/lib": permission denied
	update.go:85: cannot change mount namespace according to change mount (/var/lib/snapd/hostfs/usr/share/xubuntu-docs /usr/share/xubuntu-docs none bind,ro 0 0): cannot open directory "/var/lib": permission denied
	X11 connection rejected because of wrong authentication.
	X11 connection rejected because of wrong authentication.
	X11 connection rejected because of wrong authentication.
	X11 connection rejected because of wrong authentication.
	X11 connection rejected because of wrong authentication.
	X11 connection rejected because of wrong authentication.
	Error: cannot open display: localhost:10.0
	Decision:
	$ wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
	$ sudo dpkg -i --force-depends google-chrome-stable_current_amd64.deb
	$ google-chrome http://127.0.0.1
	Decision:
	$ sudo apt install mysql-server
	$ sudo mysql
	mysql> ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'tpassword';
	mysql> exit
	$ sudo mysql_secure_installation
	$ sudo mysql
	ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO)
	$ sudo mysql -u root -p
	mysql> exit
	Decision:
	$ sudo apt install php libapache2-mod-php php-mysql
	$ php -v
	$ cat /etc/php/8.1/apache2/php.ini | grep upload_max_filesize
	upload_max_filesize = 2M
	$ cat /etc/php/8.1/apache2/php.ini | grep post_max_size
	post_max_size = 8M
	$ cat /etc/php/8.1/apache2/php.ini | grep memory_limit
	memory_limit = 128M
	$ cat /etc/php/8.1/apache2/php.ini | grep max_execution_time
	max_execution_time = 30
	$ cat /etc/php/8.1/apache2/php.ini | grep max_input_vars
	;max_input_vars = 1000
	$ cat /etc/php/8.1/apache2/php.ini | grep max_input_time
	; max_input_time
	max_input_time = 60
	$ sudo vim /etc/php/8.1/apache2/php.ini
	$ cat /etc/php/8.1/apache2/php.ini | grep upload_max_filesize
	upload_max_filesize = 32M
	$ cat /etc/php/8.1/apache2/php.ini | grep post_max_size
	post_max_size = 48M
	$ cat /etc/php/8.1/apache2/php.ini | grep memory_limit
	memory_limit = 256M
	$ cat /etc/php/8.1/apache2/php.ini | grep max_execution_time
	max_execution_time = 600
	$ cat /etc/php/8.1/apache2/php.ini | grep max_input_vars
	max_input_vars = 3000
	$ cat /etc/php/8.1/apache2/php.ini | grep max_input_time
	; max_input_time
	max_input_time = 1000
	$ sudo service apache2 restart
	Decision:
	$ sudo mkdir /var/www/tdomain
	$ sudo chown -R $USER:$USER /var/www/tdomain
	$ sudo vim /etc/apache2/sites-available/tdomain.conf
	$ cat /etc/apache2/sites-available/tdomain.conf
	<VirtualHost *:80>
	    ServerName tdomain
	    ServerAlias www.tdomain
	    ServerAdmin webmaster@localhost
	    DocumentRoot /var/www/tdomain
	    ErrorLog ${APACHE_LOG_DIR}/error.log
	    CustomLog ${APACHE_LOG_DIR}/access.log combined
	</VirtualHost>
	$ sudo a2ensite tdomain
	$ sudo a2dissite 000-default
	$ sudo apache2ctl configtest
	$ sudo systemctl reload apache2
	$ vim /var/www/tdomain/index.html
	$ cat /var/www/tdomain/index.html
	<html>
	  <head>
	    <title>tdomain website</title>
	  </head>
	  <body>
	    <h1>Hello World!</h1>
	    <p>This is the landing page of <strong>tdomain</strong>.</p>
	  </body>
	</html>
	$ google-chrome http://127.0.0.1
	Decision:
	$ cat /etc/apache2/mods-enabled/dir.conf
	<IfModule mod_dir.c>
	    DirectoryIndex index.html index.cgi index.pl index.php index.xhtml index.htm
	</IfModule>
	# vim: syntax=apache ts=4 sw=4 sts=4 sr noet
	$ sudo vim /etc/apache2/mods-enabled/dir.conf
	$ cat /etc/apache2/mods-enabled/dir.conf
	<IfModule mod_dir.c>
	    DirectoryIndex index.php index.html index.cgi index.pl index.php index.xhtml index.htm
	</IfModule>
	# vim: syntax=apache ts=4 sw=4 sts=4 sr noet
	$ sudo systemctl reload apache2
	$ vim /var/www/tdomain/info.php
	$ cat /var/www/tdomain/info.php
	<?php
	phpinfo();
	$ google-chrome http://127.0.0.1/info.php
	$ sudo rm /var/www/tdomain/info.php
	Decision:
	https://dbdesigner.page.link/K8tSW7SdzLgPHV2S9
	$ sudo mysql -u root -p
	mysql> create database tbase;
	mysql> CREATE USER 'tuser'@'%' IDENTIFIED BY 'tpassword';
	mysql> GRANT ALL ON tbase.* TO 'tuser'@'%';
	mysql> exit
	$ mysql -u tuser -p
	mysql> show databases;
	+--------------------+
	| Database           |
	+--------------------+
	| information_schema |
	| performance_schema |
	| tbase              |
	+--------------------+
	3 rows in set (0.07 sec)
	mysql> create table tbase.ttable1
	    (ttable1_id INT PRIMARY KEY AUTO_INCREMENT,
	    content VARCHAR(255));
	CREATE TABLE tbase.ttable1
	    (ttable1_id INT PRIMARY KEY AUTO_INCREMENT,
	    column1 VARCHAR(255),
	    column2 VARCHAR(255),
	    column3 VARCHAR(255),
	    column4 VARCHAR(255),
	    column5 Date,
	    column6 Date);
	mysql> INSERT INTO tbase.ttable1
	    (column1, column2)
	VALUES
	    ("text1","text2"),
	    ("text3","text4"),
	    ("text5","text6"),
	    ("text7","text8");
	mysql> select * from tbase.ttable1;
	+------------+---------+---------+---------+---------+---------+---------+
	| ttable1_id | column1 | column2 | column3 | column4 | column5 | column6 |
	+------------+---------+---------+---------+---------+---------+---------+
	|          1 | text1   | text2   | NULL    | NULL    | NULL    | NULL    |
	|          2 | text3   | text4   | NULL    | NULL    | NULL    | NULL    |
	|          3 | text5   | text6   | NULL    | NULL    | NULL    | NULL    |
	|          4 | text7   | text8   | NULL    | NULL    | NULL    | NULL    |
	+------------+---------+---------+---------+---------+---------+---------+
	4 rows in set (0.00 sec)
	mysql> CREATE TABLE tbase.ttable2
	    (ttable2_id INT PRIMARY KEY AUTO_INCREMENT,
	    columnId INT,
	    column1 VARCHAR(500),
	    FOREIGN KEY (columnId) REFERENCES tbase.ttable1 (ttable1_id));
	mysql> INSERT INTO tbase.ttable2
	    (columnId, column1)
	VALUES
	    (1, "text9"),
	    (1, "text10"),
	    (2, "text11"),
	    (3, "text12"),
	    (4, "text13");
	mysql> select * from tbase.ttable2;
	+------------+----------+---------+
	| ttable2_id | columnId | column1 |
	+------------+----------+---------+
	|          1 |        1 | text9   |
	|          2 |        1 | text10  |
	|          3 |        2 | text11  |
	|          4 |        3 | text12  |
	|          5 |        4 | text13  |
	+------------+----------+---------+
	5 rows in set (0.00 sec)
	mysql> select * from tbase.ttable2
	    inner join tbase.ttable1
	    on ttable1.ttable1_id = ttable2.columnId;
	+------------+----------+---------+------------+---------+---------+---------+---------+---------+---------+
	| ttable2_id | columnId | column1 | ttable1_id | column1 | column2 | column3 | column4 | column5 | column6 |
	+------------+----------+---------+------------+---------+---------+---------+---------+---------+---------+
	|          1 |        1 | text9   |          1 | text1   | text2   | NULL    | NULL    | NULL    | NULL    |
	|          2 |        1 | text10  |          1 | text1   | text2   | NULL    | NULL    | NULL    | NULL    |
	|          3 |        2 | text11  |          2 | text3   | text4   | NULL    | NULL    | NULL    | NULL    |
	|          4 |        3 | text12  |          3 | text5   | text6   | NULL    | NULL    | NULL    | NULL    |
	|          5 |        4 | text13  |          4 | text7   | text8   | NULL    | NULL    | NULL    | NULL    |
	+------------+----------+---------+------------+---------+---------+---------+---------+---------+---------+
	5 rows in set (0.00 sec)
	mysql> exit
	$ vim /var/www/tdomain/index.php
	$ cat /var/www/tdomain/index.php
	<?php
	$user = "tuser";
	$password = "tpassword";
	$database = "tbase";
	$table1 = "ttable1";
	$table2 = "ttable2";
	try {
	    $db = new PDO("mysql:host=localhost;dbname=$database", $user, $password);
	    $query = $db->query("
	        select * from $database.$table2
	        inner join $database.$table1
	        on $table1.experience_id=$table2.experienceId;
	    ");
	    foreach($query as $row) {
	        echo '
	        <li><strong>
	        ' . $row['column1'] . '
	        -
	        ' . $row['column2'] . '
	        :</strong>
	        ' . $row['column3'] . '
	        ;
	        ' . $row['column4'] . '
	        ;
	        ' . $row['column5'] . '
	        ;
	        ' . $row['column6'] . '
	        </li>
	        ';
	    }
	} catch (PDOException $e) {
	    print "Error!: " . $e->getMessage() . "<br/>";
	    die();
	}
	$ google-chrome http://127.0.0.1/index.php
	Decision:
	$ sudo apt update
	$ sudo apt install phpmyadmin php-mbstring php-zip php-gd php-json php-curl
	$ sudo apt install php8.1-fpm php8.1 libapache2-mod-php8.1 php8.1-common php8.1-mysql php8.1-xml php8.1-xmlrpc php8.1-imagick php8.1-cli php8.1-imap php8.1-opcache php8.1-soap php8.1-intl php8.1-bcmath unzip
	...
	granting access to database phpmyadmin for phpmyadmin@localhost: failed.
	error encountered creating user:
	mysql said: ERROR 1819 (HY000) at line 1: Your password does not satisfy the cur
	rent policy requirements
	dbconfig-common: phpmyadmin configure: aborted.
	dbconfig-common: flushing administrative password
	dpkg: error processing package phpmyadmin (--configure):
	 installed phpmyadmin package post-installation script subprocess returned error
	 exit status 1
	Processing triggers for libapache2-mod-php8.1 (8.1.2-1ubuntu2.14) ...
	...
	Errors were encountered while processing:
	 phpmyadmin
	E: Sub-process /usr/bin/dpkg returned an error code (1)
	$ mysql -u root -p
	mysql> UNINSTALL COMPONENT "file://component_validate_password";
	mysql> exit
	$ sudo apt install phpmyadmin
	...
	granting access to database phpmyadmin for phpmyadmin@localhost: success.
	verifying access for phpmyadmin@localhost: success.
	creating database phpmyadmin: success.
	verifying database phpmyadmin exists: success.
	populating database via sql...  done.
	dbconfig-common: flushing administrative password
	$ mysql -u root -p
	mysql> INSTALL COMPONENT "file://component_validate_password";
	mysql> exit
	$ sudo phpenmod mbstring
	$ sudo systemctl restart apache2
	$ mysql -u root -p
	mysql> SELECT user,authentication_string,plugin,host FROM mysql.user;
	mysql> exit
	$ sudo cp /etc/phpmyadmin/apache.conf /etc/apache2/conf-available/phpmyadmin.conf
	$ sudo a2enconf phpmyadmin.conf
	$ systemctl reload apache2
	$ google-chrome http://127.0.0.1/phpmyadmin
	Decision:
	$ google-chrome https://hosting.timeweb.ru/
	$ ssh -X root@IP
	# sudo passwd root
	# sudo apt update
	# sudo apt upgrade
	# adduser tuser
	# usermod -aG sudo tuser
	# ufw app list
	Available applications:
	  OpenSSH
	# ufw allow OpenSSH
	# ufw enable
	# ufw status
	Status: active
	To                         Action      From
	--                         ------      ----
	OpenSSH                    ALLOW       Anywhere                  
	OpenSSH (v6)               ALLOW       Anywhere (v6)   
	# exit
	$ ssh -X tuser@IP
	$ sudo apt install apache2
	$ sudo ufw app list
	Available applications:
	  Apache
	  Apache Full
	  Apache Secure
	  OpenSSH
	$ sudo ufw allow in "Apache Full"
	Rule added
	Rule added (v6)
	$ google-chrome http://IP
	$ sudo apt install mysql-server
	$ sudo mysql_secure_installation
	$ sudo mysql
	mysql> ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'tP@ssw0rd';
	mysql> CREATE USER 'tuser'@'%' IDENTIFIED BY 'tP@ssw0rd';
	mysql> CREATE DATABASE tdomain;
	mysql> GRANT ALL ON tdomain.* TO 'tuser'@'%'
	mysql> exit
	$ sudo apt install php libapache2-mod-php php-mysql
	$ sudo mkdir /var/www/tdomain
	$ sudo chown -R $USER:$USER /var/www/tdomain
	$ sudo vim /etc/apache2/sites-available/tdomain.conf
	$ cat /etc/apache2/sites-available/tdomain.conf
	<VirtualHost *:80>
	    ServerName tdomain
	    ServerAlias www.tdomain
	    ServerAdmin webmaster@localhost
	    DocumentRoot /var/www/tdomain
	    ErrorLog ${APACHE_LOG_DIR}/error.log
	    CustomLog ${APACHE_LOG_DIR}/access.log combined
	</VirtualHost>
	$ sudo vim /etc/apache2/sites-available/tdomain.conf
	$ sudo a2ensite tdomain
	$ sudo a2dissite 000-default
	$ sudo systemctl reload apache2
	$ vim /var/www/tdomain/index.php
	$ google-chrome http://IP
	Task:
	Эспорт и импорт баз данных
	Decision:
	$ mysql -V
	mysql  Ver 8.0.34-0ubuntu0.22.04.1 for Linux on x86_64 ((Ubuntu))
	$ exit
	$ mysql -V
	mysql  Ver 8.0.34-0ubuntu0.22.04.1 for Linux on x86_64 ((Ubuntu))
	$ sudo mysql -u root
	mysql> SELECT User, Host FROM mysql.user;
	    +------------------+-----------+
	    | User             | Host      |
	    +------------------+-----------+
	    | root             | localhost |
	    | tuser            | localhost |
		+------------------+-----------+
	    6 rows in set (0.43 sec)
	mysql> SHOW DATABASES;
	    +--------------------+
	    | Database           |
	    +--------------------+
	    | tdomain            |
	    +--------------------+
	    6 rows in set (0.80 sec)
	mysql> exit
	$ mysqldump -u tuser -p tdb > data-dump.sql
	Enter password:
	    mysqldump: Got error: 1045: Access denied for user 'tuser'@'localhost' (using password: YES) when trying to connect
	$ mysqldump -u root -p tdomain > tdomain.sql
	Enter password:
	    mysqldump: Got error: 1698: Access denied for user 'root'@'localhost' when trying to connect
	$ mysqldump -u root -p --opt tdomain > tdomain.sql
	$ ls tdomain.sql
	tdomain.sql
	$ scp tdomain.sql tuser@IP:/home/tuser
	$ scp -r /var/www/tdomain/* tuser@IP:/var/www/tdomain/
	$ ssh -X tuser@IP
	$ mysql -u root -p tdomain < tdomain.sql
	$ mysql -u tuser -p
	mysql> show databases;
	+--------------------+
	| Database           |
	+--------------------+
	| tdomain            |
	| information_schema |
	| performance_schema |
	+--------------------+
	mysql> USE tdomain;
	$ sudo apt install phpmyadmin php-mbstring php-zip php-gd php-json php-curl
	$ mysql -u root -p
	mysql> UNINSTALL COMPONENT "file://component_validate_password";
	mysql> exit
	$ sudo apt install phpmyadmin
	$ sudo apt install php8.1-fpm php8.1 libapache2-mod-php8.1 php8.1-common php8.1-mysql php8.1-xml php8.1-xmlrpc php8.1-imagick php8.1-cli php8.1-imap php8.1-opcache php8.1-soap php8.1-intl php8.1-bcmath unzip
	$ mysql -u root -p
	mysql> INSTALL COMPONENT "file://component_validate_password";
	mysql> exit
	$ sudo phpenmod mbstring
	$ sudo systemctl restart apache2
	$ sudo cp /etc/phpmyadmin/apache.conf /etc/apache2/conf-available/phpmyadmin.conf
	$ sudo a2enconf phpmyadmin.conf
	$ exit
	$ google-chrome http://IP/ &
	$ google-chrome http://IP/phpmyadmin & 
	Decision:
	$ exit
	# virsh shutdown ubuntu22.04
	Source:
	https://winitpro.ru/index.php/2020/02/10/virsh-upravlenie-virtualnymi-mashinami-kvm/
	https://winitpro.ru/index.php/2020/02/04/ustanovka-zapusk-kvm-v-linux-centos/
	https://www.server-world.info/en/note?os=CentOS_Stream_9&p=kvm&f=1
	https://www.server-world.info/en/note?os=CentOS_Stream_9&p=initial_conf&f=3
	https://www.server-world.info/en/note?os=CentOS_Stream_9&p=kvm&f=2
	https://bozza.ru/art-260.html
	https://www.digitalocean.com/community/tutorials/how-to-install-linux-apache-mysql-php-lamp-stack-on-ubuntu-22-04
	https://losst.pro/ustanovka-chrome-v-ubuntu-18-04?ysclid=lmdflkvc3v463974954
	https://qna.habr.com/q/439469?ysclid=lmdgkb49q827401606
	https://steptuser.org/course/63054/syllabus
	https://metanit.com/sql/mysql/2.5.php
	https://metanit.com/sql/mysql/5.2.php
	https://www.digitalocean.com/community/tutorials/how-to-install-and-secure-phpmyadmin-on-ubuntu-20-04
	https://serverspace.ru/support/help/osnovnye-komandy-ufw/
	https://www.tutsmake.com/how-to-install-lamp-apache-mysql-php-in-ubuntu-22-04/
	https://www.php.net/manual/ru/faq.html.php
	https://www.8host.com/blog/kak-rabotayut-stroki-v-php/
	https://www.youtube.com/watch?v=FxwPQkP3OGY&t=611s
	https://timeweb.com/ru/community/articles/kak-ustanovit-stek-lamp-na-ubuntu-20-04
	https://wiki.merionet.ru/articles/perenos-bazy-dannyx-mysql-so-starogo-na-novyj-server