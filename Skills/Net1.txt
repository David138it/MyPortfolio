Mail for feedback: David138it@gmail.com

Каналы Связи
    Decision:
    https://github.com/David138it/MyPortfolio/tree/main/TaskDecision/Engineer-Isu/Net/КаналыСвязи/

Измерительные Вычислительные Системы
    Decision:
    https://github.com/David138it/MyPortfolio/tree/main/TaskDecision/Engineer-Isu/Net/ИзмерительныеВычислительныеСистемы/

Технология Широкополосного Доступа
    Decision:
    https://github.com/David138it/MyPortfolio/tree/main/TaskDecision/Engineer-Isu/Net/ТехнологияШирокополосногоДоступа/

Беспроводные Локальные Сети
    Task:
    Организация телефонной связи через сеть Интернет с использованием шлюзов
    Необходимое оборудование:
    1. Рабочая станция - 2 шт.
    2. Адаптер для подключения телефонов к VoIP D-link DVG – 7111S - 2 шт.
    3. Интегрированный телефон – 2 шт.
    Необходимо собрать установку согласно схеме Панели шлюза
    Установим телефонную связь через Интернет при помощи шлюзов
    Decision:
    Для доступа к Web-интерфейсу настройки откройте Web-браузер и введите IP-адрес DVG-7111S, как показано - Получаем доступ к веб-интерфейсу DVG-7111S. Настраиваем WAN адрес первого компьютера (шлюза): Setup -> Internet Setup.
    Отключая регистрацию на всех SIP Proxy-серверах, задаем порту FXO номер 601, а порту FXO задаем служебный номер 101.
    Задаем в адресной книге номера для перевода звонков на шлюз FXS. (Advanced -> VoIP -> Phone Book).
    Включаем режим HotLine, указываем номера портов удаленного шлюза(Advanced -> VoIP -> Hot Line) - Перезагружаем первый шлюз. То же самое проделываем и для второго шлюза, изменяя IP-адрес - Отключая регистрацию на всех SIP Proxy-серверах, задаем порту FXO номер 701, а порту FXO задаем номер 102. - Задаем в адресной книге номера для перевода звонков на шлюз FXS. (Advanced -> VoIP -> Phone Book) - Включаем режим HotLine, указываем номера портов удаленного шлюза(Advanced -> VoIP -> Hot Line) - Перезагружаем шлюз. Далее можем проверить работоспособность всей установки, набрав, к примеру, номер 101 с первого телефона. Тем самым убедимся, что связь со вторым телефоном налажена. Если разрешим Hot Line порта FXS на обоих шлюзах, то звонок будет совершаться сразу же после поднятия трубки одного из телефонов.
    Task:
    Развертывание и конфигурирование беспроводной сети топологии Ad-Hoc
    1. Необходимое оборудование:
    2. Рабочая станция - 2 шт.
    3. Беспроводной адаптер - 2 шт.
    Установка драйвера беспроводного сетевого адаптера.
    Decision:
    Запустите установку драйвера беспроводного адаптера. Следуйте инструкциям мастера установки.
    Рассмотрим процедуру установки на примере USB-адаптера DWA-160. Кроме драйвера беспроводного адаптера, будет установлена еще и утилита для конфигурирования беспроводных подключений D-Link Connection Manager (Wireless Connection Manager). Подключите адаптер к USB-порту компьютера и нажмите кнопку «Далее».
    Для подключения к беспроводной сети можно ввести идентификатор (SSID) и ключ шифрования вручную, либо воспользоваться мастером WPS. Выберите первый способ – вручную.
    Укажите SSID беспроводной сети, к которой должен подключиться адаптер, либо нажмите кнопку Scan для отображения списка доступных сетей.
    В списке доступных беспроводных сетей выберите желаемую и нажмите кнопку «Далее.
    Установка завершена. Нажмите кнопку «Готово». Убедитесь, что адаптер был успешно установлен.
    Task:
    Настройка сетевого адаптера для работы в сети Ad-Hoc
    Decision:
    Для выполнения задания потребуются два компьютера и два беспроводных USB- адаптера DWA-160. На первом компьютере откройте утилиту D-Link Connection Manager, установленную в п.1.1, щелкнув по ее иконке в панели задач Windows
    Перейдите на вкладку «Мои беспроводные сети».Для создания нового профиля настроек нажмите кнопку «Новый».В окне «настройки профиля» укажите: Тип сети: Ad-hoc; SSID: сlassroom243
    На втором компьютере откройте утилиту D-Link Connection Manager и в списке доступных сетей найдите сеть с SSID сlassroom243. Подключитесь к ней, нажав кнопку «Подключить».
    Установите IP-адреса беспроводным интерфейсам компьютеров:
    Первый компьютер: IP-адрес 192.168.0.100; Маска 255.255.255.0;
    Второй компьютер: IP-адрес 192.168.0.101; Маска 255.255.255.0;
    При помощи команды ping протестируйте возможность взаимодействия компьютеров.
    Task:
    Развертывание и конфигурирование офисных беспроводных сетей инфраструктурной топологии
    Необходимое оборудование:
    1. Точка доступа - 1 шт.
    2. Рабочая станция - 3 шт.
    3. Беспроводной адаптер - 2 шт.
    4. Коммутатор – 1 шт.
    Начальная настройка точки доступа DAP-2310
    Decision:
    Подключите точку доступа и одну рабочую станцию (компьютер 1) к коммутатору.К двум другим рабочим станциям (компьютеры 2 и 3) подключите беспроводные адаптеры.
    С компьютера 1 получите доступ к Web-интерфейсу точки доступа, открыв браузер и введя IP-адрес точки доступа. IP-адрес DAP-2310, 192.168.0.50, маска – 255.255.255.0. При необходимости, смените IP-адрес рабочей станции, чтобы он принадлежал сети 192.168.0.0/24. Имя администратора точки доступа, используемое по умолчанию – admin, пароля нет.
    В зоне 1 расположено меню настроек, в зоне 3 отображаются текущие настройки устройства и поля для их изменения.В зоне 2 осуществляется доступ к настройкам Administration Settings, Firmware and SSL Certification Upload, Configuration File (пункт меню Maintenance), Save and Activate, Discard Changes (пункт меню Configuration), System Settings (пункт меню System). Для изменения IP-адреса точки доступа выберите в меню пункт Basic Settings-LAN. При необходимости измените IP-адрес точки доступа. Помните, что IP-адреса в локальной сети должны быть уникальными. Основные беспроводные настройки находятся в меню Basic Settings-Wireless.По умолчанию на точке доступа DAP-2310 настроен SSID dlink, частотный канал выбирается автоматически (наименее занятый).
    Измените SSID c dlink на test.Отключите автоматический выбора канала (Auto Channel Selection) и выберите 10 канал (Channel). После чего нажмите на странице кнопку Save для сохранения сделанных настроек. В меню Configuration выберите пункт Save and Activate для активации настроек. Дождитесь перезагрузки точки доступа.
    Task:
    Настройка сетевого адаптера для работы в беспроводной сети инфраструктурной топологии
    Decision:
    Подключите адаптеры беспроводной сети к рабочим станциям 2 и 3. Запустите D-Link Connection Manager. В списке доступных сетей выберите сеть с SSID test, подключитесь к ней. Установите беспроводному интерфейсу рабочей станции 2 IP-адрес 192.168.0.1 с маской 255.255.255.0, а беспроводному интерфейсу рабочей станции 3 IP-адрес 192.168.0.2 с маской 255.255.255.0.
    При помощи команды ping проверьте возможность взаимодействия компьютеров 2 и 3 друг с другом. При помощи команды ping проверьте возможность взаимодействия компьютеров 2 и 3 с компьютером 1. Информацию о клиентах, ассоциированных с точкой доступа, можно посмотреть в Status-Client Information.
    Task:
    Настройка точки доступа в качестве DHCP-сервера
    Decision:
    Настройте на точке доступа DHCP-сервер (меню Advanced Settings-DHCP Server Dynamic Pool Settings). Настройте беспроводные интерфейсы рабочих станций 2 и 3 на динамическое получение IP-адресов. Протестируйте при помощи команды ping возможность взаимодействия их друг с другом.
    Task:
    Настройка точки доступа DAP-2310 для работы в качестве беспроводного клиента
    Decision:
    Подключите точку доступа DAP-2310 к порту Ethernet рабочей станции 2.В меню Basic Settings-Wireless установите режим работы точки доступа Wireless client, затем нажмите кнопку Scan. Точка доступа просканирует частотный диапазон на наличие доступных беспроводных сетей. Выберите беспроводную сеть для подключения (на рисунке это сеть с SSID zenitcity). Сохраните и активируйте сделанные настройки.При помощи команды ping протестируйте возможность взаимодействия рабочей станции 2 с рабочими станциями 1 и 3.
    Развертывание и конфигурирование территориально распределенных сетей типа мост
    На точках доступа DAP-2310 соединения типа мост носят название WDS (Wireless Distribution System). Выбирая в меню Basic Settings-Wireless режим работы WDS, можно построить мост между двумя, или более, проводными сетями. При помощи режима WDS with AP можно построить мост между беспроводными сетями.
    Task:
    Конфигурирование соединения типа WDS
    Необходимое оборудование:
    1. Точка доступа - 2 шт.
    2. Рабочая станция - 2 шт.
    3. Коммутатор - 2 шт.
    Decision:
    Подключите рабочую станцию 1 и точку доступа 1 к одному коммутатору, а рабочую станцию 2 и точку доступа 2 – к другому
    Установите проводному интерфейсу рабочей станции 1 IP-адрес 192.168.0.1 с маской 255.255.255.0, а рабочей станции 2 – IP-адрес 192.168.0.2 с маской 255.255.255.0.
    Настройте IP-адреса точкам доступа: 192.168.0.51/24 точке доступа 1; 192.168.0.52/24 точке доступа 2.
    Настройте точки доступа 1 и 2 для работы в режиме моста (WDS). Для этого в меню Basic Settings-Wireless нужно: Выбрать режим работы – WDS; Указать SSID (одинаковый на точках доступа 1 и 2); Выбрать частотный канал и его ширину (одинаково на точках доступа 1 и 2); Указать МАС-адрес удаленной точки доступа; Сохранить и активировать сделанные настройки.
    При помощи команды ping между рабочими станциями 1 и 2 протестируйте работоспособность беспроводного моста.
    Task:
    Конфигурирование соединения типа WDS with AP
    Необходимое оборудование:
    1. Точка доступа - 2 шт.
    2. Рабочая станция - 2 шт.
    3. Беспроводной адаптер - 2 шт.
    Decision:
    Используя схему подключения упражнения 2.3, перенастройте точки доступа для работы в режиме WDS with AP.Для этого в меню Basic Settings-Wireless нужно произвести следующие настройки: выбрать режим работы – WDS with AP (на точках доступа 1 и 2); указать SSID (одинаковый на точках доступа 1 и 2); выбрать частотный канал и его ширину (одинаково на точках доступа 1 и 2); указать МАС-адрес удаленной точки доступа; сохранить и активировать сделанные настройки.
    Подключите к рабочим станциям 1 и 2 беспроводные адаптеры.Ассоциируйте рабочую станцию 1 с беспроводной сетью точки доступа 1, а рабочую станцию 2 –точки доступа 2.
    Установите беспроводному интерфейсу рабочей станции 1 IP-адрес 192.168.0.11 с маской 255.255.255.0, а рабочей станции 2 - IP-адрес 192.168.0.12 с маской 255.255.255.0
    При помощи команды ping между рабочими станциями 1 и 2 протестируйте работоспособность беспроводного моста.
    Дополнительные настройки точки доступа
    Task:
    Использование Multi-SSID
    Необходимое оборудование:
    1. Точка доступа - 1 шт.
    2. Рабочая станция - 4 шт.
    3. Беспроводной адаптер - 2 шт.
    4. Коммутатор с поддержкой 802.1Q VLAN – 1 шт.
    Decision:
    Программное обеспечение точки доступа DAP-2310 позволяет создавать до 7 семи дополнительных SSID и разбивать, таким образом, большую беспроводную сеть на несколько беспроводных сегментов. Каждый сегмент, ассоциированный с соответствующим SSID, может иметь свои настройки метода аутентификации и шифрования. Применяя технологию VLAN в беспроводных сетях, в настройках точки доступа устанавливают соответствие каждого SSID определенной VLAN. Беспроводные клиенты могут обмениваться кадрами только с клиентами, находящимися в той же VLAN. Точка доступа может добавлять тэг 802.1Q перед передачей кадра в проводную сеть.
    В меню Advanced Setting-Multi-SSID включите поддержку Multi-SSID и создайте два вторичных SSID – guest и sales:
    Поставьте галочку Enable Multi-SSID;
    В поле Index выберите SSID 1;
    В поле SSID напишите guest;
    Нажмите кнопку Add;
    В поле Index выберите SSID 2;
    В поле SSID напишите sales;
    Нажмите кнопку Add;
    Сохраните настройки, нажав кнопку Save.
    Теперь надо настроить соответствие SSID и VLAN. Трафик беспроводной сети с SSID guest должен направляться в VLAN guest (VID 10), а беспроводной сети с SSID sales – в VLAN sales (VID 20). Настройки выполняются в меню Advanced settings-VLAN вкладка Add/Edit VLAN.
    Создайте VLAN guest c VID 10
    включите поддержку VLAN: VLAN Status – Enable;в поле VLAN ID (VID) укажите идентификатор VLAN, а в поле VLAN Name;LAN-интерфейс точки доступа включите в VLAN как тегированный порт;MSSID-порт S-1, соответствующий SSID guest, включите в VLAN как нетегированный. Остальные порты – как не включенные в эту VLAN (Not Member);Порты WDS (WDS Ports) так же не включены в данную VLAN.
    Аналогичным образом создайте VLAN sales с VID 20.Проверьте, что VLAN созданы
    Теперь нужно настроить идентификаторы VLAN на портах (PVID).В схеме этой практической работы используется управляемый коммутатор DLink DES-3200-28. На нем также необходимо настроить VLAN.
    config vlan default delete 5,7
    create vlan guest tag 10
    config vlan guest add tagged 1
    config vlan guest add untagged 5
    create vlan sales tag 20
    config vlan sales add tagged 1
    config vlan sales add untagged 7
    Рабочую станцию 2 подключите к порту 5 коммутатора, а рабочую станцию 1 – к порту 7.К рабочим станциям 3 и 4 подключите беспроводные адаптеры. Рабочую станцию 3 подключите к беспроводной сети guest, а рабочую станцию 4 – к беспроводной сети sales.
    Настройте IP-адреса на интерфейсах компьютеров следующим образом:
    IP-адрес рабочей станции 1: 192.168.0.21/24;
    IP-адрес рабочей станции 2: 192.168.0.11/24;
    IP-адрес рабочей станции 3: 192.168.0.10/24;
    IP-адрес рабочей станции 4: 192.168.0.20/24;
    Рабочие станции 2 и 3 находятся в одной VLAN. При помощи команды ping протестируйте возможность их взаимодействия. Рабочие станции 1 и 4 также находятся в одной VLAN. При помощи команды ping протестируйте возможность их взаимодействия. Протестируйте возможность взаимодействия рабочих станций 1 и 2, 3 и 4.
    Task:
    Настройка запрета беспроводным клиентам взаимодействовать друг с другом
    Необходимое оборудование:
    1. Точка доступа - 1 шт.
    2. Рабочая станция - 5 шт.
    3. Беспроводной адаптер - 4 шт.
    4. Коммутатор – 1 шт.
    Decision:
    Подключите беспроводные адаптеры к рабочим станциям 2, 3, 4 и 5. Ассоциируйте с точкой доступа рабочие станции: 2 и 3 – в SSID sales, а 3 и 4 – в SSID guest.
    Настройте IP-адреса на проводном интерфейсе компьютера 1 и беспроводных интерфейсах компьютеров 2-5 следующим образом:
    IP-адрес рабочей станции 1: 192.168.0.1/24;
    IP-адрес рабочей станции 2: 192.168.0.10/24;
    IP-адрес рабочей станции 3: 192.168.0.11/24;
    IP-адрес рабочей станции 4: 192.168.0.20/24;
    IP-адрес рабочей станции 5: 192.168.0.21/24;
    Перейдите в меню Advanced Settings-Filters-WLAN Partition
    По умолчанию значение у Internal Station Connection – Enable (Включено). Это означает, что беспроводным клиентам разрешено взаимодействовать с другими рабочими станциями в своем и других SSID на точке доступа.
    Disable: беспроводные клиенты не могут взаимодействовать с другими клиентами, подключенными в тот же SSID, но могут взаимодействовать с клиентами в других SSID точки доступа.
    Guest mode: беспроводные клиенты не могут взаимодействовать с клиентами в том же или других SSID.
    C настройками по умолчанию для Internal Station Connection проверьте припомощи команды ping возможность рабочих станций 2 и 3 (SSID sales) взаимодействовать друг с другом и с рабочими станциями 4 и 5. Обмен ICMP пакетами должен быть успешным.
    Для Multi-SSID 2 sales установите значение для Internal Station Connection Disable. Сохраните и активируйте настройки.
    При помощи команды ping проверьте возможность рабочих станций 2 и 3 (SSID sales) взаимодействовать друг с другом и с рабочими станциями 4 и 5 (SSID guest). Обмен ICMP-пакетами между станциями 2 и 3 должен быть успешным, а со станциями 4 и 5 – нет.
    Для Multi-SSID 2 sales установите значение для Internal Station Connection – Guest mode. Сохраните и активируйте настройки.
    При помощи команды ping проверьте возможность рабочих станций 2 и 3 (SSID sales) взаимодействовать друг с другом и с рабочими станциями 4 и 5 (SSID guest). Обмен ICMP-пакетами между станциями в обоих случаях должен быть неуспешным.
    Верните заводские настройки опции Internal Station Connection.
    Task:
    Интегрирование проводного и беспроводного каналов - Link Integrity
    Decision:
    Если Ethernet-канал между LAN и точкой доступа отключается, то опция включенная опция Link Integrity позволит автоматически диассоциировать беспроводных клиентов от точки доступа.
    Перейдите в меню Advanced Settings – WLAN Partition Web-интерфейса точки доступа. Включите опцию Link Integrity (Рис. 16). Сохраните и активируйте настройки.
    Отключите точку доступа от коммутатора локальной сети. Все беспроводные клиенты будут диассоциированы от точки доступа. Отключите опцию Link Integrity. Сохраните и активируйте настройки.
    Task:
    Настройка опции Ethernet to WLAN Access
    Decision:
    Опция Ethernet to WLAN Access разрешает передачу всех данных из проводной сети в беспроводную. По умолчанию опция включена (Enable). Если опцию отключить (Disable), то передача широковещательных и многоадресных пакетов из проводной сети в беспроводную, за исключением DHCP-пакетов, будет блокирована. При помощи команды ping протестируйте возможность передачи данных из сети Ethernet в беспроводную сеть.
    Task:
    Ограничение количества беспроводных клиентов
    Необходимое оборудование:
    1. Точка доступа - 1 шт.
    2. Рабочая станция - 3 шт.
    3. Беспроводной адаптер - 2 шт.
    Сбросьте настройки точки доступа к заводским.Подключите беспроводные адаптеры к рабочим станциям 2 и 3.Ассоциируйте рабочие станции 2 и 3 с точкой доступа.
    Перейдите в меню Advanced Settings – Performance Web-интерфейса точки доступа. Включите контроль количества беспроводных клиентов (Connection Limit – Enable) и ограничьте количество обслуживаемых клиентов (User Limit) одним. Сохраните и активируйте настройки.
    Протестируйте возможность ассоциирования с точкой доступа двух беспроводных клиентов – рабочих станций 2 и 3. Ассоциироваться с точкой доступа должна только одна из них.
    Отключите контроль количества беспроводных клиентов (Connection Limit –Disable). Сохраните и активируйте настройки.
    На точке доступа включите интегрирование беспроводного и проводного каналов связи (Link Integrate).Отключите от сети Ethernet-порт точки доступа.Протестируйте возможность ассоциирование клиентов с точкой доступа в этом случае.
    Task:
    Обеспечение безопасности беспроводных сетей
    Фильтрация ассоциаций с точкой доступа на основе МАС-адресов
    Необходимое оборудование:
    1. Точка доступа - 1 шт.
    2. Рабочая станция - 3 шт.
    3. Коммутатор – 1 шт.
    4. Беспроводной адаптер - 2 шт.
    Decision:   
    Используйте следующие настройки IP-адресов проводного интерфейса компьютера 1 и беспроводных интерфейсов компьютеров 2 и 3:
    Компьютер 1: 192.168.0.1/24;
    Компьютер 2: 192.168.0.2/24;
    Компьютер 3: 192.168.0.3/24;
    Настройка точки доступа выполняется с компьютера 1.
    Сбросьте настройки точки доступа к заводским.Подключите беспроводные адаптеры к рабочим станциям 2 и 3. Откройте Web-интерфейс точки доступа, вкладку Basic Settings-Wireless, укажите режим работы - Access Point , SSID и частотный канал, как было описано в упражнении 2.1. В меню Filters-Wireless MAC ACL включите фильтрацию подключений к точке доступа по МАС-адресам: Access Control List – Accept. В этом случае фильтр будет действовать по типу «белого списка»: ассоциироваться с точкой доступа будет разрешено только устройствам, МАС-адреса которых будут содержаться в списке.
    В поле MAC Address укажите МАС-адрес беспроводного сетевого адаптера рабочей станции 1. Протестируйте возможность ассоциирования с точкой доступа рабочей станции 1. Протестируйте возможность ассоциирования с точкой доступа рабочей станции 2. На точке доступа измените фильтр на запрещающий: Access Control List – Reject. В этом случае фильтр будет действовать по типу «черного списка»: ассоциироваться с точкой доступа будет разрешено всем устройствам, кроме тех, чьи МАС-адреса будут содержаться в списке
    Сохраните и активируйте настройки.Протестируйте возможность ассоциирования с точкой доступа рабочей станции 1.Протестируйте возможность ассоциирования с точкой доступа рабочей станции 2.Отключите на точке доступа фильтрацию подключений к точке доступа по МАС-адресам.Протестируйте возможность ассоциирования с точкой доступа рабочих станций 1 и 2
    Task:
    Настройка шифрования WEP
    Decision:
    Откройте Web-интерфейс точки доступа, вкладку Basic Settings-Wireless, укажите режим работы - Access Point , SSID и частотный канал, как было описано в упражнении 2.1. Далее в поле Authentication ставим Shared Key 
    Так как аутентификация с общим ключом предполагает ещё и шифрование данных WEP, то в поле Encryption (Шифрование) активно только будет Enable (Включить). Выберите тип ключа (ASCII или Hex) и размер ключа. Вводите несколько ключей, последовательно выбирая в поле Key Index (Индекс ключа). При 64-битном ключе с типом ключа ASCII нужно ввести 5-значную последовательность, например pass1. Сохраните и активируйте настройки.
    На рабочих станциях 2 и 3 при помощи D-Link Wireless Connection Manager настройте аналогичные параметры и ассоциируйте с точкой доступа. При помощи команды ping протестируйте возможность взаимодействия рабочих станций 2 и 3 между собой и с рабочей станцией 1.
    Task:
    Настройка WPA-PSK
    Decision:
    Откройте Web-интерфейс точки доступа, вкладку Basic Settings-Wireless, укажите режим работы - Access Point , SSID и частотный канал, как было описано в упражнении 2.1. Далее в поле Authentication ставим WPA-Personal 
    Выберите WPA Mode: Auto, WPA Only или WPA2 Only. При использовании параметра Auto можно использовать обе версии WPA. Укажите парольную фразу (PassPhrase). Сохраните и активируйте настройки. В настройках беспроводных подключений рабочих станций 2 и 3 укажите аналогичные параметры. Помните, что парольная фраза (ключ) должна быть той же самой, что и указанная на точке доступа. Ассоциируйте рабочие станции 2 и 3 с точкой доступа.При помощи команды ping протестируйте возможность взаимодействия рабочих станций 2 и 3 между собой и с рабочей станцией 1.
    Decision:
    https://github.com/David138it/MyPortfolio/tree/main/TaskDecision/Engineer-Isu/Net/ЛокальноВычислительныеСети/
    Task:
    Исследуем Wi-Fi в канальном уровне.
    Для исследования сетей Wi-Fi под винду можно использовать inSSIDer, а под линукс linssid. При этом должно быть соединение через wifi, а не роутер
    Decision:
    $ sudo apt update
    $ sudo apt install linssid
    $ sudo linssid
    В  средней части программы - таблица с характеристиками сетей wifi, которая действует в зоне моего компьютера. В нижней части графическое представление использования спектра wifi в 2х диапазонах 2.4 Ггц и 5 ГГц.
    Наш компьютер подключен к точке доступа domru, Сеть работает на 2ом канале и в графике мы увидим, что наша сеть работает во втором канале, Показан мак адрес.
    В графике также увидим,что так как каналы пересекаются друг с другом (смотрим на нашу сеть), то наша сеть передает данные не только на 2 ом канале, но еще и на 1, 3, 4, 5, 6 каналах, хотя уровень на этих сигналах горадо ниже чем на 2ом.
    На втором канале также работают еще три другие сети. Лучше выбрать такой канал, где нет сетей с высоким уровнем сигнала, например,7. Давайте сделаем это в настройках роутера. Сейчас у нас стоит автоматический выбор канала. Это лучший выбор, потому что сети могут появляться и исчезать. Если выберете конкретный канал, то появится сеть через некоторое время имменно на этом канале
    с высоким уровнем сигнала и сеть перестанет работать.
    То есть выбираем канал, в нашем случае 7, сохраняем настройки и перезапускаем нашу сеть в панеле на рабочем столе. В https://www.speedtest.net/ можно проверить скорость интернета.
    Source:
    1. https://www.asozykin.ru/courses/networks_online

Wireshark
    Task:
    Протокол TLS. В wirеshark настраиваем фильтр по протоколу tls и дальше пишем адрес сайта, которого хотим открыть.
    Decision:
    $ nslookup asozykin.ru
        Server:        127.0.0.53
        Address:    127.0.0.53#53
        Non-authoritative answer:
        Name:    asozykin.ru
        Address: 185.215.4.10
    Дбавляем в wireshark  tls && ip.addr == 185.215.4.10 и откроем в браузере страницу asozykin.ru. Возращаемся в wireshark.
    Взаимодествие начинается с установки соединения. Первый пакет который передается - client hello (приветствие от клиента). В нем мы видим, что вложены протоколы tls, tcp, ipv4. Протокол Tls содержит три поля: content type - тип сообщения, версия, длина сообщения и затем идет протокол установки соединения - handshake protocol.
    В нем видим тип сообщения - client hello, версия, длина сообщения, random - случайное число сгенерированное клиентом, который используется для генерации разделяемого ключа. Клиент передает набор шифров - cipher suites. В набор шифров входит написание криптографических шифров, которые используются для защиты данных. Для каждого набора используется свой код и свое название. Название начинается с протокола - tls, затем идет тип протокола для обмена ключами - ecdhe, для цифровой подписи алгоритм - ecdsa, для симметричного шифрования используется - aes_128. во всех шифрах ecdhe для обмена ключами используется алгоритм ecdhe, означает, что в этих шифрах используется совершенно прямую секретность. А в шифрах RSA используется для обмена ключами, он не может совершить такую секретность. Клиент передает список всех наборов шифров, который поддерживает и в ответ от сервера в сообщений Server Hello, ожидает, что сервер выберет один из этих шифров. Затем идут расширения протокола TLS - extensions. Нас интересует расширение Server_name, оно указывает имя сервера. Это полезно если на одном и том же ip адресе работает несколько серверов.
    Смотрим что содержится в server Hello.
    Видим какой шифр выбрал server в cipher suites. Дальше происходит передача зашифрованных данных
    в encrrypted application data мы видим, что данные, которые передаются по сети зашифрованы, именно это и обеспечивает защиту.
    Task:
    Протокол DNS - Прикладной уровень. C помощью nslookup определим ip адрес веб-сервера yandex
    Decision:
    $ nslookup www.yandex.ru
        Server:     127.0.0.53
        Address:    127.0.0.53#53
        Non-authoritative answer:
        Name:   www.yandex.ru
        Address: 77.88.55.80
        Name:   www.yandex.ru
        Address: 5.255.255.80
        Name:   www.yandex.ru
        Address: 5.255.255.88
        Name:   www.yandex.ru
        Address: 77.88.55.88
        Name:   www.yandex.ru
        Address: 2a02:6b8:a::a
    В нашем случае 4 ip адреса у веб-сервера yandex версии ipv4 и один адрес 2a02:6b8:a::a версии ipv6. Non-authoritative answer - означает, что мы получили ответ не от сервера, который отвечает за зону yandex.ru, а от другого сервера - 127.0.0.53. Через веб-браузер подключимся по ip адресу. Сейчас почти везде используются виртуальные web-серверы (как в нашем случае), которые на одном IP-адресе обслуживают несколько сайтов. Поэтому для подключения к ним всегда нужно dns имя сайта, иначе виртуальный web-сервер не понимает, какой сайт запрашивается.
    Task:
    Запустим wireshark, в фильтре напишем dns, выполним еще раз запрос в консолеи смотрим в wireshark dns пакеты
    Decision:
    $ nslookup www.yandex.ru
        Server:     127.0.0.53
        Address:    127.0.0.53#53
        Non-authoritative answer:
        Name:   www.yandex.ru
        Address: 77.88.55.80
        Name:   www.yandex.ru
        Address: 5.255.255.80
        Name:   www.yandex.ru
        Address: 5.255.255.88
        Name:   www.yandex.ru
        Address: 77.88.55.88
        Name:   www.yandex.ru
    Вот он, пакет, который использует UDP протокол, порт - 53, порт отправителя - 56270.
    Протокол dns с номером транзакции 0х0b83
    Флаги: первый запрос, второй стандартный запрос, третий запрос на работу днс сервере в рекурсивном режиме. questions - в данных у нас находится одно поле с запросом ответов (answer), авторитетных серверов (authority) и дополнительных записей (additional).
    Запрос всео один в queries - www.yandex.ru, тип записи у него А, класс - IN (интернет), единственный класс, который используется в днс.
    Также использует udp протокол, в заголовке идентификатор транзакции - 0х0b83, во флагах - информация о том, что это ответ, с типом ответа - стандартный, сервер выполнил запрос в рекурсивном режиме (recursion available), ошибки не возникло (reply code). В данных у нас 1 запрос (questions) и 4 записи с ответом (answer rrs). Запрос, который мы уже видели (queries). и 4 ответа (answers), который содержит разные ip адреса (они совпадают с адресами в консоли). time to live - время, которое можно сохранить кеш за 271 секунд, длина записи - data length (4 байта).
    Также утилита nslookup отправила другой запрос в котором запрашивается запись АААА, это адрес Ipv6, идентификтор транзакции 34f5. и за ним же ответ с тем же самым иднтификатором транзакции.
    В разделе данных (AAAA address) у ннего содержится версия ipv6.
    Task:
    Типы записей DNS. Запрос записей разных типов
    Decision:
        nslookup -type=XXX yandex.ru
    Task:
    Запрос записей разных типов:
    Decision:
    $ nslookup -type=A www.yandex.ru
        Сервер: auth.hotelhighway.com
        Address: 172.27.0.1
        Не заслуживающий доверия ответ:
        Имя :     www.yandex.ru
        Addresses: 5.255.255.55
                    77.88.55.66
                    5.255.255.5
                    77.88.55.55
    $ nslookup -type=AAAA www.yandex.ru
        Сервер : auth.hotelhighway.com
        Address: 172.27.0.1
        Не заслуживающий доверия ответ:
        Имя :         www.yandex.ru
        Address:     2a02:6b8:a::a
    Task:
    C помощью nslookup определим ip адрес веб-сервера yandex
    Decision:
    $ nslookup www.yandex.ru
        Server:     127.0.0.53
        Address:    127.0.0.53#53
        Non-authoritative answer:
        Name:   www.yandex.ru
        Address: 77.88.55.50
        Name:   www.yandex.ru
        Address: 77.88.55.88
        Name:   www.yandex.ru
        Address: 5.255.255.5
        Name:   www.yandex.ru
        Address: 5.255.255.88
        Name:   www.yandex.ru
        Address: 2a02:6b8:a::a
    Task:
    Введем тип записи днс с компощью ключа type с запросом ipv4
    Decision:
    $ nslookup -type=A www.yandex.ru
        Server:     127.0.0.53
        Address:    127.0.0.53#53
        Non-authoritative answer:
        Name:   www.yandex.ru
        Address: 5.255.255.88
        Name:   www.yandex.ru
        Address: 5.255.255.5
        Name:   www.yandex.ru
        Address: 77.88.55.88
        Name:   www.yandex.ru
        Address: 77.88.55.50
    Task:
    Чтобы запросить адрес с версией ipv6 нужно указать тип AAAA
    Decision:
    $ nslookup -type=AAAA www.yandex.ru
        Server:     127.0.0.53
        Address:    127.0.0.53#53
        Non-authoritative answer:
        Name:   www.yandex.ru
        Address: 2a02:6b8:a::a
    Task:
    Определим адрес почтового сервера, которые принимают почту для домена
    Decision:
    $ nslookup -type=MX www.yandex.ru
        Server:     127.0.0.53
        Address:    127.0.0.53#53
        Non-authoritative answer:
        www.yandex.ru   mail exchanger = 10 mx.yandex.ru.
        Authoritative answers can be found from:
    Task:
    mx.yandex.ru - адрес сервера, 10 - его приоритет. Смотрим эту информацию в wireshark.
    Decision:
    Это запрос протокола. MX - тип записи. А вот ответ протокола:
    Preference - приоритет (10). дополнительные записи:
    Task:
    Поробуем запросить для gmail.com
    Decision:
    $ nslookup -type=MX gmail.com
        Server:     127.0.0.53
        Address:    127.0.0.53#53
        Non-authoritative answer:
        gmail.com   mail exchanger = 30 alt3.gmail-smtp-in.l.google.com.
        gmail.com   mail exchanger = 10 alt1.gmail-smtp-in.l.google.com.
        gmail.com   mail exchanger = 40 alt4.gmail-smtp-in.l.google.com.
        gmail.com   mail exchanger = 5 gmail-smtp-in.l.google.com.
        gmail.com   mail exchanger = 20 alt2.gmail-smtp-in.l.google.com.
        Authoritative answers can be found from:
    Здесь вместо одного сервера используется имен серверов с разными приоритетами. Впервую очередь используется сервис с наименьшим приоритетом, в нашем случае 5.
    Task:
    Дальше мы хотим узнать какие сервера отвечают за зону gmail.com
    Decision:
    $ nslookup -type=NS gmail.com
        Server:     127.0.0.53
        Address:    127.0.0.53#53
        Non-authoritative answer:
        gmail.com   nameserver = ns3.google.com.
        gmail.com   nameserver = ns1.google.com.
        gmail.com   nameserver = ns2.google.com.
        gmail.com   nameserver = ns4.google.com.
        Authoritative answers can be found from:
    Тут видим 4 сервера. Cмотрим в wireshark: Тут видим тип записи - NS. в зоне ответа ответе видим 4 записи с серверами ns3.google.com, ns1.google.com, ns2.google.com, ns4.google.com
    Task:
    Прямой запрос выглядит так:
    Decision:
    $ nslookup gmail.com
        Server:     127.0.0.53
        Address:    127.0.0.53#53
        Non-authoritative answer:
        Name:   gmail.com
        Address: 173.194.73.19
        Name:   gmail.com
        Address: 173.194.73.17
        Name:   gmail.com
        Address: 173.194.73.18
        Name:   gmail.com
        Address: 173.194.73.83
        Name:   gmail.com
        Address: 2a00:1450:4010:c0d::53
        Name:   gmail.com
        Address: 2a00:1450:4010:c0d::11
        Name:   gmail.com
        Address: 2a00:1450:4010:c0d::12
        Name:   gmail.com
        Address: 2a00:1450:4010:c0d::13
    Task:
    А обратный запрос используется для определения доменного имени компьютера по его ip адресу:
    Decision:
    $ nslookup 77.88.55.88
        88.55.88.77.in-addr.arpa    name = yandex.ru.
        Authoritative answers can be found from
    B wireshark запрос и ответ выглядят так:
    В запросе видим, что имя записано в специальном домене in-addr.arpa. это домен для реверсивной зоны и сам адрес у него записан наоборот, начиная с конца. тип записи - ptr, который используется в обратноых зонах днс, для того чтобы поставить соответсвие ip адресу компьютера доменное имя.
    DNS: итеративный и рекурсивный режим
    $ nslookup www.yandex.ru
        Server:     127.0.0.53
        Address:    127.0.0.53#53
        Non-authoritative answer:
        Name:   www.yandex.ru
        Address: 77.88.55.55
        Name:   www.yandex.ru
        Address: 5.255.255.5
        Name:   www.yandex.ru
        Address: 77.88.55.50
        Name:   www.yandex.ru
        Address: 5.255.255.50
        Name:   www.yandex.ru
        Address: 2a02:6b8:a::a
    127.0.0.53 - dns-сервер, который находится в локальной сети. Сервер работает в рекурсивном режиме. Сервер, который находится в локальной сети сам опрашивает все необходимые днс сервера и возращает нам уже готовый ответ. Посмотрим в Wireshark как задается желаемый режим взаимодействия с серверами dns в днс пакете:
    Ipv4, dst - айпи получателя, сервер который находится в локальной сети. Когда клиент отправляет запрос, он устанавливает флаг recursion desired (1), то есть просит сервер работать в рекурсивном режиме. у ответа сервера в поле флаги стоит реукрсия доступна (recursion available - 1), то есть сервер может работать в рекурсивном режиме.
    Но не все серверы могут работать в таком режиме. Серверы, которые обслуживают крупные доменные зоны (корневая доменная зона, зона room), работают только в декоративном режиме.
    Task:
    Попробуем в декоративном режиме получить ip адрес компьютера www.yandex.ru. Сначала нам нужно узнать адреса серверов, которые обслуживают корневой домен. В качестве записи указываем ns - name server, которые обслуживают зону и в качестве доменного имени указывает точку (корневой домен)
    Decision:
    $ nslookup -type=ns .
        Server:     127.0.0.53
        Address:    127.0.0.53#53
        Non-authoritative answer:
        .   nameserver = e.root-servers.net.
        .   nameserver = h.root-servers.net.
        .   nameserver = l.root-servers.net.
        .   nameserver = i.root-servers.net.
        .   nameserver = a.root-servers.net.
        .   nameserver = d.root-servers.net.
        .   nameserver = c.root-servers.net.
        .   nameserver = b.root-servers.net.
        .   nameserver = j.root-servers.net.
        .   nameserver = k.root-servers.net.
        .   nameserver = g.root-servers.net.
        .   nameserver = m.root-servers.net.
        .   nameserver = f.root-servers.net.
    Task:
    Пробуем запроситb интересующее нас доменное имя у одного из корневых серверов с адресом 198.41.0.4
    Decision:
    $ nslookup 198.41.0.4 a.root-servers.net
        Authoritative answers can be found from:
        in-addr.arpa    nameserver = e.in-addr-servers.arpa.
        in-addr.arpa    nameserver = f.in-addr-servers.arpa.
        in-addr.arpa    nameserver = d.in-addr-servers.arpa.
        in-addr.arpa    nameserver = c.in-addr-servers.arpa.
        in-addr.arpa    nameserver = b.in-addr-servers.arpa.
        in-addr.arpa    nameserver = a.in-addr-servers.arpa.
        e.in-addr-servers.arpa  internet address = 203.119.86.101
        e.in-addr-servers.arpa  has AAAA address 2001:dd8:6::101
        f.in-addr-servers.arpa  internet address = 193.0.9.1
        f.in-addr-servers.arpa  has AAAA address 2001:67c:e0::1
        d.in-addr-servers.arpa  internet address = 200.10.60.53
        d.in-addr-servers.arpa  has AAAA address 2001:13c7:7010::53
        c.in-addr-servers.arpa  internet address = 196.216.169.10
        c.in-addr-servers.arpa  has AAAA address 2001:43f8:110::10
        b.in-addr-servers.arpa  internet address = 199.253.183.183
        b.in-addr-servers.arpa  has AAAA address 2001:500:87::87
        a.in-addr-servers.arpa  internet address = 199.180.182.53
        a.in-addr-servers.arpa  has AAAA address 2620:37:e000::53
    Task:
    Протокол HTTP - Прикладной уровень. Для исследования http используем клиент терминал, который позволяет передавать на сервер строки. Можно использовать putty или telnet. B Host name пишем доменное имя сервера, к которому мы хотим подключиться (dato-138it.ru) и connection type - raw, чтобы передавать данные без каких то изменений, порт 80 и запретим закрывать окно после закрытия соединения.
    Decision:
    Соединение установлено, можно передавать http запрос. Запрос начинается с метода, потом адрес ресурса (/-начальная страница) версия протокола, имя сервера. тоже самое можно сделать в телнет, просто введя команды:
    $ telnet dato-138it.ru 80
        Trying 92.53.96.18...
        Connected to dato-138it.ru.
        Escape character is '^]'.
    GET / HTTP/1.1
    Host: dato-138it.ru

        HTTP/1.1 200 OK
        Server: nginx/1.14.1
        Date: Sat, 09 Oct 2021 06:19:59 GMT
        Content-Type: text/html; charset=utf-8
        Content-Length: 3087
        Connection: keep-alive
        Vary: Accept-Encoding
        Last-Modified: Fri, 24 Sep 2021 12:53:47 GMT
        ETag: "c0f-5ccbd3cf4529e"
        Accept-Ranges: bytes
        <!DOCTYPE html>
        <html>
        <head>
        ...
        <body>
        ...
        </body>
        </html>
    тут мы видим ответ сервера в формате html. Ответ начинается со статуса (HTTP/1.1 200 OK). в заголовках указана реализация сервера (Server: nginx/1.14.1). длина страницы (Content-Length: 3087). информация о том, что сервер оставил соединение не закрытым (Connection: keep-alive), чтобы можно было отправлять запросы с тем же самым соединением.
    Task:
    запросим веб страницу, которая не существует на сервере.
    Decision:
    $ telnet dato-138it.ru 80
        Trying 92.53.96.18...
        Connected to dato-138it.ru.
        Escape character is '^]'.
    GET /123 HTTP/1.1
    Host: dato-138it.ru
        HTTP/1.1 404 Not Found
        Server: nginx/1.14.1
        Date: Sat, 09 Oct 2021 06:30:04 GMT
        Content-Type: text/html; charset=iso-8859-1
        Content-Length: 201
        Connection: keep-alive
        <!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
        <html><head>
        <title>404 Not Found</title>
        </head><body>
        <h1>Not Found</h1>
        <p>The requested URL /123 was not found on this server.</p>
        </body></html>
    Task:
    В ответе статус 404 (HTTP/1.1 404 Not Found) - не найдена страница. По эксперементируем еще с текстовыми запросами, чтобы получить еще заголовки.
    Decision:
    $ telnet www.yandex.ru 80
        Trying 77.88.55.50...
        Connected to www.yandex.ru.
        Escape character is '^]'.
    GET / HTTP/1.1
    Host: www.yandex.ru
        HTTP/1.1 301 Moved permanently
        Cache-Control: max-age=1209600,private
        Location: https://yandex.ru/
        NEL: {"report_to": "network-errors", "max_age": 86400, "success_fraction": 0.001, "failure_fraction": 0.1}
        P3P: policyref="/w3c/p3p.xml", CP="NON DSP ADM DEV PSD IVDo OUR IND STP PHY PRE NAV UNI"
        Portal: Home
        Report-To: { "group": "network-errors", "max_age": 86400, "endpoints": [ { "url": "https://dr.yandex.net/nel"}]}
        Transfer-Encoding: chunked
        X-Content-Type-Options: nosniff
        X-Yandex-Req-Id: 1633761443643575-15557569317521118508-sas3-0783-515-sas-l7-balancer-8080-BAL-5547
        set-cookie: is_gdpr=0; Path=/; Domain=.yandex.ru; Expires=Mon, 09 Oct 2023 06:37:23 GMT
        set-cookie: is_gdpr_b=CKDNLhCRSigC; Path=/; Domain=.yandex.ru; Expires=Mon, 09 Oct 2023 06:37:23 GMT
        set-cookie: _yasc=0+j/vk1Zs02REJJvuglK5Lj/Pz28h3fh1b3rJtUjfttgaQ==; domain=.yandex.ru; path=/; expires=Mon, 08-Nov-2021 06:37:23 GMT; secure
        0
    GET /nel HTTP/1.1
    Host: dr.yandex.ru
        HTTP/1.1 302 Moved temporarily
        Content-Length: 0
        Location: https://dr.yandex.ru/nel
        NEL: {"report_to": "network-errors", "max_age": 86400, "success_fraction": 0.001, "failure_fraction": 0.1}
        Report-To: { "group": "network-errors", "max_age": 86400, "endpoints": [ { "url": "https://dr.yandex.net/nel"}]}
        X-Content-Type-Options: nosniff
        X-XSS-Protection: 1; mode=block
        set-cookie: is_gdpr=0; Path=/; Domain=.yandex.ru; Expires=Mon, 09 Oct 2023 06:41:21 GMT
        set-cookie: is_gdpr_b=CKDNLhCRSg==; Path=/; Domain=.yandex.ru; Expires=Mon, 09 Oct 2023 06:41:21 GMT
        set-cookie: _yasc=pO80+yKKSm7/BUQc7fMoBomkXafH7K0R7nKs+c0W97o0CI/Y; domain=.yandex.ru; path=/; expires=Mon, 08-Nov-2021 06:41:21 GMT; secure
    Task:
    Порты на транспортном уровне. Рассмотрим адресацию транспортного уровня в wireshark. В стеке протокола tcp/ip это порты. Это уникальный номер процесса, который взаимодействует с другими процессами по сети. У него есть два протокола TCP и UDP. Рассмотрим как использяуются данные порты. Введем в фильтре http и откроем браузер. Это протокол для просмотра веб-страниц
    Decision:
    Вот пакеты http запрос про страницн сайта и сам заголовок TCP
    В начале идут номера портов. Номер целевого порта (destination port) - 80 (номер веб сервера).
    Порты до 1024 - широкоизвестные порты, которые закреплены за теми или иными сервисами. То есть порт 80 закреплен за веб-сервером.
    Порт отправителя - 47342. Когда мы подключаемся веб-серверу с помощью браузера, номер порта, на который работает браузер, для нас значения не имеет. Поэтому номера портов для клиентов назначаются операционной системой.
    А дальше мы видим ответ, который присылает нам с порта номер 80 на порт 47342:
    Вот dns пакет, в котором выполняется запрос на разрешение доменного имени firefox. Видиим, что dns в отличии от http использует транспортный уровень udp.
    Порт назначения - 53, порт отправителя - 50577, он так же аавтоматически назначен операционной ситемой для ДНС-клиента.
    Рассмотрим протокол DHCP. У него фиксирован не только номер порта сервера 67, но и номер порта клиента 68.
    Dhcp Discovery- поиск запроса на dhcp-server. DHCP-Offer - ответ dhcp-server.
    Теперь мы знаем как смотреть номера портов в протоколах транспортного уровня.
    Task:
    Установка соединения в TCP - Транспортный уровень. Рассмотрим как установить соеденение в tcp. Если смотреть соединение с веб-сервером, то там будут не сколько соединений: на странице самого текста стилевого файла картинок. Почтовый клиент имеет всего одно соединение. Устанавливать мы будем с почтовым сервером сервером с помощью почтового клиента.
    Decision:
    B фильтре добавим tcp
    Тут видим три сегмента, которые используются для установки соединения. В ТСП используется процедура трехкратного рукопажатия.
    Сначала отпрвляется с установленным флагом SYN, получатели отправляеют в ответ сегменты SYN,ACK и отправители передают сегмент с установленным флагом ACK.
    SYN - запрос на соединение. порт назначения - 80, который работает по протоколу http, порт отправителя - 38532. Нас интереуют флаги
    Все флаги сброшены, кроме одного - Syn: Seet.
    номер байта tcp - sequence number. 0 - относительный номер последовательности. В нижней части видим что здесь совсем не 0.
    Чтобы отключить предварительную обработку, убираем галочку на analyze protocol
    Теперь видим реальный номер байта, который используется для нумерации байтов в потоке.
    SYN,ACK - данное сообщение передает почтовый сервер. это говорит о том, что он хочет установить соединение - флаг SYN, и подтверждает получение предыдущего сообщения - флаг ACK.
    В поле флаги, установлены 2 флага - ack и syn. поле acknowledgment number - содержит номер байта. Предыдущий номер заканчивался на 8, а текущий на 9. sequence number - номер лишь сообщения который будет показан в слудющем сообщении. Это нужно для того, чтобы не пеерепутать данные пришедшие из рразных соединений.
    ACK - данный сегмент инифиатор соединения передают получателю, где говорит о том, что предыдущее сообщение получено и можно устанавливать соединение.
    тут уже только один флаг - acknowledgment. в acknowledgment number стоит номер ожидаемого следующего байта.
    Соединение установлено, теперь происходит обмен данными, а после происходит разрыв соединения FIN, ACK
    Со стороны сервера разрыв соединения недостаточно, клиент тоже должен закрыть соединение.
    В Wireshark можно также посмотреть установку и разрыв соединение в:
        меню-statistics-flow graph.
    Task:
    Протокол TCP: сокеты - Транспортный уровень. Программист взаимодействует с транспортным уровнем через интерфейс сокетов. Протоколы скрыты от программиста. При изменении протоколов транспортного уровня программу менять не придется.
    Decision:
    Серверный сокет:
    import socket
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.bind(('192.168.0.1', 8888))
    s.listen(1)
    conn, addr = s.accept()
    while True:
        data = conn.recv(1024)
        if not data: break
        conn.sendall(data)
    conn.close()
    Клиентский сокет:
    import socket
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.connect(('192.168.0.1', 8888))
    s.sendall(b'Hello, world!')
    data = s.recv(1024)
    s.close()
    print('Полученные данные:', repr(data))
    Task:
    Инкапсуляция. Это включение сообщения вышестоящего уровня в сообщении нижестоящего. И сообщение целиком состоит из заголовка данных. Вот пакет протокола http:
    Decision:
    Устройства сетевого уровня маршрутизаторы анализируют заголовок ipv4:
    извлекают ip адрес получателя destination и с помощью таблицы маршрутизации определяю куда нужно передавать этот ip пакет. То что проходит дальше этого заголовка сетевого уровня маршрутизаторы не рассматривают. Это считаются данные сетевого уровня, но на самом деле в данные сетевого уровня вложено сообщение траснпортного уровня, которое опять же начинается с заголовка:
    главные здесь поля, destination port и source port. все что находится дальше этого заголовка протокол ТСР считает данными и не обрабатывает. Но там находятся сообщения протокола прикладного уровня http:
    Итак, наш пакет http на самом деле состоит из сообщений разных уровней - канального, сетевого, транспортного и прикладного, которые вложены в друг в друга. это и называется инкапсуляция.
    Не всегда в пакетах будут присутствовать протоколы всех уровней. Например, в ARP используются всего два уровня
    Это канальный уровень с протоколом ethernet и сетевой уровень с протоколом arp.
    Task:
    Протокол IP - Сетевой уровень. Рассмотрим, как устроен заголовок протокола IP. Выбираем пакет в wireshark, например, DNS.
    Decision:
    В нижней части видим цифровое представление пакетов в том виде, в котором он передается по сети.
    В начале пакет, представлен заголовок канального уровня.
    Дальше идет заголовок версии IPv4 и в нем мы можем посмотреть какие есть поля. Важные поля здесь адреса отправителя (source) и получателя (destination), код протокола уровня (в нашем случае - 17).
    В начале идет версия протокола. Затем идет поле длина заголовка, значение 5, означает, что длина заголовка - 20 байт.
    Следующее поле из 8ми бит состоит из 2х частей. Первые 6 бит предназначены для передачи данных о качестве обслуживания. Сейчас используется формат дифференированного обслуживания, но в этом пакете никакие флаги не установлены. Последние 2 байта используют в технологии explicit notification. Технологии используются маршрутизатором для того, чтобы сообщить о перегрузке сети. Отправитель получив такой сигнал, должен передавать меньше данных в сеть, для этого он уменьшает размер окна.
    Следующее поле - общая длина (86).
    Затем идут 3 поля, которые используются для фрагментации - идентификатор пакета, флаги и смещение фрагмента. Для флага есть 3 бита, 1 из них не используется, 2 других используются для фрагментации. Don't fragment - запрет фрагментации, а флаг more fragments - пакет был фрагментирован и вслед за полученным пакетом должны прийти другие фрагменты.
    Следующее поле - время жизни пакетов (64). То есть пакет может пройти через 64 маршрутизаторов, после чего он будет отброшен.
    Следующее поле, контрольная сумма заголовка, которая используется для проверки правильности доставки пакета
    Task:
    Таблица маршрутизации:
    Decision:
    $ route -n
    Kernel IP routing table
    Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
    0.0.0.0         192.168.0.1     0.0.0.0         UG    100    0        0 enp0s3
    169.254.0.0     0.0.0.0         255.255.0.0     U     1000   0        0 enp0s3
    192.168.0.0     0.0.0.0         255.255.255.0   U     100    0        0 enp0s3
    Task:
    Протокол DHCP - Сетевой уровень. Для dhcp пакетов в Wireshark используется фильтр bootp. Перед тем как получить адрес по протоколу dhcp нужно освободить тот, который у компьютера уже есть. для конкретного подключения, например Wi-Fi
    Decision:
    $ ifconfig
        enp0s3: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
            inet 192.168.0.105  netmask 255.255.255.0  broadcast 192.168.0.255
            inet6 fe80::3dd0:64cb:aebf:9381  prefixlen 64  scopeid 0x20<link>
            ether 08:00:27:3c:93:19  txqueuelen 1000  (Ethernet)
            RX packets 64638  bytes 68467891 (68.4 MB)
            RX errors 0  dropped 0  overruns 0  frame 0
            TX packets 7319  bytes 620656 (620.6 KB)
            TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
        lo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536
            inet 127.0.0.1  netmask 255.0.0.0
            inet6 ::1  prefixlen 128  scopeid 0x10<host>
            loop  txqueuelen 1000  (Local Loopback)
            RX packets 397  bytes 32617 (32.6 KB)
            RX errors 0  dropped 0  overruns 0  frame 0
            TX packets 397  bytes 32617 (32.6 KB)
            TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
    $ sudo dhclient -r enp0s3
    Task:
    Адрес отдали, теперь хотим получить и посмотрим как проходило получения ip адреса по протоколу dhcp.
    Decision:
    $ sudo dhclient enp0s3
    Нас интересует именно DCHP Discover, Offer, Request, Ack (DORA). Именно эти пакеты используются для назначения ip адреса.
    Пакет Discover отправляет компьютер, когда хочет получить ip адрес. В это время у компьютера нет никаких сетевых адресов и сетевых настроек. ПОэтому сообщение dhcp dicover передается на широковещательный адрес ff:ff:...:ff на канальном уровне. Так как у компьютера, пока что нету собственного ip адреса, поэтому у адреса отправителя (src) нули 0.0.0.0, а в адресе получителя битовые единицы (dst) 255.255.255.255.
    в Пакете Offer dhcp-server отправляет клиенту сообщение в ответ на запрос dhcp-Discovery. Так как ардеса никакого нету, сообщения также пересылаются по широковещательному адресу ff:ff:...:ff. Его принимают все компьютеры сети, но обрабатывает только тот кто выслал запрос.
    Посмотрим данные протокoла dhcp.
    самое важное здесь ip адрес, который нам предлагает dhcp-сервер (your client адрес) и идентификатор клиента (client mac address), который хочет получить ip адрес в протоколе dhcp. есть еще дополнительная информация, так называемая - options.
    1ая опция - название операции (dhcp offer). нам предлагается маска (subnet). Маршрутизатор по умолчанию - (router). Сервера доменных имен, которые используются для преобразования dns имен в ip адреса. lease time - время, на которое выдается ip адресу. dhcp сервер выдал нам этот адрес на 1 день.
    B следующем пакетe dhcp request запрос предложенному ip адрес клиенту. Он нужен так как в сети работают два dhcp сервера. В этом случае клиент выбирает ip адрес одного dhcp сервера и именно ему посылает dhcp request.
    Опять же сообщения посылаются на канальном уровне на широковещательный mac адрес, так как сетевая адреса еще также нету. И в сообдщении dhcp клиент указывает адрес, который он запрашивает (reqeust ip address). также в сообщение клиент включает еще список опций, который он хочет получить от dhcp сервера (parametr request list).
    B следующем пакетe dhcp ack сообщение dhcp сервер посылает клиенту и он подтверждает что клиент, может использовать данный ip адрес. На этом получеие ip адреса заканчивается.
    Task:
    Протокол ARP - Сетевой уровень. Результаты работы протокола ARP записываются в ARP-таблицу на компьютере. В wireshark мы используем фильтр по названию протоколa ARP, для того чтобы отобрать только нужные нам пакеты. Работа протокола протоколa ARP состоит из 2х операций - запрос и ответ.
    Decision:
    Здесь краткая информация мак-адрес отправителя (source) посылает на широковещательный мак-адрес пакет, в котором спрашивается у кого есть адрес 192.168.0.106 ответить компьютеру с адресом 192.168.0.1. Следующий пакет пакажет информацию с мак адресом о компьютера с адресом 192.168.0.106.
    Рассмотрим как устроены пакеты протоколa ARP
    В нижней части окна видим пакет в том виде, в котором передается по сети. В среднем окне ethernet II - заголовок канального уровня, destination - адрес получателя. Этот широковещательный адрес отправляется всем компьютера в сети, так как компьютеру отправителю извесетен только ip адрес, но не мак-адрес получаетля. source - мак-адрес отправителя, и type - код протокола следующего уровня. Затем идут поля даныых заголовка протокола ARP.
    Данный разработан для того чтобы преобразовывать адрес различных технологий сетевого уровня в различные технологии канального уровня. Поэтому в начале строке идут поля, которые говорят о том адреса каких типов мы преобразуем. С hardware ethernet и типом протокола IPv4 мы пытаемся определить адрес. В ethernet указывается длина адресов HS-6  и PS-4. Затем идет тип операции reply - ответ, но есть еще request - запрос. Дальше указывыается мак-адрес, который мы хотим узнать - target mac-adress. Мак-адрес и искомый мак адрес находится в поле sendeer mac-adress. После того как компьютер запросил мак-адрес некоторого айпи адреса по протоколу ARP, он его записывает во внутренний кэш, который называется arp таблицей
    $ arp -a
    Выводится имеющуюся таблицу соответсвие ip и mac адреса. Можно добавить в ручную, в этом случае будет статический адрес, либо удалить.
    $ arp -d 192.168.0.104
    Task:
    Протокол ICMP - Сетевой уровень. Если мы запустим wireshark и в фильтре введем icmp, увидим, что просто так сети пакета ничего не передается. Чтобы все таки посмотреть как данный протокол работает, буду использовать утлиту ping, котороый использует в своей работе именно этот протокол. Ping используется для проверки допступности компьютеров в сети
    Decision:
    $ ping 8.8.8.8
        PING 8.8.8.8 (8.8.8.8) 56(84) bytes of data.
        64 bytes from 8.8.8.8: icmp_seq=1 ttl=108 time=79.0 ms
        64 bytes from 8.8.8.8: icmp_seq=2 ttl=108 time=78.4 ms
        64 bytes from 8.8.8.8: icmp_seq=3 ttl=108 time=74.2 ms
        64 bytes from 8.8.8.8: icmp_seq=4 ttl=108 time=73.7 ms
        64 bytes from 8.8.8.8: icmp_seq=5 ttl=108 time=74.2 ms
        ^C
        --- 8.8.8.8 ping statistics ---
        5 packets transmitted, 5 received, 0% packet loss, time 4033ms
        rtt min/avg/max/mdev = 73.740/75.916/79.018/2.300 ms
    Видим, что сервер получил 5 пакетов, это значит что сервер доступен по сети. Смотрим как это реализовано в ICMP
    В верхней части показан перечень всех пакетов, которые были переданы - request и получены - reply. В нижней части видим цифровое представление пакета. В средней части также протокол канального уровня ethernet, сетевого уровня IPv4 и протокол ICMP.
    в ICMP type говорит о том что произошло в сети. в нашем случае код сообщения 8 с эхо (ping) запросом. После заголовка добавляются данные (Data), чтобы не передавать пустой пакет.
    Попробуем  ввести команду ping c ограничением время жизни 1. Это означает, что, когда пакет дойдет до 1ого маршрутизатора, маршрутизатор уменьшит время жизни до 0, отбросит пакет и отправит нам сообщение о том,что время жизни пакета истекл.о:
        $ ping -i 1 8.8.8.8
    А в wireshark вывдется такая информация:
        Time-to-live exceeded.
    Тип сообщения будет 11 с кодом 0.
    Task:
    Рассмотрим утилиту tracеroute для определения маршрута от отправителя к получателю. Установим маршрут до сайта:
    Decision:
    $ sudo traceroute -d google.com
        traceroute to google.com (74.125.131.138), 30 hops max, 60 byte packets
         1  _gateway (192.168.0.1)  1.086 ms  1.155 ms  1.049 ms
         2  * * *
         3  dynamicip-109-194-24-39.pppoe.penza.ertelecom.ru (109.194.24.39)  2.276 ms  2.038 ms  3.363 ms
         4  net131.234.188-158.ertelecom.ru (188.234.131.158)  71.095 ms  70.891 ms  70.740 ms
         5  net131.234.188-159.ertelecom.ru (188.234.131.159)  71.626 ms 72.14.214.138 (72.14.214.138)  71.519 ms net131.234.188-159.ertelecom.ru (188.234.131.159)  71.458 ms
         6  10.252.225.62 (10.252.225.62)  71.396 ms 10.23.205.254 (10.23.205.254)  73.098 ms 10.252.175.126 (10.252.175.126)  72.994 ms
         7  74.125.244.129 (74.125.244.129)  72.939 ms 209.85.240.254 (209.85.240.254)  72.780 ms  72.348 ms
         8  74.125.244.133 (74.125.244.133)  73.347 ms  88.624 ms 74.125.244.180 (74.125.244.180)  70.965 ms
         9  72.14.232.85 (72.14.232.85)  72.030 ms 142.251.51.187 (142.251.51.187)  73.705 ms 72.14.232.84 (72.14.232.84)  70.664 ms
        10  142.251.61.221 (142.251.61.221)  74.866 ms 216.239.58.67 (216.239.58.67)  75.103 ms 216.239.48.163 (216.239.48.163)  74.589 ms
        11  172.253.64.55 (172.253.64.55)  75.463 ms 172.253.64.53 (172.253.64.53)  75.309 ms 216.239.56.113 (216.239.56.113)  75.929 ms
        12  * * *
        13  * * *
        14  * * *
        15  * * *
        16  * * *
        17  * * lu-in-f138.1e100.net (74.125.131.138)  73.826 ms
    Task:
    Для того чтобы попасть на сайт google нам нужно пройти через 11 промежуточных маршрутизаторов. Посмотрим как tracerout распознает адреса этих маршрутизаторов в wireshark.
    Decision:
    Тег сообщения - 11, код - 0, время жизни пакета истекло. tracerout смотрит заголовок IPv4 и извлекает из него адрес отправителя - source. Это и есть адрес первого маршрутизатора, через который нужно пройти.
    Task:
    На канальном уровне работает ethernet и wifi.
    Decision:
    Заголовок канального уровня wireshark содержит адрес получателя (destintation, указан мак адрес компьютера получателя), адрес отправителя (source), тип протокола следующего уровня (type)
    Task:
    Рассмотрим пакеты протола arp
    Decision:
    1. Адрес состоящий из битовых единиц или шестнадцатеричном виде ff 6 раз это широковещательный адрес. При отправки данных на него эти данные получают все компьютеры в сеть.
    2. В сети ethernet есть ограничения на максимальный размер кадра - 46 байт. Это ограничения унаследованно из ethernet, в котором необходимо было, чтобы сигнал колизии дашел до самого дальнего конца сети. Поэтому кадр должен быть достаточно большой. И есил размер пакета маленький (arp), то он в конце дополняется нулями (padding).
    3. Есть несколько форматов заголовка канального уровня. Если мы посмотрим форматы кадров технологии Ethernet после полей физического уровня (поле преамбулы, начальный ограничитель) идут следующие поля заголовка адрес получателя, отправителя и вместо тип протокола содержит длину данных в кадре. Это Стандарт 802.3 и он не единственный. А производители использовали индустриальный стандарт ethernet II (Ethernet DIX)
    Task:
    Протокол NDP Протокол обнаружения соседей - расширение протокола icmp, поэтому в wireshark мы используем фильтр icmpv6.
    Decision:
    Видим пакет router advertisemen - пакет маршрутизатора, который находится в сети, рассылает постоянно через определенные промежутки времени.
    На уровне IP адрес отправителя - source (ipv6 адрес маршрутизатора) и адрес получателя - destination. destination - групповой адрес, с которым соответсвуют все устройства в сети. Тип заголовка следующего уровня (Next Header) - 58, протокол icmpv6, его модификация версия 6. В пакете icmpv6^
    Тип сообщения - 134, router advertisement - анонс маршрутизатором. Адрес маршрутизатора извлекается из заголовка ipv6, а в icmp находятся рекомендуемый максимального количества промежуточных участков (Cur hop limit) - 64, то есть пакет может пройти через 64 маршрутизатор прежде чем он будет отброшен. Время жизни маршрутизатора (router lifetime) - то время, на которое запись об этом маршрутизаторе заносится в таблицу маршрутизации. Важная имнформация - опции icmpv6 (icmpv6 option), source link-layer address - мак адрес маршрутизатора. В IPv6 мак адрес маршрутизатора разделен на 2 части, внутрь добавлены значения - ff:fe. после них правая часть ip адреса (ipv6) полностью совпадают с правой часть в макадресе (ethernet II). А в левой части изменены биты.
    Протокол NDP используется для автоматической конфигурации сетевых настроек компьютера. Из сообщения router advertisement мы получаем ipv6 адрес маршрутизатора.
    В канального уровне (ethernet II) используется групповой макадрес, в отличии от ipv6 где использовался широковещательный мак адрес из одниз бинарных единиц. Групповые макадрес, которые соответсвуют групповым ipv6 устроены следущюим образом. В начале идут 2 числа - 33:33, а затем 4 числа, которые совпадают в групповом ipv6 (dst), здесь все 0, последняя - 1, таже и в ipv6, пустые значения и послендяя 1.
    Определим Мак адреса компьютеров в сети по адресам ipv6 другим способом. Комп версии ipv6 когда хочет узнать макадрес получателя, по его ардесу ipv6, отправляет запрос соседа (neighbor solicitation) с типом соообщения 135.
    Ответ от соседа neighbor advertisement с типом соообщения 136. Целевой адрес соседа target address соответсвует ему мак адрес icmpv6 option. В ipv6 (src) отпралвет тот адрес, которого мы хотели узнать mac адрес (target address), напрямую нашему компьютеру (dst).
    Проткол NDP, как и ARP, хранит определенные мак адрес в кэш, в таблице ndp.
    $ ip -6 neighbor show
        fe80::b295:75ff:fe76:ef70 dev enp0s3 lladdr b0:95:75:76:ef:70 router STALE
    Task:
    Анализатор сети Wireshark
    Decision:
    Запуск анализатора, выбираем один из списка подключенных сетевых интерфейсов:
    В верхней части показаны пакеты, которые приходят из сети. Именно в этой части можно увидеть какие пакеты приходят и уходят из нашей сети.
    В нижней части представлены пакеты в том виде, в котором они передаются по сети (набор 16-ричных чисел - цифровые сети).
    Среднее окно позволяет нам понять, что означают те цифры в пакете. Тут прдставлены заголовки разного уровня - frame, физический уровень - ethernet II, протокол сетевого уровня IPv6.
    Выберем, какой-нибудь протокол, то его заголовок в нижней части высвечивается, и в нем увидим описание всех полей в заголовке протокола. Наример, в пакете можно увидеть ip адрес отправителя (source address) и ip адрес получателя (destination)
    Чтобы посмотреть как проходит захват пакетов, сначала запустим wireshark и после какую-нибудь веб страницу. Чтобы быстро найти нужый нам пакет мы используем фильтр и напишем в нем http. Увидим GET - запрос, http - ответ. и, например, в средней части если откроем протокол Line-based text data мы увидим как раз данные той самой веб страницы.
    Source:
    1. https://www.asozykin.ru/courses/networks_online

Cisco Packet Tracer
    Decision:
    https://github.com/David138it/MyPortfolio/tree/main/TaskDecision/Engineer-Isu/Net/CiscoPacketTracer/
    Task:
    Установить Cisco Packet Tracer в Ubuntu
    Decision:
        https://www.google.ru/search?q=cisco+account+create&newwindow=1&source=hp&ei=Z8eqYdOSEcTIrgSIwIeQDQ&iflsig=ALs-wAMAAAAAYarVd9Qob1A5NSTfBETDiQsuP3G5I7gv&ved=0ahUKEwiT4p6Jgsn0AhVEpIsKHQjgAdIQ4dUDCAY&uact=5&oq=cisco+account+create&gs_lcp=Cgdnd3Mtd2l6EAMyBQgAEIAEMgUIABCABDIGCAAQFhAeMgYIABAWEB4yBggAEBYQHjIGCAAQFhAeMgYIABAWEB4yBggAEBYQHjIGCAAQFhAeMgYIABAWEB5QAFgAYPgEaABwAHgAgAGBAYgBgQGSAQMwLjGYAQCgAQKgAQE&sclient=gws-wiz-> https://idreg.cloudapps.cisco.com/idreg/accountAlreadyActivated.do-> https://temp-mail.org/-> xanaveb196@simdpi.com -> https://temp-mail.org/-> mail: xanaveb196@simdpi.com -> https://temp-mail.org/-> Активировать Аккаунт -> https://idreg.cloudapps.cisco.com/idreg/accountAlreadyActivated.do-> xanaveb196@simdpi.com -> https://www.google.ru/search?q=netacad+introduction+to+packet+tracer&newwindow=1&ei=Ks-qYZugA5a_rgTF_beoDw&oq=netacad+into+to+pa&gs_lcp=Cgdnd3Mtd2l6EAMYAjIGCAAQFhAeMgYIABAWEB4yBggAEBYQHjoHCAAQRxCwAzoNCC4QxwEQ0QMQsAMQQzoHCAAQsAMQQzoFCAAQgAQ6BQghEKABOgUIABDNAkoFCDwSATJKBAhBGABKBAhGGABQ96cZWMXDGWC44RloAnACeACAAZwBiAHGCpIBBDAuMTCYAQCgAQHIAQrAAQE&sclient=gws-wiz -> https://www.netacad.com/ru/courses/packet-tracer/introduction-packet-tracer-> xanaveb196@simdpi.com -> https://temp-mail.org/-> Создать учетную запись -> https://www.netacad.com/portal/resources/packet-tracer-> https://www.netacad.com/portal/resources/file/71b29477-0abb-4a52-97eb-cc23d5771574
    $ sudo dpkg -i CiscoPacketTracer_810_Ubuntu_64bit.deb
        ...
        dpkg: ошибка при обработке пакета packettracer (--install):
         проблемы зависимостей — оставляем не настроенным
        ...
        При обработке следующих пакетов произошли ошибки:
         packettracer
    $ sudo apt install -f
    $ sudo dpkg -i CiscoPacketTracer_810_Ubuntu_64bit.deb
        ...
        Обрабатываются триггеры для shared-mime-info (1.15-1) …
    $ packettracer &
    Task:
    setting up a Wi fi router
    Decisions:
        Router0-CLI
    Router>en
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#int fa
    Router(config)#int fastEthernet 0/0
    Router(config-if)#ip add
    Router(config-if)#ip address 210.210.0.1 255.255.255.252
    Router(config-if)#no sh
    Router(config-if)#no shutdown
    Router(config-if)#
        %LINK-5-CHANGED: Interface FastEthernet0/0, changed state to up
        %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/0, changed state to up
    Router(config-if)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#wr mem
        Building configuration...
        [OK]

        Wireless router 0 - gui - static ip - ip address: 210.210.0.2 - subnet mask: 255.255.255.252 - gateway: 210.210.0.1 - save setting - wireless - network name ssid: netskills-home - save setting - wireless security - wpa2 personal - passphase: ciscocisco - save setting
    Task:
    Add a custom device laptop
    Decisions:
        lalptop0 - выключаем - убираем (перетаскиваем) подключенный сетевой модуль - заместо него wrc300n - включаем ноутбук - desktop - pc wireless - connect - refresh - netskills-home - connect - pre-shared key - ciscocisco - command promprt
    C:\>ipconfig
        Bluetooth Connection:(default port)
           Connection-specific DNS Suffix..:
           Link-local IPv6 Address.........: ::
           IPv6 Address....................: ::
           IPv4 Address....................: 0.0.0.0
           Subnet Mask.....................: 0.0.0.0
           Default Gateway.................: ::
                                             0.0.0.0
        Wireless0 Connection:
           Connection-specific DNS Suffix..:
           Link-local IPv6 Address.........: FE80::202:4AFF:FE66:D186
           IPv6 Address....................: ::
           IPv4 Address....................: 192.168.0.100
           Subnet Mask.....................: 255.255.255.0
           Default Gateway.................: ::
                                             192.168.0.1
    C:\>ping 192.168.0.1
        Pinging 192.168.0.1 with 32 bytes of data:
        Reply from 192.168.0.1: bytes=32 time=122ms TTL=255
        Reply from 192.168.0.1: bytes=32 time=42ms TTL=255
        Reply from 192.168.0.1: bytes=32 time=23ms TTL=255
        Reply from 192.168.0.1: bytes=32 time=40ms TTL=255
        Ping statistics for 192.168.0.1:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 23ms, Maximum = 122ms, Average = 56ms
    C:\>ping 210.210.0.1
        Pinging 210.210.0.1 with 32 bytes of data:
        Request timed out.
        Reply from 210.210.0.1: bytes=32 time=32ms TTL=254
        Reply from 210.210.0.1: bytes=32 time=17ms TTL=254
        Reply from 210.210.0.1: bytes=32 time=31ms TTL=254
        Ping statistics for 210.210.0.1:
            Packets: Sent = 4, Received = 3, Lost = 1 (25% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 17ms, Maximum = 32ms, Average = 26ms
    Task:
    Let's add another stationary computer
    Decisions:
        pc0 - ip conf - dbhcp - command prompt
    C:\>ping 192.168.0.1
        Pinging 192.168.0.1 with 32 bytes of data:
        Reply from 192.168.0.1: bytes=32 time=1ms TTL=255
        Reply from 192.168.0.1: bytes=32 time<1ms TTL=255
        Reply from 192.168.0.1: bytes=32 time<1ms TTL=255
        Reply from 192.168.0.1: bytes=32 time<1ms TTL=255
        Ping statistics for 192.168.0.1:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 1ms, Average = 0ms
    C:\>ping 210.210.0.1
        Pinging 210.210.0.1 with 32 bytes of data:
        Reply from 210.210.0.1: bytes=32 time=1ms TTL=254
        Reply from 210.210.0.1: bytes=32 time<1ms TTL=254
        Reply from 210.210.0.1: bytes=32 time<1ms TTL=254
        Reply from 210.210.0.1: bytes=32 time<1ms TTL=254
        Ping statistics for 210.210.0.1:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 1ms, Average = 0ms
    C:\>ping 192.168.0.100
        Pinging 192.168.0.100 with 32 bytes of data:
        Reply from 192.168.0.100: bytes=32 time=158ms TTL=128
        Reply from 192.168.0.100: bytes=32 time=11ms TTL=128
        Reply from 192.168.0.100: bytes=32 time=67ms TTL=128
        Reply from 192.168.0.100: bytes=32 time=13ms TTL=128
        Ping statistics for 192.168.0.100:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 11ms, Maximum = 158ms, Average = 62ms
    Task:
    Let's assume that the organization already has some kind of network. Now we need to deploy wi-fi to our organization. let's say we have a guest room of the organization.
    Decisions:
        Switch0 - CLI
    Switch>en
    Switch#show run
        Building configuration...
        Current configuration : 1436 bytes
        !
        version 12.2
        no service timestamps log datetime msec
        no service timestamps debug datetime msec
        no service password-encryption
        !
        hostname Switch
        !
        !
        !
        !
        !
        !
        spanning-tree mode pvst
        spanning-tree extend system-id
        !
        interface FastEthernet0/1
         description ToRouter
         switchport trunk allowed vlan 2-4
         switchport mode trunk
        !
        interface FastEthernet0/2
         description Users
         switchport access vlan 2
         switchport mode access
        !
        interface FastEthernet0/3
         description Users
         switchport access vlan 2
         switchport mode access
        !
        interface FastEthernet0/4
         description srv
         switchport access vlan 3
         switchport mode access
        !
        interface FastEthernet0/5
         description WiFi-AP
         switchport access vlan 4
         switchport mode access
        !
        interface FastEthernet0/6
        !

        router1-cli
    Switch>en
    Switch#show run
        Building configuration...
        Current configuration : 1436 bytes
        !
        version 12.2
        no service timestamps log datetime msec
        no service timestamps debug datetime msec
        no service password-encryption
        !
        hostname Switch
        !
        !
        !
        !
        !
        !
        spanning-tree mode pvst
        spanning-tree extend system-id
        !
        interface FastEthernet0/1
         description ToRouter
         switchport trunk allowed vlan 2-4
         switchport mode trunk
        !
        interface FastEthernet0/2
         description Users
         switchport access vlan 2
         switchport mode access
        !
        interface FastEthernet0/3
         description Users
         switchport access vlan 2
         switchport mode access
        !
        interface FastEthernet0/4
         description srv
         switchport access vlan 3
         switchport mode access
        !
        interface FastEthernet0/5
         description WiFi-AP
         switchport access vlan 4
         switchport mode access
        !
        interface FastEthernet0/6
        !

        access point0 - config - port1 - ssid: netskill - wpa2-psk - pass phrase: ciscocisco
    Task:
    let's make sure that the wi-fi network is in a separate segment.
    Decisions:
        switch-cli
    #en
    # conf t
    # vlan 4
    # name wifi
    # end
    Task:
    On the port that connects to our router1 router, you need to add this vlan4 to trunkport
    Decisions:
    #show run
        ...
        switchport trunk allowed vlan 2-4
    Task:
    We need to create a sub interface on our router
    Decisions:
        router1 - cli
    #en
    # conf t
    # int fa0/1.4
    # encapsulation dot1Q 4
    # ip address 192.168.4.1 255.255.255.0
    # no shutdown
    # end
    Task:
    Let's set the possibility to distribute addresses
    Decisions:
    # conf t
    # ip dhcp pool Wifi-pool
    # network 192.168.4.0 255.255.255.0
    # default-router 192.168.4.1
    # exit
    # ip dhcp excluded-address 192.168.4.1
    # end
    # wr mem
    Task:
    let's add some kind of wireless device, that is, let's assume that a client of the organization came to us and he has a laptop that wants to connect to wifi
    Decisions:
        lalptop1 - выключаем - убираем (перетаскиваем) подключенный сетевой модуль - заместо него wrc300n - включаем ноутбук - desktop - pc wireless - connect - refresh - netskills - save setting - wireless security - wpa2 personal - passphase: ciscocisco - save setting - command prompt
    Task:
    Что получить ноутбуку ip адрес wifi нужно определить точку доступа к vlan
    Decisions:
        switch0-cli
    #en
    # conf t
    # switchport mode access
    # switchport access vlan 4
    # description WiFi-AP
    # end
    # wr mem
    Task:
    Необходимо донастроить nat
    Decisions:
        Router1-cli
    # en
    # conf t
    # ip access-list standart FOR-NAT
    # permit 192.168.4.0  0.0.0.255
    # exit
    # int fa0/1.4
    # ip nat inside
    # end
    # wr mem
    Task:
    Проверим получили ли мы ip адрес
    Decisions:
        lalptop1 - ip configuration - dhcp - ok - command prompt
    C:\>ipconfig
        Bluetooth Connection:(default port)
           Connection-specific DNS Suffix..:
           Link-local IPv6 Address.........: ::
           IPv6 Address....................: ::
           IPv4 Address....................: 0.0.0.0
           Subnet Mask.....................: 0.0.0.0
           Default Gateway.................: ::
                                             0.0.0.0
        Wireless0 Connection:
           Connection-specific DNS Suffix..:
           Link-local IPv6 Address.........: FE80::203:E4FF:FE34:D1E7
           IPv6 Address....................: ::
           IPv4 Address....................: 192.168.4.2
           Subnet Mask.....................: 255.255.255.0
           Default Gateway.................: ::
                                             192.168.4.1
    C:\>ping 192.168.4.1
        Pinging 192.168.4.1 with 32 bytes of data:
        Reply from 192.168.4.1: bytes=32 time=171ms TTL=255
        Reply from 192.168.4.1: bytes=32 time=61ms TTL=255
        Reply from 192.168.4.1: bytes=32 time=104ms TTL=255
        Reply from 192.168.4.1: bytes=32 time=48ms TTL=255
        Ping statistics for 192.168.4.1:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 48ms, Maximum = 171ms, Average = 96ms
    C:\>ping 192.168.2.3
        Pinging 192.168.2.3 with 32 bytes of data:
        Request timed out.
        Reply from 192.168.2.3: bytes=32 time=27ms TTL=127
        Reply from 192.168.2.3: bytes=32 time=60ms TTL=127
        Reply from 192.168.2.3: bytes=32 time=31ms TTL=127
        Ping statistics for 192.168.2.3:
            Packets: Sent = 4, Received = 3, Lost = 1 (25% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 27ms, Maximum = 60ms, Average = 39ms
    C:\>ping 210.210.0.1
        Pinging 210.210.0.1 with 32 bytes of data:
        Reply from 210.210.0.1: bytes=32 time=38ms TTL=254
        Reply from 210.210.0.1: bytes=32 time=64ms TTL=254
        Reply from 210.210.0.1: bytes=32 time=69ms TTL=254
        Reply from 210.210.0.1: bytes=32 time=39ms TTL=254
        Ping statistics for 210.210.0.1:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 38ms, Maximum = 69ms, Average = 52ms
    Task:
    We have a router, a switch, 2 computers and a server that acts as a tftp server.
    Task:
    Проверим какая версия прошивки у коммутатора
    Decision:
        switch0-CLI
    Switch>en
    Switch#show ver
        Cisco IOS Software, C2960 Software (C2960-LANBASE-M), Version 12.2(25)FX, RELEASE SOFTWARE (fc1)
        Copyright (c) 1986-2005 by Cisco Systems, Inc.
        Compiled Wed 12-Oct-05 22:05 by pt_team
        ROM: C2960 Boot Loader (C2960-HBOOT-M) Version 12.2(25r)FX, RELEASE SOFTWARE (fc4)
        System returned to ROM by power-on
        Cisco WS-C2960-24TT (RC32300) processor (revision C0) with 21039K bytes of memory.
        24 FastEthernet/IEEE 802.3 interface(s)
        2 Gigabit Ethernet/IEEE 802.3 interface(s)
        63488K bytes of flash-simulated non-volatile configuration memory.
        Base ethernet MAC Address       : 0090.2B80.9BA3
        Motherboard assembly number     : 73-9832-06
        Power supply part number        : 341-0097-02
        Motherboard serial number       : FOC103248MJ
        Power supply serial number      : DCA102133JA
        Model revision number           : B0
        Motherboard revision number     : C0
        Model number                    : WS-C2960-24TT
        System serial number            : FOC1033Z1EY
    Switch#reload
        Proceed with reload? [confirm]
        C2960 Boot Loader (C2960-HBOOT-M) Version 12.2(25r)FX, RELEASE SOFTWARE (fc4)
        Cisco WS-C2960-24TT (RC32300) processor (revision C0) with 21039K bytes of memory.
        2960-24TT starting...
        Base ethernet MAC Address: 0090.2B80.9BA3
        Xmodem file system is available.
        Initializing Flash...
        flashfs[0]: 1 files, 0 directories
        flashfs[0]: 0 orphaned files, 0 orphaned directories
        flashfs[0]: Total bytes: 64016384
        flashfs[0]: Bytes used: 4414921
        flashfs[0]: Bytes available: 59601463
        flashfs[0]: flashfs fsck took 1 seconds.
        ...done Initializing Flash.
        Boot Sector Filesystem (bs:) installed, fsid: 3
        Parameter Block Filesystem (pb:) installed, fsid: 4
        Loading "flash:/c2960-lanbase-mz.122-25.FX.bin"...
        ...
    Switch#show flash:
        Directory of flash:/
            1  -rw-     4414921          <no date>  c2960-lanbase-mz.122-25.FX.bin
        64016384 bytes total (59601463 bytes free)
    Task:
    Обновим прошивку
    Decision:
        Server-Services-tftp
        c2960-lanbasek9-mz.150-2.SE4.bin
    Switch>en
    Switch#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Switch(config)#int vlan 1
    Switch(config-if)#ip add
    Switch(config-if)#ip address 192.168.1.5 255.255.255.0
    Switch(config-if)#no shut
    Switch(config-if)#no shutdown
    Switch(config-if)#
        %LINK-5-CHANGED: Interface Vlan1, changed state to up
        %LINEPROTO-5-UPDOWN: Line protocol on Interface Vlan1, changed state to up
    Switch(config-if)#exit
    Switch(config)#exit
    Switch#
        %SYS-5-CONFIG_I: Configured from console by console
    Switch#ping 192.168.1.4
        Type escape sequence to abort.
        Sending 5, 100-byte ICMP Echos to 192.168.1.4, timeout is 2 seconds:
        .!!!!
        Success rate is 80 percent (4/5), round-trip min/avg/max = 0/0/0 ms
    Switch#copy ?
          flash:          Copy from flash: file system
          ftp:            Copy from ftp: file system
          running-config  Copy from current system configuration
          scp:            Copy from scp: file system
          startup-config  Copy from startup configuration
          tftp:           Copy from tftp: file system
    Switch#copy tf
    Switch#copy tftp: ?
          flash:          Copy to flash: file system
          running-config  Copy configuration from system
          startup-config  Copy startup configuration from system
    Switch#copy tftp: fl
    Switch#copy tftp: flash:
        Address or name of remote host []? 192.168.1.4
        Source filename []? c2960-lanbasek9-mz.150-2.SE4.bin
        Destination filename [c2960-lanbasek9-mz.150-2.SE4.bin]?
        Accessing tftp://192.168.1.4/c2960-lanbasek9-mz.150-2.SE4.bin...
        Loading c2960-lanbasek9-mz.150-2.SE4.bin from 192.168.1.4: !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
        [OK - 4670455 bytes]
        4670455 bytes copied in 0.244 secs (1538884 bytes/sec)
        Switch#show flash
        Directory of flash:/
            1  -rw-     4414921          <no date>  c2960-lanbase-mz.122-25.FX.bin
            4  -rw-     4670455          <no date>  c2960-lanbasek9-mz.150-2.SE4.bin
        64016384 bytes total (54931008 bytes free)
    Switch#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Switch(config)#boot syste
    Switch(config)#boot system ?
          WORD  pathlist of boot file(s) ... file1;file2;...
    Switch(config)#boot system fl
    Switch(config)#boot system flash:/c2960-lanbasek9-mz.150-2.SE4.bin
    Switch(config)#end
    Switch#
        %SYS-5-CONFIG_I: Configured from console by console
    Switch#wr mem
        Building configuration...
        [OK]
    Switch#reload
        Proceed with reload? [confirm]
        C2960 Boot Loader (C2960-HBOOT-M) Version 12.2(25r)FX, RELEASE SOFTWARE (fc4)
        Cisco WS-C2960-24TT (RC32300) processor (revision C0) with 21039K bytes of memory.
        2960-24TT starting...
        Base ethernet MAC Address: 0090.2B80.9BA3
        Xmodem file system is available.
        Initializing Flash...
        flashfs[0]: 3 files, 0 directories
        flashfs[0]: 0 orphaned files, 0 orphaned directories
        flashfs[0]: Total bytes: 64016384
        flashfs[0]: Bytes used: 9086469
        flashfs[0]: Bytes available: 54929915
        flashfs[0]: flashfs fsck took 1 seconds.
        ...done Initializing Flash.
        Boot Sector Filesystem (bs:) installed, fsid: 3
        Parameter Block Filesystem (pb:) installed, fsid: 4
        Loading "flash:/c2960-lanbasek9-mz.150-2.SE4.bin"...
        ########################################################################## [OK]
        Smart Init is enabled
        smart init is sizing iomem
                          TYPE      MEMORY_REQ
                        TOTAL:      0x00000000
        Rounded IOMEM up to: 0Mb.
        Using 6 percent iomem. [0Mb/512Mb]
        C2960 Boot Loader (C2960-HBOOT-M) Version 12.2(25r)FX, RELEASE SOFTWARE (fc4)
        Cisco WS-C2960-24TT (RC32300) processor (revision C0) with 21039K bytes of memory.
        2960-24TT starting...
        Base ethernet MAC Address: 0090.2B80.9BA3
        Xmodem file system is available.
        Initializing Flash...
        flashfs[0]: 3 files, 0 directories
        flashfs[0]: 0 orphaned files, 0 orphaned directories
        flashfs[0]: Total bytes: 64016384
        flashfs[0]: Bytes used: 9086469
        flashfs[0]: Bytes available: 54929915
        flashfs[0]: flashfs fsck took 1 seconds.
        ...done Initializing Flash.
        Boot Sector Filesystem (bs:) installed, fsid: 3
        Parameter Block Filesystem (pb:) installed, fsid: 4
        Loading "flash:/c2960-lanbasek9-mz.150-2.SE4.bin"...
        ########################################################################## [OK]
        Smart Init is enabled
        smart init is sizing iomem
                          TYPE      MEMORY_REQ
                        TOTAL:      0x00000000
        Rounded IOMEM up to: 0Mb.
        Using 6 percent iomem. [0Mb/512Mb]
                      Restricted Rights Legend
        Use, duplication, or disclosure by the Government is
        subject to restrictions as set forth in subparagraph
        (c) of the Commercial Computer Software - Restricted
        Rights clause at FAR sec. 52.227-19 and subparagraph
        (c) (1) (ii) of the Rights in Technical Data and Computer
        Software clause at DFARS sec. 252.227-7013.
                   cisco Systems, Inc.
                   170 West Tasman Drive
                   San Jose, California 95134-1706
        Cisco IOS Software, C2960 Software (C2960-LANBASEK9-M), Version 15.0(2)SE4, RELEASE SOFTWARE (fc1)
        Technical Support: http://www.cisco.com/techsupport
        Copyright (c) 1986-2013 by Cisco Systems, Inc.
        Compiled Wed 26-Jun-13 02:49 by mnguyen
        Initializing flashfs...
        fsck: Disable shadow buffering due to heap fragmentation.
        flashfs[2]: 2 files, 1 directories
        flashfs[2]: 0 orphaned files, 0 orphaned directories
        flashfs[2]: Total bytes: 32514048
        flashfs[2]: Bytes used: 11952128
        flashfs[2]: Bytes available: 20561920
        flashfs[2]: flashfs fsck took 2 seconds.
        flashfs[2]: Initialization complete....done Initializing flashfs.
        Checking for Bootloader upgrade..
        Boot Loader upgrade not required (Stage 2)
        POST: CPU MIC register Tests : Begin
        POST: CPU MIC register Tests : End, Status Passed
        POST: PortASIC Memory Tests : Begin
        POST: PortASIC Memory Tests : End, Status Passed
        POST: CPU MIC interface Loopback Tests : Begin
        POST: CPU MIC interface Loopback Tests : End, Status Passed
        POST: PortASIC RingLoopback Tests : Begin
        POST: PortASIC RingLoopback Tests : End, Status Passed
        POST: PortASIC CAM Subsystem Tests : Begin
        POST: PortASIC CAM Subsystem Tests : End, Status Passed
        POST: PortASIC Port Loopback Tests : Begin
        POST: PortASIC Port Loopback Tests : End, Status Passed
        Waiting for Port download...Complete
        This product contains cryptographic features and is subject to United
        States and local country laws governing import, export, transfer and
        use. Delivery of Cisco cryptographic products does not imply
        third-party authority to import, export, distribute or use encryption.
        Importers, exporters, distributors and users are responsible for
        compliance with U.S. and local country laws. By using this product you
        agree to comply with applicable laws and regulations. If you are unable
        to comply with U.S. and local laws, return this product immediately.
        A summary of U.S. laws governing Cisco cryptographic products may be found at:
        http://www.cisco.com/wwl/export/crypto/tool/stqrg.html
        If you require further assistance please contact us by sending email to
        export@cisco.com.
        cisco WS-C2960-24TT-L (PowerPC405) processor (revision B0) with 65536K bytes of memory.
        Processor board ID FOC1010X104
        Last reset from power-on
        1 Virtual Ethernet interface
        24 FastEthernet interfaces
        2 Gigabit Ethernet interfaces
        The password-recovery mechanism is enabled.
        64K bytes of flash-simulated non-volatile configuration memory.
        Base ethernet MAC Address       : 00:90:2B:80:9B:A3
        Motherboard assembly number     : 73-10390-03
        Power supply part number        : 341-0097-02
        Motherboard serial number       : FOC10093R12
        Power supply serial number      : AZS1007032H
        Model revision number           : B0
        Motherboard revision number     : B0
        Model number                    : WS-C2960-24TT-L
        System serial number            : FOC1010X104
        Top Assembly Part Number        : 800-27221-02
        Top Assembly Revision Number    : A0
        Version ID                      : V02
        CLEI Code Number                : COM3L00BRA
        Hardware Board Revision Number  : 0x01
        Switch Ports Model              SW Version            SW Image
        ------ ----- -----              ----------            ----------
        *    1 26    WS-C2960-24TT-L    15.0(2)SE4            C2960-LANBASEK9-M
        Cisco IOS Software, C2960 Software (C2960-LANBASEK9-M), Version 15.0(2)SE4, RELEASE SOFTWARE (fc1)
        Technical Support: http://www.cisco.com/techsupport
        Copyright (c) 1986-2013 by Cisco Systems, Inc.
        Compiled Wed 26-Jun-13 02:49 by mnguyen
        Press RETURN to get started!
        %SYS-5-CONFIG_I: Configured from console by console
    Switch>en
    Switch#show ver
        Cisco IOS Software, C2960 Software (C2960-LANBASEK9-M), Version 15.0(2)SE4, RELEASE SOFTWARE (fc1)
        Technical Support: http://www.cisco.com/techsupport
        Copyright (c) 1986-2013 by Cisco Systems, Inc.
        Compiled Wed 26-Jun-13 02:49 by mnguyen
        ROM: Bootstrap program is C2960 boot loader
        BOOTLDR: C2960 Boot Loader (C2960-HBOOT-M) Version 12.2(25r)FX, RELEASE SOFTWARE (fc4)
        Switch uptime is 39 minutes
        System returned to ROM by power-on
        System image file is "flash:c2960-lanbasek9-mz.150-2.SE4.bin"
        This product contains cryptographic features and is subject to United
        States and local country laws governing import, export, transfer and
        use. Delivery of Cisco cryptographic products does not imply
        third-party authority to import, export, distribute or use encryption.
        Importers, exporters, distributors and users are responsible for
        compliance with U.S. and local country laws. By using this product you
        agree to comply with applicable laws and regulations. If you are unable
        to comply with U.S. and local laws, return this product immediately.
        A summary of U.S. laws governing Cisco cryptographic products may be found at:
        http://www.cisco.com/wwl/export/crypto/tool/stqrg.html
        If you require further assistance please contact us by sending email to
        export@cisco.com.
        cisco WS-C2960-24TT-L (PowerPC405) processor (revision B0) with 65536K bytes of memory.
        Processor board ID FOC1010X104
        Last reset from power-on
        1 Virtual Ethernet interface
        24 FastEthernet interfaces
        2 Gigabit Ethernet interfaces
        The password-recovery mechanism is enabled.
        64K bytes of flash-simulated non-volatile configuration memory.
        Base ethernet MAC Address       : 00:90:2B:80:9B:A3
        Motherboard assembly number     : 73-10390-03
        Power supply part number        : 341-0097-02
        Motherboard serial number       : FOC10093R12
        Power supply serial number      : AZS1007032H
        Model revision number           : B0
        Motherboard revision number     : B0
        Model number                    : WS-C2960-24TT-L
        System serial number            : FOC1010X104
        Top Assembly Part Number        : 800-27221-02
        Top Assembly Revision Number    : A0
        Version ID                      : V02
        CLEI Code Number                : COM3L00BRA
        Hardware Board Revision Number  : 0x01
        Switch Ports Model              SW Version            SW Image
        ------ ----- -----              ----------            ----------
        *    1 26    WS-C2960-24TT-L    15.0(2)SE4            C2960-LANBASEK9-M
        Configuration register is 0xF
    Task:
    Изменим конфигурацию. Мы можем сделать рез копию конфигурации на tftp-server
    Decision:
    Switch#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Switch(config)#hostname sw1
    sw1(config)#end
    sw1#
        %SYS-5-CONFIG_I: Configured from console by console
    sw1#wr mem
        Building configuration...
        [OK]
    sw1#show fl
    sw1#show flash:
        Directory of flash:/
            1  -rw-     4414921          <no date>  c2960-lanbase-mz.122-25.FX.bin
            4  -rw-     4670455          <no date>  c2960-lanbasek9-mz.150-2.SE4.bin
            5  -rw-        1090          <no date>  config.text
        64016384 bytes total (54929918 bytes free)
    sw1#
    sw1#cop
    sw1#copy star
    sw1#copy startup-config tf
    sw1#copy startup-config tftp:
        Address or name of remote host []? 192.168.1.4
        Destination filename [sw1-confg]?
        Writing startup-config....!!
        [OK - 1090 bytes]
        1090 bytes copied in 3.092 secs (352 bytes/sec)

        Server-Services-tftp
        sw1-confg
    sw1#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    sw1(config)#hos
    sw1(config)#hostname switch
    switch(config)#end
    switch#
        %SYS-5-CONFIG_I: Configured from console by console
    switch#wr mem
        Building configuration...
        [OK]
    Task:
    Теперь захотелось вернуть настройки
    Decision:
    switch#cop
    switch#copy tft
    switch#copy tftp: run
    switch#copy tftp: running-config
        Address or name of remote host []? 192.168.1.4
        Source filename []? sw1-confg
        Destination filename [running-config]?
        Accessing tftp://192.168.1.4/sw1-confg...
        Loading sw1-confg from 192.168.1.4: !
        [OK - 1090 bytes]
        1090 bytes copied in 0 secs
    sw1#
        %SYS-5-CONFIG_I: Configured from console by console
    sw1#wr mem
        Building configuration...
        [OK]
    sw1#reload
        Proceed with reload? [confirm]
        C2960 Boot Loader (C2960-HBOOT-M) Version 12.2(25r)FX, RELEASE SOFTWARE (fc4)
        Cisco WS-C2960-24TT (RC32300) processor (revision C0) with 21039K bytes of memory.
        2960-24TT starting...
        Base ethernet MAC Address: 0090.2B80.9BA3
        Xmodem file system is available.
        Initializing Flash...
        flashfs[0]: 3 files, 0 directories
        flashfs[0]: 0 orphaned files, 0 orphaned directories
        flashfs[0]: Total bytes: 64016384
        flashfs[0]: Bytes used: 9086466
        flashfs[0]: Bytes available: 54929918
        flashfs[0]: flashfs fsck took 1 seconds.
        ...done Initializing Flash.
        Boot Sector Filesystem (bs:) installed, fsid: 3
        Parameter Block Filesystem (pb:) installed, fsid: 4
        Loading "flash:/c2960-lanbasek9-mz.150-2.SE4.bin"...
        ########################################################################## [OK]
        Smart Init is enabled
        smart init is sizing iomem
                          TYPE      MEMORY_REQ
                        TOTAL:      0x00000000
        Rounded IOMEM up to: 0Mb.
        Using 6 percent iomem. [0Mb/512Mb]
        C2960 Boot Loader (C2960-HBOOT-M) Version 12.2(25r)FX, RELEASE SOFTWARE (fc4)
        Cisco WS-C2960-24TT (RC32300) processor (revision C0) with 21039K bytes of memory.
        2960-24TT starting...
        Base ethernet MAC Address: 0090.2B80.9BA3
        Xmodem file system is available.
        Initializing Flash...
        flashfs[0]: 3 files, 0 directories
        flashfs[0]: 0 orphaned files, 0 orphaned directories
        flashfs[0]: Total bytes: 64016384
        flashfs[0]: Bytes used: 9086466
        flashfs[0]: Bytes available: 54929918
        flashfs[0]: flashfs fsck took 1 seconds.
        ...done Initializing Flash.
        Boot Sector Filesystem (bs:) installed, fsid: 3
        Parameter Block Filesystem (pb:) installed, fsid: 4
        Loading "flash:/c2960-lanbasek9-mz.150-2.SE4.bin"...
        ########################################################################## [OK]
        Smart Init is enabled
        smart init is sizing iomem
                          TYPE      MEMORY_REQ
                        TOTAL:      0x00000000
        Rounded IOMEM up to: 0Mb.
        Using 6 percent iomem. [0Mb/512Mb]
                      Restricted Rights Legend
        Use, duplication, or disclosure by the Government is
        subject to restrictions as set forth in subparagraph
        (c) of the Commercial Computer Software - Restricted
        Rights clause at FAR sec. 52.227-19 and subparagraph
        (c) (1) (ii) of the Rights in Technical Data and Computer
        Software clause at DFARS sec. 252.227-7013.
                   cisco Systems, Inc.
                   170 West Tasman Drive
                   San Jose, California 95134-1706
        Cisco IOS Software, C2960 Software (C2960-LANBASEK9-M), Version 15.0(2)SE4, RELEASE SOFTWARE (fc1)
        Technical Support: http://www.cisco.com/techsupport
        Copyright (c) 1986-2013 by Cisco Systems, Inc.
        Compiled Wed 26-Jun-13 02:49 by mnguyen
        Initializing flashfs...
        fsck: Disable shadow buffering due to heap fragmentation.
        flashfs[2]: 2 files, 1 directories
        flashfs[2]: 0 orphaned files, 0 orphaned directories
        flashfs[2]: Total bytes: 32514048
        flashfs[2]: Bytes used: 11952128
        flashfs[2]: Bytes available: 20561920
        flashfs[2]: flashfs fsck took 2 seconds.
        flashfs[2]: Initialization complete....done Initializing flashfs.
        Checking for Bootloader upgrade..
        Boot Loader upgrade not required (Stage 2)
        POST: CPU MIC register Tests : Begin
        POST: CPU MIC register Tests : End, Status Passed
        POST: PortASIC Memory Tests : Begin
        POST: PortASIC Memory Tests : End, Status Passed
        POST: CPU MIC interface Loopback Tests : Begin
        POST: CPU MIC interface Loopback Tests : End, Status Passed
        POST: PortASIC RingLoopback Tests : Begin
        POST: PortASIC RingLoopback Tests : End, Status Passed
        POST: PortASIC CAM Subsystem Tests : Begin
        POST: PortASIC CAM Subsystem Tests : End, Status Passed
        POST: PortASIC Port Loopback Tests : Begin
        POST: PortASIC Port Loopback Tests : End, Status Passed
        Waiting for Port download...Complete
        This product contains cryptographic features and is subject to United
        States and local country laws governing import, export, transfer and
        use. Delivery of Cisco cryptographic products does not imply
        third-party authority to import, export, distribute or use encryption.
        Importers, exporters, distributors and users are responsible for
        compliance with U.S. and local country laws. By using this product you
        agree to comply with applicable laws and regulations. If you are unable
        to comply with U.S. and local laws, return this product immediately.
        A summary of U.S. laws governing Cisco cryptographic products may be found at:
        http://www.cisco.com/wwl/export/crypto/tool/stqrg.html
        If you require further assistance please contact us by sending email to
        export@cisco.com.
        cisco WS-C2960-24TT-L (PowerPC405) processor (revision B0) with 65536K bytes of memory.
        Processor board ID FOC1010X104
        Last reset from power-on
        1 Virtual Ethernet interface
        24 FastEthernet interfaces
        2 Gigabit Ethernet interfaces
        The password-recovery mechanism is enabled.
        64K bytes of flash-simulated non-volatile configuration memory.
        Base ethernet MAC Address       : 00:90:2B:80:9B:A3
        Motherboard assembly number     : 73-10390-03
        Power supply part number        : 341-0097-02
        Motherboard serial number       : FOC10093R12
        Power supply serial number      : AZS1007032H
        Model revision number           : B0
        Motherboard revision number     : B0
        Model number                    : WS-C2960-24TT-L
        System serial number            : FOC1010X104
        Top Assembly Part Number        : 800-27221-02
        Top Assembly Revision Number    : A0
        Version ID                      : V02
        CLEI Code Number                : COM3L00BRA
        Hardware Board Revision Number  : 0x01
        Switch Ports Model              SW Version            SW Image
        ------ ----- -----              ----------            ----------
        *    1 26    WS-C2960-24TT-L    15.0(2)SE4            C2960-LANBASEK9-M
        Cisco IOS Software, C2960 Software (C2960-LANBASEK9-M), Version 15.0(2)SE4, RELEASE SOFTWARE (fc1)
        Technical Support: http://www.cisco.com/techsupport
        Copyright (c) 1986-2013 by Cisco Systems, Inc.
        Compiled Wed 26-Jun-13 02:49 by mnguyen
        Press RETURN to get started!
        %SYS-5-CONFIG_I: Configured from console by console
    Task:
    Представим ситуацию, что кампания растет, и она решает добавить еще один филиал в соседный город. И ему нужно организовать удаленный доступ к серверам в центральном офисе. То есть мы хотим настроить связь через vpn от центрального офиса к филиалу и наоборот.
    Decision:
        Router2-CLI
    Router>en
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#int fa
    Router(config)#int fastEthernet 0/0
    Router(config-if)#de
    Router(config-if)#des
    Router(config-if)#description site1
    Router(config-if)#ip add
    Router(config-if)#ip address 210.210.1.1 255.255.255.252
    Router(config-if)#no st
    Router(config-if)#no sh
    Router(config-if)#no shutdown
    Router(config-if)#
        %LINK-5-CHANGED: Interface FastEthernet0/0, changed state to up
        %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/0, changed state to up
    Router(config-if)#exit
    Router(config)#int fastEthernet 0/1
    Router(config-if)#description site2
    Router(config-if)#ip address 210.210.2.1 255.255.255.252
    Router(config-if)#no shutdown
    Router(config-if)#
        %LINK-5-CHANGED: Interface FastEthernet0/1, changed state to up
        %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/1, changed state to up
    Router(config-if)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#wr mem
        Building configuration...
        [OK]

        Router0-CLI
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#int
    Router(config)#interface fa
    Router(config)#interface fastEthernet 0
    Router(config)#interface fastEthernet 0/0
    Router(config-if)#des
    Router(config-if)#description outside
    Router(config-if)#ip ad
    Router(config-if)#ip address 210.210.1.2 255.255.255.252
    Router(config-if)#no sh
    Router(config-if)#no shutdown
    Router(config-if)#
        %LINK-5-CHANGED: Interface FastEthernet0/0, changed state to up
    Router(config-if)#exit
    Router(config)#interface fastEthernet 0/1
    Router(config-if)#dis
    Router(config-if)#des
    Router(config-if)#description inside
    Router(config-if)#ip address 192.168.1.1 255.255.255.0
    Router(config-if)#no shutdown
    Router(config-if)#
        %LINK-5-CHANGED: Interface FastEthernet0/1, changed state to up
        %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/1, changed state to up
    Router(config-if)#exit
    Router(config)#ip r
    Router(config)#ip rou
    Router(config)#ip route 0.0.0.0 0.0.0.0 210.210.1.1
    Router(config)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#wr mem
        Building configuration...
        [OK]
    Router(config-if)#show run
        Building configuration...
        Current configuration : 724 bytes
        !
        version 15.1
        no service timestamps log datetime msec
        no service timestamps debug datetime msec
        no service password-encryption
        !
        hostname Router
        !
        !
        !
        !
        !
        !
        !
        !
        ip cef
        no ipv6 cef
        !
        !
        !
        !
        license udi pid CISCO2811/K9 sn FTX1017P684-
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        spanning-tree mode pvst
        !
        !
        !
        !
        !
        !
        interface FastEthernet0/0
         description outside
         ip address 210.210.1.2 255.255.255.252
         duplex auto
         speed auto
        !
        interface FastEthernet0/1
         description inside
         ip address 192.168.1.1 255.255.255.0
         duplex auto
         speed auto
        !
        interface Vlan1
         no ip address
         shutdown
        !
        ip classless
        ip route 0.0.0.0 0.0.0.0 210.210.1.1
        !
    Task:
    Обеспечим доступ в интернет с помощью Nat
    Decision:
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#int fa
    Router(config)#int fastEthernet 0/0
    Router(config-if)#i[ na
    Router(config-if)#ip nat out
    Router(config-if)#ip nat outside
    Router(config-if)#exit
    Router(config)#ip accs
    Router(config)#int fastEthernet 0/1
    Router(config-if)#ip nat inside
    Router(config-if)#exit
    Router(config)#ip acc
    Router(config)#ip access-list stan
    Router(config)#ip access-list standard FOR-NAT
    Router(config-std-nacl)#per
    Router(config-std-nacl)#permit 192.168.1.0 ?
          A.B.C.D  Wildcard bits
          <cr>
    Router(config-std-nacl)#permit 192.168.1.0 0.0.0.255
    Router(config-std-nacl)#exit
    Router(config)#ip nat inside source list FOR-NAT interface fastEthernet 0/0 overload
    Router(config)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#wr mem
        Building configuration...
        [OK]
    Task:
    Тоже самое проделаем для Router 1
    Decision:
         Router1-CLI
    Router>en
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#int
    Router(config)#interface fat
    Router(config)#interface faa
    Router(config)#interface fas
    Router(config)#interface fastEthernet 0/0
    Router(config-if)#des
    Router(config-if)#description ou
    Router(config-if)#description outside
    Router(config-if)#ip add
    Router(config-if)#ip address 210.210.2.2 255.255.255.252
    Router(config-if)#no sh
    Router(config-if)#no shutdown exit
    Router(config-if)#
        %LINK-5-CHANGED: Interface FastEthernet0/0, changed state to up
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#interface fastEthernet 0/0
    Router(config-if)#no shutdown
    Router(config-if)#exit
    Router(config)#interface fastEthernet 0/1
    Router(config-if)#description inside
    Router(config-if)#ip address 210.210.2.1 255.255.255.0
        % 210.210.2.0 overlaps with FastEthernet0/0
    Router(config-if)#ip address 192.168.2.1 255.255.255.0
    Router(config-if)#exit
    Router(config)#ip route 0.0.0.0 0.0.0.0 210.210.2.1
    Router(config-if)#no shutdown
    Router(config)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#wr mem
        Building configuration...
        [OK]
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#in
    Router(config)#interface fa
    Router(config)#interface fastEthernet 0/0
    Router(config-if)#ip nat ou
    Router(config-if)#ip nat outside
    Router(config-if)#exit
    Router(config)#interface fastEthernet 0/1
    Router(config-if)#ip nat inside
    Router(config-if)#exit
    Router(config)#ip acc
    Router(config)#ip access-list st
    Router(config)#ip access-list standard FOR-NAT
    Router(config-std-nacl)#per
    Router(config-std-nacl)#permit 192.168.2.0 0.0.0.255
    Router(config-std-nacl)#exit
    Router(config)#ip n
    Router(config)#ip nat ins
    Router(config)#ip nat inside so
    Router(config)#ip nat inside source li
    Router(config)#ip nat inside source list FOR-NAT in
    Router(config)#ip nat inside source list FOR-NAT interface fa
    Router(config)#ip nat inside source list FOR-NAT interface fastEthernet 0/0 over
    Router(config)#ip nat inside source list FOR-NAT interface fastEthernet 0/0 overload
    Router(config)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#wr mem
        Building configuration...
        [OK]

        PC-PT PC2 - Desktop - command prompt
    C:\>ping 210.210.2.1
        Pinging 210.210.2.1 with 32 bytes of data:
        Request timed out.
        Reply from 210.210.2.1: bytes=32 time<1ms TTL=254
        Reply from 210.210.2.1: bytes=32 time<1ms TTL=254
        Reply from 210.210.2.1: bytes=32 time=1ms TTL=254
        Ping statistics for 210.210.2.1:
            Packets: Sent = 4, Received = 3, Lost = 1 (25% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 1ms, Average = 0ms
    Task:
    Теперь настроим VPN. Сначала необходимо настроить первую фазу
    Decision:
        Router0-CLI
    Router>en
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#cry
    Router(config)#crypto is
    Router(config)#crypto isakmp po
    Router(config)#crypto isakmp policy 1
    Router(config-isakmp)#enc
    Router(config-isakmp)#encryption 3
    Router(config-isakmp)#encryption 3des
    Router(config-isakmp)#ha
    Router(config-isakmp)#hash md5
    Router(config-isakmp)#aut
    Router(config-isakmp)#authentication pre-
    Router(config-isakmp)#authentication pre-share
    Router(config-isakmp)#group 2
    Router(config-isakmp)#exit
    Router(config)#cr
    Router(config)#crypto is
    Router(config)#crypto isakmp ke
    Router(config)#crypto isakmp key cis
    Router(config)#crypto isakmp key cisc
    Router(config)#crypto isakmp key cisco ad
    Router(config)#crypto isakmp key cisco address 210.210.2.2
    Task:
    Вторая фаза
    Decision:
    Router(config)#ip acc
    Router(config)#ip access-list ext
    Router(config)#ip access-list extended FOR-VPN
    Router(config-ext-nacl)#perm
    Router(config-ext-nacl)#permit ip 192.168.1.0 0.0.0.255 192.168.2.0
        % Incomplete command.
    Router(config-ext-nacl)#per
    Router(config-ext-nacl)#permit ip 192.168.1.0 0.0.0.255 192.168.2.0 0.0.0.255
    Router(config-ext-nacl)#exit
    Router(config)#cr
    Router(config)#crypto ips
    Router(config)#crypto ipsec tra
    Router(config)#crypto ipsec transform-set TS es
    Router(config)#crypto ipsec transform-set TS esp
    Router(config)#crypto ipsec transform-set TS esp-
    Router(config)#crypto ipsec transform-set TS esp-3d
    Router(config)#crypto ipsec transform-set TS esp-3des esp-md
    Router(config)#crypto ipsec transform-set TS esp-3des esp-md5-hmac
    Router(config)#cr
    Router(config)#crypto ma
    Router(config)#crypto map CM
    Router(config)#crypto map CMAP 10 ips
    Router(config)#crypto map CMAP 10 ipsec-isakmp
        % NOTE: This new crypto map will remain disabled until a peer
                and a valid access list have been configured.
    Router(config-crypto-map)#set peer 210.210.2.2
    Router(config-crypto-map)#set trans
    Router(config-crypto-map)#set transform-set TSmatc
    Router(config-crypto-map)#set transform-set TS
    Router(config-crypto-map)#mat
    Router(config-crypto-map)#match addr
    Router(config-crypto-map)#match address FOR-VPN
    Router(config-crypto-map)#exit
    Router(config)#int fa
    Router(config)#int fastEthernet 0/0
    Router(config-if)#cry
    Router(config-if)#crypto map CMAP
        *Jan  3 07:16:26.785: %CRYPTO-6-ISAKMP_ON_OFF: ISAKMP is ON
    Router(config-if)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#wr mem
        Building configuration...
        [OK]
    Task:
    Сделаем тоже самое для роутера филиала
    Decision:
        Router1-CLI
    Router>en
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#cr
    Router(config)#crypto is
    Router(config)#crypto isakmp pol
    Router(config)#crypto isakmp policy 1
    Router(config-isakmp)#enc
    Router(config-isakmp)#encryption 3de
    Router(config-isakmp)#encryption 3des
    Router(config-isakmp)#has
    Router(config-isakmp)#hash md5
    Router(config-isakmp)#aut
    Router(config-isakmp)#authentication pre-sh
    Router(config-isakmp)#authentication pre-share
    Router(config-isakmp)#gro
    Router(config-isakmp)#group 2
    Router(config-isakmp)#exit
    Router(config)#cr
    Router(config)#crypto is
    Router(config)#crypto isakmp key
    Router(config)#crypto isakmp key cis
    Router(config)#crypto isakmp key cisco add
    Router(config)#crypto isakmp key cisco address 210.210.1.2
    Router(config)#cr
    Router(config)#crypto i[se
    Router(config)#crypto ips
    Router(config)#crypto ipsec tr
    Router(config)#crypto ipsec transform-set TS es
    Router(config)#crypto ipsec transform-set TS esp
    Router(config)#crypto ipsec transform-set TS esp-3
    Router(config)#crypto ipsec transform-set TS esp-3des esp
    Router(config)#crypto ipsec transform-set TS esp-3des esp-md
    Router(config)#crypto ipsec transform-set TS esp-3des esp-md5-hmac
    Router(config)#ip acc
    Router(config)#ip access-list ext
    Router(config)#ip access-list extended FOR-VPN
    Router(config-ext-nacl)#perm
    Router(config-ext-nacl)#permit ip 192.168.2.0 0.0.0.255 192.168.1.0 0.0.0.255
    Router(config-ext-nacl)#exit
    Router(config)#cr
    Router(config)#crypto ma
    Router(config)#crypto map CMEP 10 ips
    Router(config)#crypto map CMEP 10 ipsec-isakmp
        % NOTE: This new crypto map will remain disabled until a peer
                and a valid access list have been configured.
    Router(config-crypto-map)#set peer 210.210.1.2
    Router(config-crypto-map)#set trans
    Router(config-crypto-map)#set transform-set TS
    Router(config-crypto-map)#mat
    Router(config-crypto-map)#match addre
    Router(config-crypto-map)#match address FOR-VPN
    Router(config-crypto-map)#exit
    Router(config)#int
    Router(config)#interface fa
    Router(config)#interface fastEthernet 0/0
    Router(config-if)#cr
    Router(config-if)#crypto m
    Router(config-if)#crypto map CMAP
        ERROR: Crypto Map with tag CMAP does not exist.
    Router(config-if)#exit
    Router(config)#cr
    Router(config)#crypto ips
    Router(config)#crypto ma
    Router(config)#crypto map CMAP 10 ip
    Router(config)#crypto map CMAP 10 ipsec-isakmp
        % NOTE: This new crypto map will remain disabled until a peer
                and a valid access list have been configured.
    Router(config-crypto-map)#set peer 210.210.1.2
    Router(config-crypto-map)#set transform-set TS
    Router(config-crypto-map)#match address FOR-VPN
    Router(config-crypto-map)#exit
    Router(config)#interface fastEthernet 0/0
    Router(config-if)#crypto map CMAP
        *Jan  3 07:16:26.785: %CRYPTO-6-ISAKMP_ON_OFF: ISAKMP is ON
    Router(config-if)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#wr mem
        Building configuration...
        [OK]

        PC0-desktop-command prompt
    C:\>ping 192.168.2.2
        Pinging 192.168.2.2 with 32 bytes of data:
        Request timed out.
        Reply from 210.210.1.1: Destination host unreachable.
        Reply from 210.210.1.1: Destination host unreachable.
        Reply from 210.210.1.1: Destination host unreachable.
        Ping statistics for 192.168.2.2:
            Packets: Sent = 4, Received = 0, Lost = 4 (100% loss),

        Router0-CLI
    Router#show run
        Building configuration...
        Current configuration : 1272 bytes
        !
        version 15.1
        no service timestamps log datetime msec
        no service timestamps debug datetime msec
        no service password-encryption
        !
        hostname Router
        !
        !
        !
        !
        !
        !
        !
        !
        ip cef
        no ipv6 cef
        !
        !
        !
        !
        license udi pid CISCO2811/K9 sn FTX1017P684-
        !
        !
        !
        crypto isakmp policy 1
         encr 3des
         hash md5
         authentication pre-share
         group 2
        !
        crypto isakmp key cisco address 210.210.2.2
        !
        !
        !
        crypto ipsec transform-set TS esp-3des esp-md5-hmac
        !
        crypto map CMAP 10 ipsec-isakmp
         set peer 210.210.2.2
         set transform-set TS
         match address FOR-VPN
        !
        !
        !
        !
        !
        !
        spanning-tree mode pvst
        !
        !
        !
        !
        !
        !
        interface FastEthernet0/0
         description outside
         ip address 210.210.1.2 255.255.255.252
         ip nat outside
         duplex auto
         speed auto
         crypto map CMAP
        !
        interface FastEthernet0/1
         description inside
         ip address 192.168.1.1 255.255.255.0
         ip nat inside
         duplex auto
         speed auto
        !
        interface Vlan1
         no ip address
         shutdown
        !
        ip nat inside source list FOR-NAT interface FastEthernet0/0 overload
        ip classless
        ip route 0.0.0.0 0.0.0.0 210.210.1.1
        !
        ip flow-export version 9
        !
        !
        ip access-list standard FOR-NAT
         permit 192.168.1.0 0.0.0.255
        ip access-list extended FOR-VPN
         permit ip 192.168.1.0 0.0.0.255 192.168.2.0 0.0.0.255
    Task:
    Нам нужно указать, что трафик локальной сети филиала  не нужно натить
    Decision:
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#no ip access-list standard FOR-NAT
    Router(config)#ip acc
    Router(config)#ip access-list exte
    Router(config)#ip access-list extended FOR-NAT
    Router(config-ext-nacl)#deny ip 192.168.1.0 0.0.0.255 192.168.2.0 0.0.0.255
    Router(config-ext-nacl)#permit ip 192.168.1.0 0.0.0.255 any
    Router(config-ext-nacl)#exit
    Router(config)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#show run
        Building configuration...
        Current configuration : 1332 bytes
        !
        version 15.1
        no service timestamps log datetime msec
        no service timestamps debug datetime msec
        no service password-encryption
        !
        hostname Router
        !
        !
        !
        !
        !
        !
        !
        !
        ip cef
        no ipv6 cef
        !
        !
        !
        !
        license udi pid CISCO2811/K9 sn FTX1017P684-
        !
        !
        !
        crypto isakmp policy 1
         encr 3des
         hash md5
         authentication pre-share
         group 2
        !
        crypto isakmp key cisco address 210.210.2.2
        !
        !
        !
        crypto ipsec transform-set TS esp-3des esp-md5-hmac
        !
        crypto map CMAP 10 ipsec-isakmp
         set peer 210.210.2.2
         set transform-set TS
         match address FOR-VPN
        !
        !
        !
        !
        !
        !
        spanning-tree mode pvst
        !
        !
        !
        !
        !
        !
        interface FastEthernet0/0
         description outside
         ip address 210.210.1.2 255.255.255.252
         ip nat outside
         duplex auto
         speed auto
         crypto map CMAP
        !
        interface FastEthernet0/1
         description inside
         ip address 192.168.1.1 255.255.255.0
         ip nat inside
         duplex auto
         speed auto
        !
        interface Vlan1
         no ip address
         shutdown
        !
        ip nat inside source list FOR-NAT interface FastEthernet0/0 overload
        ip classless
        ip route 0.0.0.0 0.0.0.0 210.210.1.1
        !
        ip flow-export version 9
        !
        !
        ip access-list extended FOR-VPN
         permit ip 192.168.1.0 0.0.0.255 192.168.2.0 0.0.0.255
        ip access-list extended FOR-NAT
         deny ip 192.168.1.0 0.0.0.255 192.168.2.0 0.0.0.255
         permit ip 192.168.1.0 0.0.0.255 any

        Router1-CLI
    Router>en
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#no ip ac
    Router(config)#no ip access-list stand
    Router(config)#no ip access-list standard FOR-NAT
    Router(config)#ip acc
    Router(config)#ip access-list ext
    Router(config)#ip access-list extended F
    Router(config)#ip access-list extended FOR-NAT
    Router(config-ext-nacl)#deny ip 192.168.2.0 0.0.0.255 192.168.1.0 0.0.0.255
    Router(config-ext-nacl)#perm
    Router(config-ext-nacl)#permit ip 192.168.2.0 0.0.0.255 any
    Router(config-ext-nacl)#exit
    Router(config)#exit
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#show run
        Building configuration...
        Current configuration : 1437 bytes
        !
        version 15.1
        no service timestamps log datetime msec
        no service timestamps debug datetime msec
        no service password-encryption
        !
        hostname Router
        !
        !
        !
        !
        !
        !
        !
        !
        ip cef
        no ipv6 cef
        !
        !
        !
        !
        license udi pid CISCO2811/K9 sn FTX1017S440-
        !
        !
        !
        crypto isakmp policy 1
         encr 3des
         hash md5
         authentication pre-share
         group 2
        !
        crypto isakmp key cisco address 210.210.1.2
        !
        !
        !
        crypto ipsec transform-set TS esp-3des esp-md5-hmac
        !
        crypto map CMEP 10 ipsec-isakmp
         set peer 210.210.1.2
         set transform-set TS
         match address FOR-VPN
        !
        !
        crypto map CMAP 10 ipsec-isakmp
         set peer 210.210.1.2
         set transform-set TS
         match address FOR-VPN
        !
        !
        !
        !
        !
        !
        spanning-tree mode pvst
        !
        !
        !
        !
        !
        !
        interface FastEthernet0/0
         description outside
         ip address 210.210.2.2 255.255.255.252
         ip nat outside
         duplex auto
         speed auto
         crypto map CMAP
        !
        interface FastEthernet0/1
         description inside
         ip address 192.168.2.1 255.255.255.0
         ip nat inside
         duplex auto
         speed auto
        !
        interface Vlan1
         no ip address
         shutdown
        !
        ip nat inside source list FOR-NAT interface FastEthernet0/0 overload
        ip classless
        ip route 0.0.0.0 0.0.0.0 210.210.2.1
        !
        ip flow-export version 9
        !
        !
        ip access-list extended FOR-VPN
         permit ip 192.168.2.0 0.0.0.255 192.168.1.0 0.0.0.255
        ip access-list extended FOR-NAT
         deny ip 192.168.2.0 0.0.0.255 192.168.1.0 0.0.0.255
         permit ip 192.168.2.0 0.0.0.255 any
    Router#wr mem
        Building configuration...
        [OK]

        PC0-desktop-command prompt
    C:\>ping 192.168.2.2
        Pinging 192.168.2.2 with 32 bytes of data:
        Request timed out.
        Request timed out.
        Reply from 192.168.2.2: bytes=32 time<1ms TTL=126
        Reply from 192.168.2.2: bytes=32 time=16ms TTL=126
        Ping statistics for 192.168.2.2:
            Packets: Sent = 4, Received = 2, Lost = 2 (50% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 16ms, Average = 8ms

        Router0-CLI
    Router>en
    Router#show
    Router#show cr
    Router#show crypto is
    Router#show crypto isakmp sa
        IPv4 Crypto ISAKMP SA
        dst             src             state          conn-id slot status
        210.210.2.2     210.210.1.2     QM_IDLE           1028    0 ACTIVE
    IPv6 Crypto ISAKMP SA
    Router#show crypto ip
    Router#show crypto ipsec sa
        interface: FastEthernet0/0
            Crypto map tag: CMAP, local addr 210.210.1.2
           protected vrf: (none)
           local  ident (addr/mask/prot/port): (192.168.1.0/255.255.255.0/0/0)
           remote  ident (addr/mask/prot/port): (192.168.2.0/255.255.255.0/0/0)
           current_peer 210.210.2.2 port 500
            PERMIT, flags={origin_is_acl,}
           #pkts encaps: 6, #pkts encrypt: 6, #pkts digest: 0
           #pkts decaps: 6, #pkts decrypt: 6, #pkts verify: 0
           #pkts compressed: 0, #pkts decompressed: 0
           #pkts not compressed: 0, #pkts compr. failed: 0
           #pkts not decompressed: 0, #pkts decompress failed: 0
           #send errors 1, #recv errors 0
             local crypto endpt.: 210.210.1.2, remote crypto endpt.:210.210.2.2
             path mtu 1500, ip mtu 1500, ip mtu idb FastEthernet0/0
             current outbound spi: 0x541FFE4D(1411382861)
             inbound esp sas:
              spi: 0x03C92BD9(63515609)
                transform: esp-3des esp-md5-hmac ,
    Decision:
        R1-CLI
    Router>en
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#route
    Router(config)#router ei
    Router(config)#router eigrp ?
          <1-65535>  Autonomous system number
    Router(config)#router eigrp 1
    Router(config-router)#network 192.168.1.0 0.0.0.255
    Router(config-router)#network 10.10.10.0 0.0.0.3
    Router(config-router)#network 10.10.11.0 0.0.0.3
    Router(config-router)#no au
    Router(config-router)#no auto-summary
    Router(config-router)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#wr mem
        Building configuration...
        [OK]

        R2-CLI
    Router>en
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#router ei
    Router(config)#router eigrp 1
    Router(config-router)#netw
    Router(config-router)#network 192.168.2.0 0.0.0.255
    Router(config-router)#network 10.10.10.0 0.0.0.3
    Router(config-router)#
        %DUAL-5-NBRCHANGE: IP-EIGRP 1: Neighbor 10.10.10.1 (GigabitEthernet0/0) is up: new adjacency
    Router(config-router)#network 10.10.12.0 0.0.0.3
    Router(config-router)#no a
    Router(config-router)#no auto-summary
    Router(config-router)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#wr mem
        Building configuration...
        [OK]

        R3-CLI
    Router>en
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#ro
    Router(config)#router e
    Router(config)#router eigrp 1
    Router(config-router)#net
    Router(config-router)#network 192.168.3.0 0.0.0.255
    Router(config-router)#netw
    Router(config-router)#network 10.10.11.0 0.0.0.3
    Router(config-router)#
        %DUAL-5-NBRCHANGE: IP-EIGRP 1: Neighbor 10.10.11.1 (GigabitEthernet0/1) is up: new adjacency
    Router(config-router)#network 10.10.12.0 0.0.0.3
    Router(config-router)#
        %DUAL-5-NBRCHANGE: IP-EIGRP 1: Neighbor 10.10.12.1 (GigabitEthernet0/0) is up: new adjacency
    Router(config-router)#no a
    Router(config-router)#no auto-summary
    Router(config-router)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#wr mem
        Building configuration...
        [OK]
    Router#show ip eigrp neighbors
        IP-EIGRP neighbors for process 1
        H   Address         Interface      Hold Uptime    SRTT   RTO   Q   Seq
                                           (sec)          (ms)        Cnt  Num
        0   10.10.11.1      Gig0/1         14   00:02:20  40     1000  0   8
        1   10.10.12.1      Gig0/0         12   00:02:04  40     1000  0   12
    Router#show ip route
        Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP
               D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area
               N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2
               E1 - OSPF external type 1, E2 - OSPF external type 2, E - EGP
               i - IS-IS, L1 - IS-IS level-1, L2 - IS-IS level-2, ia - IS-IS inter area
               * - candidate default, U - per-user static route, o - ODR
               P - periodic downloaded static route
        Gateway of last resort is not set
             10.0.0.0/8 is variably subnetted, 5 subnets, 2 masks
        D       10.10.10.0/30 [90/3072] via 10.10.11.1, 00:03:11, GigabitEthernet0/1
                              [90/3072] via 10.10.12.1, 00:02:56, GigabitEthernet0/0
        C       10.10.11.0/30 is directly connected, GigabitEthernet0/1
        L       10.10.11.2/32 is directly connected, GigabitEthernet0/1
        C       10.10.12.0/30 is directly connected, GigabitEthernet0/0
        L       10.10.12.2/32 is directly connected, GigabitEthernet0/0
        D    192.168.1.0/24 [90/5376] via 10.10.11.1, 00:03:11, GigabitEthernet0/1
        D    192.168.2.0/24 [90/5376] via 10.10.12.1, 00:02:56, GigabitEthernet0/0
             192.168.3.0/24 is variably subnetted, 2 subnets, 2 masks
        C       192.168.3.0/24 is directly connected, GigabitEthernet0/2
        L       192.168.3.1/32 is directly connected, GigabitEthernet0/2
             192.168.100.0/32 is subnetted, 1 subnets
        C       192.168.100.3/32 is directly connected, Loopback0

        PC3-Desktop-Command prompt
    C:\>ping 192.168.2.2
        Pinging 192.168.2.2 with 32 bytes of data:
        Request timed out.
        Reply from 192.168.2.2: bytes=32 time<1ms TTL=126
        Reply from 192.168.2.2: bytes=32 time=11ms TTL=126
        Reply from 192.168.2.2: bytes=32 time<1ms TTL=126
        Ping statistics for 192.168.2.2:
            Packets: Sent = 4, Received = 3, Lost = 1 (25% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 11ms, Average = 3ms
    C:\>ping 192.168.1.2
        Pinging 192.168.1.2 with 32 bytes of data:
        Request timed out.
        Reply from 192.168.1.2: bytes=32 time<1ms TTL=126
        Reply from 192.168.1.2: bytes=32 time<1ms TTL=126
        Reply from 192.168.1.2: bytes=32 time=17ms TTL=126
        Ping statistics for 192.168.1.2:
            Packets: Sent = 4, Received = 3, Lost = 1 (25% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 17ms, Average = 5ms
    Task:
    Проверим на отказоустойчивость
    Decision:
        C:\>ping 192.168.2.2 -n 1000
        Pinging 192.168.2.2 with 32 bytes of data:
        Reply from 192.168.2.2: bytes=32 time<1ms TTL=126
        Reply from 192.168.2.2: bytes=32 time=11ms TTL=126
        Reply from 192.168.2.2: bytes=32 time=10ms TTL=126
        Reply from 192.168.2.2: bytes=32 time<1ms TTL=125
        Reply from 192.168.2.2: bytes=32 time<1ms TTL=125
        Reply from 192.168.2.2: bytes=32 time<1ms TTL=125
        Reply from 192.168.2.2: bytes=32 time=2ms TTL=125
        Reply from 192.168.2.2: bytes=32 time=15ms TTL=125
        Reply from 192.168.2.2: bytes=32 time<1ms TTL=125
        Reply from 192.168.2.2: bytes=32 time=11ms TTL=125
        Reply from 192.168.2.2: bytes=32 time<1ms TTL=125
        Reply from 192.168.2.2: bytes=32 time=3ms TTL=125
        Reply from 192.168.2.2: bytes=32 time<1ms TTL=125
        Reply from 192.168.2.2: bytes=32 time<1ms TTL=125
        Ping statistics for 192.168.2.2:
            Packets: Sent = 14, Received = 14, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 15ms, Average = 3ms

        R2-CLI
    Router>en
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#int
    Router(config)#interface gi
    Router(config)#interface gigabitEthernet 0/1
    Router(config-if)#shut
    Router(config-if)#shutdown
    Router(config-if)#
        %LINK-5-CHANGED: Interface GigabitEthernet0/1, changed state to administratively down
        %LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet0/1, changed state to down
        00:31:18: %OSPF-5-ADJCHG: Process 1, Nbr 192.168.100.3 on GigabitEthernet0/1 from FULL to DOWN, Neighbor Down: Interface down or detached
        %DUAL-5-NBRCHANGE: IP-EIGRP 1: Neighbor 10.10.12.2 (GigabitEthernet0/1) is down: interface down

        R3-CLI
    Router#show ip route
        Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP
               D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area
               N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2
               E1 - OSPF external type 1, E2 - OSPF external type 2, E - EGP
               i - IS-IS, L1 - IS-IS level-1, L2 - IS-IS level-2, ia - IS-IS inter area
               * - candidate default, U - per-user static route, o - ODR
               P - periodic downloaded static route
        Gateway of last resort is not set
             10.0.0.0/8 is variably subnetted, 3 subnets, 2 masks
        D       10.10.10.0/30 [90/3072] via 10.10.11.1, 00:16:55, GigabitEthernet0/1
        C       10.10.11.0/30 is directly connected, GigabitEthernet0/1
        L       10.10.11.2/32 is directly connected, GigabitEthernet0/1
        D    192.168.1.0/24 [90/5376] via 10.10.11.1, 00:16:55, GigabitEthernet0/1
        D    192.168.2.0/24 [90/5632] via 10.10.11.1, 00:04:08, GigabitEthernet0/1
             192.168.3.0/24 is variably subnetted, 2 subnets, 2 masks
        C       192.168.3.0/24 is directly connected, GigabitEthernet0/2
        L       192.168.3.1/32 is directly connected, GigabitEthernet0/2
             192.168.100.0/32 is subnetted, 1 subnets
        C       192.168.100.3/32 is directly connected, Loopback0

        R2-CLI
    Router(config-if)#no shutdown
    Router(config-if)#
        %LINK-5-CHANGED: Interface GigabitEthernet0/1, changed state to up
        %LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet0/1, changed state to up
        %DUAL-5-NBRCHANGE: IP-EIGRP 1: Neighbor 10.10.12.2 (GigabitEthernet0/1) is up: new adjacency
    Router(config-if)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#wr mem
        Building configuration...
        [OK]
    Router#
        00:39:10: %OSPF-5-ADJCHG: Process 1, Nbr 192.168.100.3 on GigabitEthernet0/1 from LOADING to FULL, Loading Done
    Task:
    Настроим дефолтную маршрутизацию, чтобы не прописывать ip адреса. Пусть роутер R3 имеет деволтный маршрут через компьютер PC3. Распространим данные по дефолтному маршруту
    Decision:
        R3-CLI
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#ip ro
    Router(config)#ip rou
    Router(config)#ip route 0.0.0.0 0.0.0.0 192.168.3.2
    Router(config)#rou
    Router(config)#router ei
    Router(config)#router eigrp 1
    Router(config-router)#red
    Router(config-router)#redistribute st
    Router(config-router)#redistribute static
    Router(config-router)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#wr mem
        Building configuration...
        [OK]

        R2-CLI
    Router#show ip route
        Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP
               D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area
               N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2
               E1 - OSPF external type 1, E2 - OSPF external type 2, E - EGP
               i - IS-IS, L1 - IS-IS level-1, L2 - IS-IS level-2, ia - IS-IS inter area
               * - candidate default, U - per-user static route, o - ODR
               P - periodic downloaded static route
        Gateway of last resort is 10.10.12.2 to network 0.0.0.0
             10.0.0.0/8 is variably subnetted, 5 subnets, 2 masks
        C       10.10.10.0/30 is directly connected, GigabitEthernet0/0
        L       10.10.10.2/32 is directly connected, GigabitEthernet0/0
        D       10.10.11.0/30 [90/3072] via 10.10.10.1, 00:33:28, GigabitEthernet0/0
                              [90/3072] via 10.10.12.2, 00:08:55, GigabitEthernet0/1
        C       10.10.12.0/30 is directly connected, GigabitEthernet0/1
        L       10.10.12.1/32 is directly connected, GigabitEthernet0/1
        D    192.168.1.0/24 [90/5376] via 10.10.10.1, 00:33:28, GigabitEthernet0/0
             192.168.2.0/24 is variably subnetted, 2 subnets, 2 masks
        C       192.168.2.0/24 is directly connected, GigabitEthernet0/2
        L       192.168.2.1/32 is directly connected, GigabitEthernet0/2
        D    192.168.3.0/24 [90/5376] via 10.10.12.2, 00:08:55, GigabitEthernet0/1
             192.168.100.0/32 is subnetted, 1 subnets
        C       192.168.100.2/32 is directly connected, Loopback0
        D*EX 0.0.0.0/0 [170/28416] via 10.10.12.2, 00:01:28, GigabitEthernet0/1
    Task:
    Consider three routers and three computers that are hiding in the network behind the router
    It is necessary to make sure that all ip addresses are available on the computer network, while it is not necessary to prescribe static routes on routers
    Decision:
        R1 - CLI
    Router>en
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#in
    Router(config)#interface gi
    Router(config)#interface gigabitEthernet 0/0
    Router(config-if)#ip address 10.10.10.1 255.255.255.252
    Router(config-if)#no shutdown
    Router(config-if)#
        %LINK-5-CHANGED: Interface GigabitEthernet0/0, changed state to up
        %LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet0/0, changed state to up
    Router(config-if)#exit
    Router(config)#interface gigabitEthernet 0/1
    Router(config-if)#ip address 10.10.11.1 255.255.255.252
    Router(config-if)#no shutdown
    Router(config-if)#
        %LINK-5-CHANGED: Interface GigabitEthernet0/1, changed state to up
    Router(config-if)#exit
    Router(config)#interface gigabitEthernet 0/2
    Router(config-if)#ip address 192.168.1.1 255.255.255.0
    Router(config-if)#no shutdown
    Router(config-if)#
        %LINK-5-CHANGED: Interface GigabitEthernet0/2, changed state to up
    Router(config-if)#exit
    Router(config)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#wr mem
        Building configuration...
        [OK]

        R2 - CLI
    Router>en
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#int
    Router(config)#interface G
    Router(config)#interface GigabitEthernet 0/0
    Router(config-if)#ipad
    Router(config-if)#ip add
    Router(config-if)#ip address 10.10.10.2 255.255.255.252
    Router(config-if)#no sh
    Router(config-if)#no shutdown
    Router(config-if)#
        %LINK-5-CHANGED: Interface GigabitEthernet0/0, changed state to up
    Router(config-if)#exit
    Router(config)#interface GigabitEthernet 0/1
    Router(config-if)#ip address 10.10.12.1 255.255.255.252
    Router(config-if)#no sh
    Router(config-if)#no shutdown
    Router(config-if)#
        %LINK-5-CHANGED: Interface GigabitEthernet0/1, changed state to up
    Router(config-if)#exit
    Router(config)#interface GigabitEthernet 0/2
    Router(config-if)#ip address 192.168.2.1 255.255.255.0
    Router(config-if)#no shutdown
    Router(config-if)#
        %LINK-5-CHANGED: Interface GigabitEthernet0/2, changed state to up
    Router(config-if)#exit
    Router(config)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#wr mem
        Building

        R3 - CLI
    Router>en
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#int
    Router(config)#interface G
    Router(config)#interface GigabitEthernet 0/0
    Router(config-if)#ip ad
    Router(config-if)#ip address 10.10.12.2 255.255.255.252
    Router(config-if)#no sh
    Router(config-if)#no shutdown
    Router(config-if)#
        %LINK-5-CHANGED: Interface GigabitEthernet0/0, changed state to up
        %LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet0/0, changed state to up
    Router(config-if)#exit
    Router(config)#interface GigabitEthernet 0/1
    Router(config-if)#ip address 10.10.11.2 255.255.255.252
    Router(config-if)#no shutdown
    Router(config-if)#
        %LINK-5-CHANGED: Interface GigabitEthernet0/1, changed state to up
    Router(config-if)#interface GigabitEthernet 0/2
    Router(config-if)#exit
    Router(config)#interface GigabitEthernet 0/2
    Router(config-if)#ip address 192.168.3.1 255.255.255.0
    Router(config-if)#no shutdown
    Router(config-if)#
        %LINK-5-CHANGED: Interface GigabitEthernet0/2, changed state to up
    Router(config-if)#exit
    Router(config)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#wr mem
        Building configuration...
        [OK]

        PC1,2,3 - ip address: 192.168.1.2, 2.2, 3.2 - Gateway: 192.168.1.1, 2.1, 3.1 - R1 - CLI
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#int loo
    Router(config)#int loopback 0
    Router(config-if)#
        %LINK-5-CHANGED: Interface Loopback0, changed state to up
        %LINEPROTO-5-UPDOWN: Line protocol on Interface Loopback0, changed state to up
    Router(config-if)#ip add
    Router(config-if)#ip address 192.168.100.1 255.255.255.255
    Router(config-if)#no shu
    Router(config-if)#no shutdown
    Router(config-if)#exit
    Router(config)#rou
    Router(config)#router ?
          bgp    Border Gateway Protocol (BGP)
          eigrp  Enhanced Interior Gateway Routing Protocol (EIGRP)
          ospf   Open Shortest Path First (OSPF)
          rip    Routing Information Protocol (RIP)
    Router(config)#router os
    Router(config)#router ospf ?
          <1-65535>  Process ID
    Router(config)#router ospf 1
    Task:
    Укажем все сети (10.10.10.0, 11.0, 192.168.1.0), которые подключены к нашему маршрутизатору
    Decision:
    Router(config-router)#network 192.168.1.0 0.0.0.255 ar
    Router(config-router)#network 192.168.1.0 0.0.0.255 area ?
          <0-4294967295>  OSPF area ID as a decimal value
          A.B.C.D         OSPF area ID in IP address format
    Router(config-router)#network 192.168.1.0 0.0.0.255 area 0
    Router(config-router)#network 10.10.10.0 0.0.0.3 area 0
    Router(config-router)#network 10.10.11.0 0.0.0.3 area 0
    Router(config-router)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#wr mem
        Building configuration...
        [OK]

        R2 - CLI
    Router>en
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#in
    Router(config)#interface loo
    Router(config)#interface loopback 0
    Router(config-if)#
        %LINK-5-CHANGED: Interface Loopback0, changed state to up
        %LINEPROTO-5-UPDOWN: Line protocol on Interface Loopback0, changed state to up
    Router(config-if)#ip
    Router(config-if)#ipad
    Router(config-if)#ip ad
    Router(config-if)#ip address 192.168.100.2 255.255.255.255
    Router(config-if)#no shu
    Router(config-if)#no shutdown
    Router(config-if)#exit
    Router(config)#rou
    Router(config)#router os
    Router(config)#router ospf 1
    Router(config-router)#ne
    Router(config-router)#net
    Router(config-router)#network 192.168.2.0 0.0.0.255 area 0
    Router(config-router)#network 10.10.10.0 0.0.0.3 area 0
    Router(config-router)#network 10.10.12.0 0.0.0.3 area 0
    Router(config-router)#
        00:39:01: %OSPF-5-ADJCHG: Process 1, Nbr 192.168.100.1 on GigabitEthernet0/0 from LOADING to FULL, Loading Done
    Router(config-router)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console

        R3 - CLI
    Router>en
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#int
    Router(config)#interface lo
    Router(config)#interface loopback 0
    Router(config-if)#
        %LINK-5-CHANGED: Interface Loopback0, changed state to up
        %LINEPROTO-5-UPDOWN: Line protocol on Interface Loopback0, changed state to up
    Router(config-if)#ip address 192.168.100.3 255.255.255.255
    Router(config-if)#no sh
    Router(config-if)#no shutdown
    Router(config-if)#exit
    Router(config)#rou
    Router(config)#router os
    Router(config)#router ospf 1
    Router(config-router)#network 192.168.3.0 0.0.0.255 area 0
    Router(config-router)#network 10.10.11.0 0.0.0.3 area 0
    Router(config-router)#network 10.10.12.0 0.0.0.3 area 0
    Router(config-router)#end
    00:46:25: %OSPF-5-ADJCHG: Process 1, Nbr 192.168.100.2 on GigabitEthernet0/0 from LOADING to FULL, Loading Done
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#wr mem
        Building configuration...
        [OK]
    Router>en
    Router#show ip os
    Router#show ip ospf ne
    Router#show ip ospf neighbor
        Neighbor ID     Pri   State           Dead Time   Address         Interface
        192.168.100.2     1   FULL/BDR        00:00:38    10.10.12.1      GigabitEthernet0/0
        192.168.100.1     1   FULL/BDR        00:00:38    10.10.11.1      GigabitEthernet0/1
    Router#show ip rou
    Router#show ip route
        Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP
               D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area
               N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2
               E1 - OSPF external type 1, E2 - OSPF external type 2, E - EGP
               i - IS-IS, L1 - IS-IS level-1, L2 - IS-IS level-2, ia - IS-IS inter area
               * - candidate default, U - per-user static route, o - ODR
               P - periodic downloaded static route
        Gateway of last resort is not set
             10.0.0.0/8 is variably subnetted, 5 subnets, 2 masks
        O       10.10.10.0/30 [110/2] via 10.10.12.1, 00:11:31, GigabitEthernet0/0
                              [110/2] via 10.10.11.1, 00:11:31, GigabitEthernet0/1
        C       10.10.11.0/30 is directly connected, GigabitEthernet0/1
        L       10.10.11.2/32 is directly connected, GigabitEthernet0/1
        C       10.10.12.0/30 is directly connected, GigabitEthernet0/0
        L       10.10.12.2/32 is directly connected, GigabitEthernet0/0
        O    192.168.1.0/24 [110/2] via 10.10.11.1, 00:11:31, GigabitEthernet0/1
        O    192.168.2.0/24 [110/2] via 10.10.12.1, 00:11:31, GigabitEthernet0/0
             192.168.3.0/24 is variably subnetted, 2 subnets, 2 masks
        C       192.168.3.0/24 is directly connected, GigabitEthernet0/2
        L       192.168.3.1/32 is directly connected, GigabitEthernet0/2
             192.168.100.0/32 is subnetted, 1 subnets
        C       192.168.100.3/32 is directly connected, Loopback0
    Router#ping 192.168.1.2
        Type escape sequence to abort.
        Sending 5, 100-byte ICMP Echos to 192.168.1.2, timeout is 2 seconds:
        .!!!!
        Success rate is 80 percent (4/5), round-trip min/avg/max = 0/6/24 ms
    Router#ping 192.168.2.2
        Type escape sequence to abort.
        Sending 5, 100-byte ICMP Echos to 192.168.2.2, timeout is 2 seconds:
        .!!!!
        Success rate is 80 percent (4/5), round-trip min/avg/max = 0/0/0 ms
    Task:
    Попробуем потушить link на роутере R1
    Decision:
        R3-CLI
    Router#show ip route
        ...
        O    192.168.1.0/24 [110/2] via 10.10.11.1, 00:11:31, GigabitEthernet0/1
        O    192.168.2.0/24 [110/2] via 10.10.12.1, 00:11:31, GigabitEthernet0/0
        ...

        PC3-Desktop-Command Prompt
    C:\>ping
        Cisco Packet Tracer PC Ping
        Usage: ping [-n count | -v TOS | -t ] target
    C:\>ping 192.168.1.2 -n 1000
        Pinging 192.168.1.2 with 32 bytes of data:
        Reply from 192.168.1.2: bytes=32 time<1ms TTL=126
        Reply from 192.168.1.2: bytes=32 time<1ms TTL=126
        Reply from 192.168.1.2: bytes=32 time<1ms TTL=126

        R1-CLI
    Router>en
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#inter
    Router(config)#interface g
    Router(config)#interface gigabitEthernet 0/1
    Router(config-if)#sho
    Router(config-if)#shutd
    Router(config-if)#shutdown
    Router(config-if)#
        %LINK-5-CHANGED: Interface GigabitEthernet0/1, changed state to administratively down
        %LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet0/1, changed state to down
        00:25:29: %OSPF-5-ADJCHG: Process 1, Nbr 192.168.100.3 on GigabitEthernet0/1 from FULL to DOWN, Neighbor Down: Interface down or detached

        R3-CLI
    Router#
        %LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet0/1, changed state to down
        00:25:29: %OSPF-5-ADJCHG: Process 1, Nbr 192.168.100.1 on GigabitEthernet0/1 from FULL to DOWN, Neighbor Down: Interface down or detached
    Router#show ip route
        Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP
               D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area
               N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2
               E1 - OSPF external type 1, E2 - OSPF external type 2, E - EGP
               i - IS-IS, L1 - IS-IS level-1, L2 - IS-IS level-2, ia - IS-IS inter area
               * - candidate default, U - per-user static route, o - ODR
               P - periodic downloaded static route
        Gateway of last resort is not set
             10.0.0.0/8 is variably subnetted, 3 subnets, 2 masks
        O       10.10.10.0/30 [110/2] via 10.10.12.1, 00:00:06, GigabitEthernet0/0
        C       10.10.12.0/30 is directly connected, GigabitEthernet0/0
        L       10.10.12.2/32 is directly connected, GigabitEthernet0/0
        O    192.168.1.0/24 [110/3] via 10.10.12.1, 00:00:06, GigabitEthernet0/0
        O    192.168.2.0/24 [110/2] via 10.10.12.1, 00:24:45, GigabitEthernet0/0
             192.168.3.0/24 is variably subnetted, 2 subnets, 2 masks
        C       192.168.3.0/24 is directly connected, GigabitEthernet0/2
        L       192.168.3.1/32 is directly connected, GigabitEthernet0/2
             192.168.100.0/32 is subnetted, 1 subnets
        C       192.168.100.3/32 is directly connected, Loopback0

        PC3-Desktop-Command Prompt

        Reply from 192.168.1.2: bytes=32 time<1ms TTL=126
        Request timed out.
        Reply from 192.168.1.2: bytes=32 time=10ms TTL=125
        Reply from 192.168.1.2: bytes=32 time=10ms TTL=125
        Reply from 192.168.1.2: bytes=32 time=13ms TTL=125
        Reply from 192.168.1.2: bytes=32 time<1ms TTL=125
        Reply from 192.168.1.2: bytes=32 time<1ms TTL=125
    Task:
    Имеется 2 здания. В первом установлен Router1, во втором - Router2, и есть какой-то узел связи, где стоит центральный маршрутизатор связи, который обеспечивает нам доступ в интернет (ROuter 0). При этом каждый маршрутизатор имеет 2 сегмента - первый VLAN 10, второй VLAN 20, во тором роутере VLAN 30 и 40.
    Decision:
        Switch1-CLI
    Switch>en
    Switch#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Switch(config)#int f
    Switch(config)#int fastEthernet 0/1
    Switch(config-if)#swi
    Switch(config-if)#switchport mode tr
    Switch(config-if)#switchport mode trunk
    Switch(config-if)#switchport tru
    Switch(config-if)#switchport trunk all
    Switch(config-if)#switchport trunk allowed vlan 10,20
    Switch(config-if)#exit
    Switch(config)#in
    Switch(config)#interface fa
    Switch(config)#interface fastEthernet 0/2
    Switch(config-if)#swi
    Switch(config-if)#switchport mo
    Switch(config-if)#switchport mode acc
    Switch(config-if)#switchport mode access
    Switch(config-if)#switchport acc
    Switch(config-if)#switchport access vlan 10
        % Access VLAN does not exist. Creating vlan 10
    Switch(config-if)#exit
    Switch(config)#vlan 10
    Switch(config-vlan)#name vlan10
    Switch(config-vlan)#exit
    Switch(config)#vlan 20
    Switch(config-vlan)#name vlan20
    Switch(config-vlan)#exit
    Switch(config)#interface fastEthernet 0/2
    Switch(config-if)#switchport access vlan 10
    Switch(config-if)#exit
    Switch(config)#interface fastEthernet 0/3
    Switch(config-if)#switchport access vlan 20
    Switch(config-if)#exit
    Switch(config)#end
    Switch#
        %SYS-5-CONFIG_I: Configured from console by console
    Switch#wr mem
        Building configuration...
        [OK]
    Switch#show run
        Building configuration...
        Current configuration : 1218 bytes
        !
        version 15.0
        no service timestamps log datetime msec
        no service timestamps debug datetime msec
        no service password-encryption
        !
        hostname Switch
        !
        !
        !
        !
        !
        !
        spanning-tree mode pvst
        spanning-tree extend system-id
        !
        interface FastEthernet0/1
         switchport trunk allowed vlan 10,20
         switchport mode trunk
        !
        interface FastEthernet0/2
         switchport access vlan 10
         switchport mode access
        !
        interface FastEthernet0/3
         switchport access vlan 20
        !
        interface FastEthernet0/4
        !

        Router1-CLI
    Router>en
    Router#int
    Router#inte
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#int
    Router(config)#interface fa
    Router(config)#interface fastEthernet 0/0
    Router(config-if)#no sh
    Router(config-if)#no shutdown
    Router(config-if)#
        %LINK-5-CHANGED: Interface FastEthernet0/0, changed state to up
    Router(config-if)#exit
    Router(config)#interface fastEthernet 0/1.10
    Router(config-subif)#enc
    Router(config-subif)#encapsulation do
    Router(config-subif)#encapsulation dot1Q 10
    Router(config-subif)#ip add
    Router(config-subif)#ip address 192.16
    Router(config-subif)#ip address 192.168.10.1 255.255.255.0
    Router(config-subif)#no sh
    Router(config-subif)#no shutdown
    Router(config-subif)#exit
    Router(config)#interface fastEthernet 0/1.20
    Router(config-subif)#encapsulation dot1Q 20
    Router(config-subif)#ip address 192.168.20.1 255.255.255.0
    Router(config-subif)#no shutdown
    Router(config-subif)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#wr mem
        Building configuration...
        [OK]
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#int
    Router(config)#interface fa
    Router(config)#interface fastEthernet 0/0
    Router(config-if)#no shu
    Router(config-if)#no shutdown
    Router(config-if)#ip ad
    Router(config-if)#ip address 192.168.1.2 255.255.255.0
    Router(config-if)#no shutdown
    Router(config-if)#exit
    Router(config)#interface fastEthernet 0/1
    Router(config-if)#no sh
    Router(config-if)#no shutdown
    Router(config-if)#
        %LINK-5-CHANGED: Interface FastEthernet0/1, changed state to up
        %LINK-5-CHANGED: Interface FastEthernet0/1.10, changed state to up
        %LINK-5-CHANGED: Interface FastEthernet0/1.20, changed state to up
    Router(config-if)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#wr mem
        Building configuration...
        [OK]
    Router#show run
        Building configuration...
        Current configuration : 767 bytes
        !
        version 12.4
        no service timestamps log datetime msec
        no service timestamps debug datetime msec
        no service password-encryption
        !
        hostname Router
        !
        !
        !
        !
        !
        !
        !
        !
        ip cef
        no ipv6 cef
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        spanning-tree mode pvst
        !
        !
        !
        !
        !
        !
        interface FastEthernet0/0
         ip address 192.168.1.2 255.255.255.252
         duplex auto
         speed auto
        !
        interface FastEthernet0/1
         no ip address
         duplex auto
         speed auto
        !
        interface FastEthernet0/1.10
         encapsulation dot1Q 10
         ip address 192.168.10.1 255.255.255.0
        !
        interface FastEthernet0/1.20
         encapsulation dot1Q 20
         ip address 192.168.20.1 255.255.255.0
        !

        Switch2-CLI
    Switch>en
    Switch#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Switch(config)#int
    Switch(config)#interface fa
    Switch(config)#interface fastEthernet 0/1
    Switch(config-if)#sw
    Switch(config-if)#switchport mode tr
    Switch(config-if)#switchport mode trunk
    Switch(config-if)#switchport trunk all
    Switch(config-if)#switchport trunk allowed vlan 30,40
    Switch(config-if)#exit
    Switch(config)#vlan 30
    Switch(config-vlan)#name vlan30
    Switch(config-vlan)#exit
    Switch(config)#vlan 40
    Switch(config-vlan)#name vlan40
    Switch(config-vlan)#exit
    Switch(config)#interface fastEthernet 0/1
    Switch(config-if)#exit
    Switch(config)#interface fastEthernet 0/2
    Switch(config-if)#swit
    Switch(config-if)#switchport ac
    Switch(config-if)#switchport access vla
    Switch(config-if)#switchport access vlan 30
    Switch(config-if)#sw
    Switch(config-if)#switchport mode ac
    Switch(config-if)#switchport mode access
    Switch(config-if)#exit
    Switch(config)#interface fastEthernet 0/3
    Switch(config-if)#switchport access vlan 40
    Switch(config-if)#switchport mode access
    Switch(config-if)#end
    Switch#
        %SYS-5-CONFIG_I: Configured from console by console
    Switch#wr mem
        Building configuration...
        [OK]
    Switch#show run
        Building configuration...
        Current configuration : 1242 bytes
        !
        version 15.0
        no service timestamps log datetime msec
        no service timestamps debug datetime msec
        no service password-encryption
        !
        hostname Switch
        !
        !
        !
        !
        !
        !
        spanning-tree mode pvst
        spanning-tree extend system-id
        !
        interface FastEthernet0/1
         switchport trunk allowed vlan 30,40
         switchport mode trunk
        !
        interface FastEthernet0/2
         switchport access vlan 30
         switchport mode access
        !
        interface FastEthernet0/3
         switchport access vlan 40
         switchport mode access
        !
        interface FastEthernet0/4
        !

        Router2-CLI
    Router>en
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#in
    Router(config)#interface fa
    Router(config)#interface fastEthernet 0/0
    Router(config-if)#ip add
    Router(config-if)#ip address 192.168.2.2 255
    Router(config-if)#ip address 192.168.2.2 255.255.255.252
    Router(config-if)#no sh
    Router(config-if)#no shutdown
    Router(config-if)#
        %LINK-5-CHANGED: Interface FastEthernet0/0, changed state to up
    Router(config-if)#exit
    Router(config)#interface fastEthernet 0/1.30
    Router(config-subif)#enc
    Router(config-subif)#encapsulation dot
    Router(config-subif)#encapsulation dot1Q 30
    Router(config-subif)#ip add
    Router(config-subif)#ip address 192.168.30.1 255.255.255.0
    Router(config-subif)#no sh
    Router(config-subif)#no shutdown
    Router(config-subif)#exit
    Router(config)#interface fastEthernet 0/1.40
    Router(config-subif)#encapsulation dot1Q 40
    Router(config-subif)#ip address 192.168.40.1 255.255.255.0
    Router(config-subif)#exit
    Router(config)#interface fastEthernet 0/1
    Router(config-if)#no shutdown
    Router(config-if)#
        %LINK-5-CHANGED: Interface FastEthernet0/1, changed state to up
        %LINK-5-CHANGED: Interface FastEthernet0/1.30, changed state to up
        %LINK-5-CHANGED: Interface FastEthernet0/1.40, changed state to up
    Router(config-if)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#wr mem
        Building configuration...
        [OK]
    Router#show run
        Building configuration...
        Current configuration : 759 bytes
        !
        version 12.4
        no service timestamps log datetime msec
        no service timestamps debug datetime msec
        no service password-encryption
        !
        hostname Router
        !
        !
        !
        !
        !
        !
        !
        !
        ip cef
        no ipv6 cef
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        spanning-tree mode pvst
        !
        !
        !
        !
        !
        !
        interface FastEthernet0/0
         ip address 192.168.2.2 255.255.255.252
         duplex auto
         speed auto
        !
        interface FastEthernet0/1
         no ip address
         duplex auto
         speed auto
        !
        interface FastEthernet0/1.30
         encapsulation dot1Q 30
         ip address 192.168.30.1 255.255.255.0
        !
        interface FastEthernet0/1.40
         encapsulation dot1Q 40
         ip address 192.168.40.1 255.255.255.0
        !

        Router0 - CLI
    Router>en
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#int
    Router(config)#interface G
    Router(config)#interface GigabitEthernet 0/0
    Router(config-if)#ip add
    Router(config-if)#ip address 210.214.1.2 255.255.255.252
    Router(config-if)#no sh
    Router(config-if)#no shutdown
    Router(config-if)#
        %LINK-5-CHANGED: Interface GigabitEthernet0/0, changed state to up
    Router(config-if)#exit
    Router(config)#interface GigabitEthernet 0/1
    Router(config-if)#ip address 192.168.1.1 255.255.255.252
    Router(config-if)#no shutdown
    Router(config-if)#
        %LINK-5-CHANGED: Interface GigabitEthernet0/1, changed state to up
    Router(config-if)#exit
    Router(config)#interface GigabitEthernet 0/2
    Router(config-if)#ip address 192.168.2.1 255.255.255.252
    Router(config-if)#no shutdown
    Router(config-if)#
        %LINK-5-CHANGED: Interface GigabitEthernet0/2, changed state to up
    Router(config-if)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#wr mem
        Building configuration...
        [OK]
    Router#show run
        Building configuration...
        Current configuration : 749 bytes
        !
        version 15.1
        no service timestamps log datetime msec
        no service timestamps debug datetime msec
        no service password-encryption
        !
        hostname Router
        !
        !
        !
        !
        !
        !
        !
        !
        ip cef
        no ipv6 cef
        !
        !
        !
        !
        license udi pid CISCO2911/K9 sn FTX1524GHMH-
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        spanning-tree mode pvst
        !
        !
        !
        !
        !
        !
        interface GigabitEthernet0/0
         ip address 210.214.1.2 255.255.255.252
         duplex auto
         speed auto
        !
        interface GigabitEthernet0/1
         ip address 192.168.1.1 255.255.255.252
         duplex auto
         speed auto
        !
        interface GigabitEthernet0/2
         ip address 192.168.2.1 255.255.255.252
         duplex auto
         speed auto
        !

        Internet - CLI
    Router>en
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#int
    Router(config)#interface Gi
    Router(config)#interface GigabitEthernet 0/0
    Router(config-if)#ip address 210.214.1.1 255.255.255.252
    Router(config-if)#exit
    Router(config)#interface GigabitEthernet 0/1
    Router(config-if)#ip address 210.214.2.1 255.255.255.0
    Router(config-if)#no sh
    Router(config-if)#no shutdown
    Router(config-if)#
        %LINK-5-CHANGED: Interface GigabitEthernet0/1, changed state to up
    Router(config-if)#exit
    Router(config)#interface GigabitEthernet 0/0
    Router(config-if)#no shutdown
    Router(config-if)#
        %LINK-5-CHANGED: Interface GigabitEthernet0/0, changed state to up
        %LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet0/0, changed state to up
    Router(config-if)#exit
    Router(config)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#wr mem
        Building configuration...
        [OK]
    Router#show run
        Building configuration...
        Current configuration : 732 bytes
        !
        version 15.1
        no service timestamps log datetime msec
        no service timestamps debug datetime msec
        no service password-encryption
        !
        hostname Router
        !
        !
        !
        !
        !
        !
        !
        !
        ip cef
        no ipv6 cef
        !
        !
        !
        !
        license udi pid CISCO2911/K9 sn FTX1524PEHQ-
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        spanning-tree mode pvst
        !
        !
        !
        !
        !
        !
        interface GigabitEthernet0/0
         ip address 210.214.1.1 255.255.255.252
         duplex auto
         speed auto
        !
        interface GigabitEthernet0/1
         ip address 210.214.2.1 255.255.255.0
         duplex auto
         speed auto
        !
        interface GigabitEthernet0/2
         no ip address
         duplex auto
         speed auto
         shutdown
        !

        Router1 - CLI
    Router>en
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#int loo
    Router(config)#int loopback 0
    Router(config-if)#
        %LINK-5-CHANGED: Interface Loopback0, changed state to up
        %LINEPROTO-5-UPDOWN: Line protocol on Interface Loopback0, changed state to up
    Router(config-if)#ip add
    Router(config-if)#ip address 192.168.100.1 255.255.255.255
    Router(config-if)#no sh
    Router(config-if)#no shutdown
    Router(config-if)#no sh
    Router(config-if)#no shutdown
    Router(config-if)#rou
    Router(config-if)#route
    Router(config-if)#exit
    Router(config)#rou
    Router(config)#router os
    Router(config)#router ospf 1
    Task:
    Перечислим сети, которые подключены к нашему маршрутизатору
    Decision:
    Router(config-router)#network 192.168.10.0 0.0.0.255 are
    Router(config-router)#network 192.168.10.0 0.0.0.255 area 0
    Router(config-router)#network 192.168.20.0 0.0.0.255 area 0
    Router(config-router)#network 192.168.1.0 0.0.0.3 area 0
    Router(config-router)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#wr mem
        Building configuration...
        [OK]
    Task:
    Делаем тоже самое для Router2
    Decision:
        Router2 - CLI
    Router>en
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#in
    Router(config)#interface loo
    Router(config)#interface loopback 0
    Router(config-if)#
        %LINK-5-CHANGED: Interface Loopback0, changed state to up
        %LINEPROTO-5-UPDOWN: Line protocol on Interface Loopback0, changed state to up
    Router(config-if)#ip add
    Router(config-if)#ip address 192.168.100.2 255.255.255.255
    Router(config-if)#no sh
    Router(config-if)#no shutdown
    Router(config-if)#exit
    Router(config)#rou
    Router(config)#router osp
    Router(config)#router ospf 1
    Router(config-router)#net
    Router(config-router)#network 192.168.30.0 0.0.0.255 area 0
    Router(config-router)#network 192.168.40.0 0.0.0.255 area 0
    Router(config-router)#network 192.168.2.0 0.0.0.3 area 0
    Router(config-router)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#wr mem
        Building configuration...
        [OK]
    Task:
    В зданиях мы настроили роутеры 1 и 2, теперь нужно настроить центральный роутер. У него также три интерфейса, но есть 1 интерфейс, который смотрит в сторону провайдера и здесь используются белые ip адреса. его не нужно включать в ospf, так как наш провайдер все равно принимать пакеты динамической маршрутизации не будет
    Decision:
        Router0 - CLI
    Router>en
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#in
    Router(config)#interface loo
    Router(config)#interface loopback 0
    Router(config-if)#
        %LINK-5-CHANGED: Interface Loopback0, changed state to up
        %LINEPROTO-5-UPDOWN: Line protocol on Interface Loopback0, changed state to up
    Router(config-if)#ip add
    Router(config-if)#ip address 192.168.100.3 255.255.255.255
    Router(config-if)#no sh
    Router(config-if)#no shutdown
    Router(config-if)#exit
    Router(config)#rout
    Router(config)#router os
    Router(config)#router ospf 1
    Router(config-router)#netw
    Router(config-router)#network 192.168.1.0 0.0.0.3 area 0
    Router(config-router)#network 192.168.2.0 0.0.0.3 area 0
    Router(config-router)#
        00:33:15: %OSPF-5-ADJCHG: Process 1, Nbr 192.168.100.1 on GigabitEthernet0/1 from LOADING to FULL, Loading Done
        00:33:19: %OSPF-5-ADJCHG: Process 1, Nbr 192.168.100.2 on GigabitEthernet0/2 from LOADING to FULL, Loading Done
    Router(config-router)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#wr mem
        Building configuration...
        [OK]
    Router#show ip is
    Router#show ip os
    Router#show ip ospf ne
    Router#show ip ospf neighbor
        Neighbor ID     Pri   State           Dead Time   Address         Interface
        192.168.100.1     1   FULL/DR         00:00:35    192.168.1.2     GigabitEthernet0/1
        192.168.100.2     1   FULL/DR         00:00:30    192.168.2.2     GigabitEthernet0/2
    Router#
    Router#show ip route
        Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP
               D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area
               N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2
               E1 - OSPF external type 1, E2 - OSPF external type 2, E - EGP
               i - IS-IS, L1 - IS-IS level-1, L2 - IS-IS level-2, ia - IS-IS inter area
               * - candidate default, U - per-user static route, o - ODR
               P - periodic downloaded static route
        Gateway of last resort is not set
             192.168.1.0/24 is variably subnetted, 2 subnets, 2 masks
        C       192.168.1.0/30 is directly connected, GigabitEthernet0/1
        L       192.168.1.1/32 is directly connected, GigabitEthernet0/1
             192.168.2.0/24 is variably subnetted, 2 subnets, 2 masks
        C       192.168.2.0/30 is directly connected, GigabitEthernet0/2
        L       192.168.2.1/32 is directly connected, GigabitEthernet0/2
        O    192.168.10.0/24 [110/2] via 192.168.1.2, 00:01:24, GigabitEthernet0/1
        O    192.168.20.0/24 [110/2] via 192.168.1.2, 00:01:24, GigabitEthernet0/1
        O    192.168.30.0/24 [110/2] via 192.168.2.2, 00:01:24, GigabitEthernet0/2
        O    192.168.40.0/24 [110/2] via 192.168.2.2, 00:01:24, GigabitEthernet0/2
             192.168.100.0/32 is subnetted, 1 subnets
        C       192.168.100.3/32 is directly connected, Loopback0

        Router2 - CLI
    Router>en
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#show ip rou
    Router#show ip route
        Codes: C - connected, S - static, I - IGRP, R - RIP, M - mobile, B - BGP
               D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area
               N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2
               E1 - OSPF external type 1, E2 - OSPF external type 2, E - EGP
               i - IS-IS, L1 - IS-IS level-1, L2 - IS-IS level-2, ia - IS-IS inter area
               * - candidate default, U - per-user static route, o - ODR
               P - periodic downloaded static route
        Gateway of last resort is not set
             192.168.1.0/30 is subnetted, 1 subnets
        O       192.168.1.0 [110/2] via 192.168.2.1, 00:03:51, FastEthernet0/0
             192.168.2.0/30 is subnetted, 1 subnets
        C       192.168.2.0 is directly connected, FastEthernet0/0
        O    192.168.10.0/24 [110/3] via 192.168.2.1, 00:03:51, FastEthernet0/0
        O    192.168.20.0/24 [110/3] via 192.168.2.1, 00:03:51, FastEthernet0/0
        C    192.168.30.0/24 is directly connected, FastEthernet0/1.30
        C    192.168.40.0/24 is directly connected, FastEthernet0/1.40
             192.168.100.0/32 is subnetted, 1 subnets
        C       192.168.100.2 is directly connected, Loopback0

        PC-PT VLAN40 - Desktop - ip configuration - ip address 192.168.40.2 - subnet 255.255.255.0 - gateway 192.168.40.1 - PC-PT VLAN10 - Desktop - ip configuration - ip address 192.168.10.2 - subnet 255.255.255.0 - gateway 192.168.10.1 - PC-PT VLAN20 - Desktop - ip configuration - ip address 192.168.20.2 - subnet 255.255.255.0 - gateway 192.168.20.1 - PC-PT VLAN30 - Desktop - ip configuration - ip address 192.168.30.2 - subnet 255.255.255.0 - gateway 192.168.30.1 - command prompt -
    C:\>ping 192.168.10.2
        Pinging 192.168.10.2 with 32 bytes of data:
        Request timed out.
        Reply from 192.168.10.2: bytes=32 time=11ms TTL=125
        Reply from 192.168.10.2: bytes=32 time<1ms TTL=125
        Reply from 192.168.10.2: bytes=32 time<1ms TTL=125
        Ping statistics for 192.168.10.2:
            Packets: Sent = 4, Received = 3, Lost = 1 (25% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 11ms, Average = 3ms
    C:\>ping 192.168.20.2
        Pinging 192.168.20.2 with 32 bytes of data:
        Request timed out.
        Reply from 192.168.20.2: bytes=32 time=1ms TTL=125
        Reply from 192.168.20.2: bytes=32 time<1ms TTL=125
        Reply from 192.168.20.2: bytes=32 time=149ms TTL=125
        Ping statistics for 192.168.20.2:
            Packets: Sent = 4, Received = 3, Lost = 1 (25% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 149ms, Average = 50ms
    Task:
    Мы добавили маршруты только локальных сетей. А нам необоходим выход в интернет. Надо про писать default gateway в сторону интернет провайдера
    Decision:
        Router0 - CLI
    Router>en
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#ip rout
    Router(config)#ip route 0.0.0.0 0.0.0.0 210.214.1.1
    Task:
    Маршрут мы прописали, теперь надо сообщить об этом 2м другим маршрутизаторам
    Decision:
    Router(config)#rou
    Router(config)#router os
    Router(config)#router ospf 1
    Router(config-router)#de
    Router(config-router)#default-information ?
          originate  Distribute a default route
    Router(config-router)#default-information oi
    Router(config-router)#default-information or
    Router(config-router)#default-information originate
    Router(config-router)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#wr mem
        Building configuration...
        [OK]

        Router1 - CLI
    Router#show ip route
        Codes: C - connected, S - static, I - IGRP, R - RIP, M - mobile, B - BGP
               D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area
               N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2
               E1 - OSPF external type 1, E2 - OSPF external type 2, E - EGP
               i - IS-IS, L1 - IS-IS level-1, L2 - IS-IS level-2, ia - IS-IS inter area
               * - candidate default, U - per-user static route, o - ODR
               P - periodic downloaded static route
        Gateway of last resort is 192.168.1.1 to network 0.0.0.0
             192.168.1.0/30 is subnetted, 1 subnets
        C       192.168.1.0 is directly connected, FastEthernet0/0
             192.168.2.0/30 is subnetted, 1 subnets
        O       192.168.2.0 [110/2] via 192.168.1.1, 00:43:30, FastEthernet0/0
        C    192.168.10.0/24 is directly connected, FastEthernet0/1.10
        C    192.168.20.0/24 is directly connected, FastEthernet0/1.20
        O    192.168.30.0/24 [110/3] via 192.168.1.1, 00:43:30, FastEthernet0/0
        O    192.168.40.0/24 [110/3] via 192.168.1.1, 00:43:30, FastEthernet0/0
             192.168.100.0/32 is subnetted, 1 subnets
        C       192.168.100.1 is directly connected, Loopback0
        O*E2 0.0.0.0/0 [110/1] via 192.168.1.1, 00:02:07, FastEthernet0/0
    Task:
    Настроим в центральном маршрутизаторе NAT
    Decision:
        Route0 - CLI
    Router#show run
        Building configuration...
        Current configuration : 993 bytes
        !
        version 15.1
        no service timestamps log datetime msec
        no service timestamps debug datetime msec
        no service password-encryption
        !
        hostname Router
        !
        !
        !
        !
        !
        !
        !
        !
        ip cef
        no ipv6 cef
        !
        !
        !
        !
        license udi pid CISCO2911/K9 sn FTX1524GHMH-
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        spanning-tree mode pvst
        !
        !
        !
        !
        !
        !
        interface Loopback0
         ip address 192.168.100.3 255.255.255.255
        !
        interface GigabitEthernet0/0
         ip address 210.214.1.2 255.255.255.252
         duplex auto
         speed auto
        !
        interface GigabitEthernet0/1
         ip address 192.168.1.1 255.255.255.252
         duplex auto
         speed auto
        !
        interface GigabitEthernet0/2
         ip address 192.168.2.1 255.255.255.252
         duplex auto
         speed auto
        !
        interface Vlan1
         no ip address
         shutdown
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#int
    Router(config)#interface gi
    Router(config)#interface gigabitEthernet 0/0
    Router(config-if)#ip nat outside
    Router(config-if)#exit
    Router(config)#interface gigabitEthernet 0/1
    Router(config-if)#ip nat inside
    Router(config-if)#exit
    Router(config)#interface gigabitEthernet 0/2
    Router(config-if)#ip nat inside
    Router(config-if)#exit
    Router(config)#ip acc
    Router(config)#ip access-list ?
          extended  Extended Access List
          standard  Standard Access List
    Router(config)#ip access-list st
    Router(config)#ip access-list standard FOR-NAT
    Router(config-std-nacl)#permit ?
          A.B.C.D  Address to match
          any      Any source host
          host     A single host address
    Router(config-std-nacl)#permit 192.168.10.0 0.0.0.255
    Router(config-std-nacl)#permit 192.168.20.0 0.0.0.255
    Router(config-std-nacl)#permit 192.168.30.0 0.0.0.255
    Router(config-std-nacl)#permit 192.168.40.0 0.0.0.255
    Router(config-std-nacl)#exit
    Router(config)#ip nat inside sou
    Router(config)#ip nat inside source list F
    Router(config)#ip nat inside source list FOR-NAT ?
          interface  Specify interface for global address
          pool       Name pool of global addresses
    Router(config)#ip nat inside source list FOR-NAT in
    Router(config)#ip nat inside source list FOR-NAT interface g
    Router(config)#ip nat inside source list FOR-NAT interface gigabitEthernet 0/0 ?
          overload  Overload an address translation
          <cr>
    Router(config)#ip nat inside source list FOR-NAT interface gigabitEthernet 0/0 over
    Router(config)#ip nat inside source list FOR-NAT interface gigabitEthernet 0/0 overload
    Router(config)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#wr mem
        Building configuration...
        [OK]

        Server0 - Desktop - ip configuration - ip address 210.214.2.2 - default gateway 210.214.2.1 - PC-PT VLAN10 - Desktop - Command prompt
    C:\>ping 210.214.2.2
        Pinging 210.214.2.2 with 32 bytes of data:
        Request timed out.
        Request timed out.
        Reply from 210.214.2.2: bytes=32 time=13ms TTL=125
        Reply from 210.214.2.2: bytes=32 time<1ms TTL=125
        Ping statistics for 210.214.2.2:
            Packets: Sent = 4, Received = 2, Lost = 2 (50% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 13ms, Average = 6ms

        Router0 - CLI  
    Router#show ip nat translations
        Pro  Inside global     Inside local       Outside local      Outside global
        icmp 210.214.1.2:1     192.168.10.2:1     210.214.2.2:1      210.214.2.2:1
        icmp 210.214.1.2:2     192.168.10.2:2     210.214.2.2:2      210.214.2.2:2
        icmp 210.214.1.2:3     192.168.10.2:3     210.214.2.2:3      210.214.2.2:3
        icmp 210.214.1.2:4     192.168.10.2:4     210.214.2.2:4      210.214.2.2:4
        icmp 210.214.1.2:5     192.168.10.2:5     210.214.2.2:5      210.214.2.2:5
        icmp 210.214.1.2:6     192.168.10.2:6     210.214.2.2:6      210.214.2.2:6
        icmp 210.214.1.2:7     192.168.10.2:7     210.214.2.2:7      210.214.2.2:7
        icmp 210.214.1.2:8     192.168.10.2:8     210.214.2.2:8      210.214.2.2:8
    Task:
    We have one switch and router and several computers
    Decision:
        Router0 - CLI
    Router>en
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#int fa0/0
    Router(config-if)#no sh
    Router(config-if)#no shutdown
    Router(config-if)#
        %LINK-5-CHANGED: Interface FastEthernet0/0, changed state to up
        %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/0, changed state to up
    Router(config-if)#ip add
    Router(config-if)#ip address 192.168.1.1 255.255.255.0
    Router(config-if)#exit
    Task:
    Create a DHCP pool (some kind of ip address space)
    Decision:
    Router(config)#ip dhcp pool DHCP
    Router(dhcp-config)#network 192.168.1.0 255.255.255.0
    Router(dhcp-config)#defa
    Router(dhcp-config)#default-router 192.168.1.1
    Router(dhcp-config)#dns-server 8.8.8.8
    Router(dhcp-config)#exit
    Task:
    exclude certain ip addresses
    Decision:
    Router(config)#ip dhcp  excluded-address 192.168.1.100
    Router(config)#ip dhcp  excluded-address 192.168.1.1
    Router(config)#exit
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#wr mem
        Building configuration...
        [OK]
    Task:
    Настроить компьютеры
    Decision:
        PC0,1,2 - Desktop - ip configuration - +DHCP - Убедимся, что ip адреса автоматически добавляются
    Task:
    Проверить связь
    Decision:
        PC0 - Desktop - command prompt
    C:\>ping 192.168.1.1
        Pinging 192.168.1.1 with 32 bytes of data:
        Reply from 192.168.1.1: bytes=32 time=11ms TTL=255
        Reply from 192.168.1.1: bytes=32 time<1ms TTL=255
        Reply from 192.168.1.1: bytes=32 time<1ms TTL=255
        Reply from 192.168.1.1: bytes=32 time<1ms TTL=255
        Ping statistics for 192.168.1.1:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 11ms, Average = 2ms
    C:\>ping 192.168.1.3
        Pinging 192.168.1.3 with 32 bytes of data:
        Reply from 192.168.1.3: bytes=32 time<1ms TTL=128
        Reply from 192.168.1.3: bytes=32 time<1ms TTL=128
        Reply from 192.168.1.3: bytes=32 time<1ms TTL=128
        Reply from 192.168.1.3: bytes=32 time=1ms TTL=128
        Ping statistics for 192.168.1.3:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 1ms, Average = 0ms
    C:\>ping 192.168.1.4
        Pinging 192.168.1.4 with 32 bytes of data:
        Reply from 192.168.1.4: bytes=32 time<1ms TTL=128
        Reply from 192.168.1.4: bytes=32 time<1ms TTL=128
        Reply from 192.168.1.4: bytes=32 time<1ms TTL=128
        Reply from 192.168.1.4: bytes=32 time<1ms TTL=128
        Ping statistics for 192.168.1.4:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 0ms, Average = 0ms
    Task:
    See which computers and which ip addresses were issued
    Decision:
    Router#show ip dhcp binding
        IP address       Client-ID/              Lease expiration        Type
                         Hardware address
        192.168.1.2      0090.21EC.999A           --                     Automatic
        192.168.1.3      0060.3E23.49DD           --                     Automatic
        192.168.1.4      0010.1109.2ACD           --                     Automatic
    Task:
    We have 3 different network segments (Vlan2,3,4) and a dedicated dhcp server
    Task:
    Segmenting our network. Create a VLAN.
    Decision:
        switch1 - cli
    Switch>en
    Switch#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Switch(config)#vlan 2
    Switch(config-vlan)#name VLAN2
    Switch(config-vlan)#exit
    Switch(config)#vlan 3
    Switch(config-vlan)#name VLAN3
    Switch(config-vlan)#exit
    Switch(config)#vlan 4
    Switch(config-vlan)#name DHCP
    Switch(config-vlan)#exit
    Task:
    Настроим порты. Задать VLAN 2,3 на порты fa0/1,2,3,4
    Decision:
    Switch(config)#int range fa
    Switch(config)#int range fastEthernet 0/1-2
    Switch(config-if-range)#swi
    Switch(config-if-range)#switchport mode
    Switch(config-if-range)#switchport mode acc
    Switch(config-if-range)#switchport mode access
    Switch(config-if-range)#swi
    Switch(config-if-range)#switchport acc
    Switch(config-if-range)#switchport access vla
    Switch(config-if-range)#switchport access vlan 2
    Switch(config-if-range)#exit
    Switch(config)#int range fastEthernet 0/3-4
    Switch(config-if-range)#switchport mode access
    Switch(config-if-range)#switchport access vlan 3
    Switch(config-if-range)#exit
    Switch(config)#int range fastEthernet 0/5
    Switch(config-if-range)#switchport mode access
    Switch(config-if-range)#switchport access vlan 4
    Switch(config-if-range)#exit
    Task:
    The vlan needs to be pushed to the router
    Decision:
    Switch(config)#int fa
    Switch(config)#int fastEthernet 0/6
    Switch(config-if)#switchport mode trunk
    Switch(config-if)#swi
    Switch(config-if)#switchport tr
    Switch(config-if)#switchport trunk all
    Switch(config-if)#switchport trunk allowed vla
    Switch(config-if)#switchport trunk allowed vlan 2,3,4
    Switch(config-if)#exit
    Switch(config)#end
    Switch#
        %SYS-5-CONFIG_I: Configured from console by console
    Switch#wr mem
        Building configuration...
        [OK]
    Switch#show run
        Building configuration...
        Current configuration : 1388 bytes
        !
        version 15.0
        no service timestamps log datetime msec
        no service timestamps debug datetime msec
        no service password-encryption
        !
        hostname Switch
        !
        !
        !
        !
        !
        !
        spanning-tree mode pvst
        spanning-tree extend system-id
        !
        interface FastEthernet0/1
         switchport access vlan 2
         switchport mode access
        !
        interface FastEthernet0/2
         switchport access vlan 2
         switchport mode access
        !
        interface FastEthernet0/3
         switchport access vlan 3
         switchport mode access
        !
        interface FastEthernet0/4
         switchport access vlan 3
         switchport mode access
        !
        interface FastEthernet0/5
         switchport access vlan 4
         switchport mode access
        !
        interface FastEthernet0/6
         switchport trunk allowed vlan 2-4
         switchport mode trunk
    Task:
    Configure the router's sub-interface for 2,3,4 vlans
    Decision:
        router1 - cli
    Router>en
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#int g
    Router(config)#int gigabitEthernet 0/0.2
    Router(config-subif)#enc
    Router(config-subif)#encapsulation do
    Router(config-subif)#encapsulation dot1Q 2
    Router(config-subif)#ip
    Router(config-subif)#ip add
    Router(config-subif)#ip address 192.168.2.1 255.255.255.0
    Router(config-subif)#no sh
    Router(config-subif)#no shutdown
    Router(config-subif)#exit
    Router(config)#int gigabitEthernet 0/0
    Router(config-if)#no shutdown
    Router(config-if)#
        %LINK-5-CHANGED: Interface GigabitEthernet0/0, changed state to up
        %LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet0/0, changed state to up
        %LINK-5-CHANGED: Interface GigabitEthernet0/0.2, changed state to up
        %LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet0/0.2, changed state to up
    Router(config-if)#exit
    Router(config)#int gigabitEthernet 0/0.3
    Router(config-subif)#
        %LINK-5-CHANGED: Interface GigabitEthernet0/0.3, changed state to up
        %LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet0/0.3, changed state to up
    Router(config-subif)#encapsulation dot1Q 3
    Router(config-subif)#ip address 192.168.3.1 255.255.255.0
    Router(config-subif)#no shutdown
    Router(config-subif)#exit
    Router(config)#int gigabitEthernet 0/0.4
    Router(config-subif)#
        %LINK-5-CHANGED: Interface GigabitEthernet0/0.4, changed state to up
        %LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet0/0.4, changed state to up
    Router(config-subif)#encapsulation dot1Q 4
    Router(config-subif)#ip address 192.168.4.1 255.255.255.0
    Router(config-subif)#no shutdown
    Router(config-subif)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#wr mem
        Building configuration...
        [OK]
    Router#show run
        Building configuration...
        Current configuration : 882 bytes
        !
        version 15.1
        no service timestamps log datetime msec
        no service timestamps debug datetime msec
        no service password-encryption
        !
        hostname Router
        !
        !
        !
        !
        !
        !
        !
        !
        ip cef
        no ipv6 cef
        !
        !
        !
        !
        license udi pid CISCO2901/K9 sn FTX1524I7AI-
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        spanning-tree mode pvst
        !
        !
        !
        !
        !
        !
        interface GigabitEthernet0/0
         no ip address
         duplex auto
         speed auto
        !
        interface GigabitEthernet0/0.2
         encapsulation dot1Q 2
         ip address 192.168.2.1 255.255.255.0
        !
        interface GigabitEthernet0/0.3
         encapsulation dot1Q 3
         ip address 192.168.3.1 255.255.255.0
        !
        interface GigabitEthernet0/0.4
         encapsulation dot1Q 4
         ip address 192.168.4.1 255.255.255.0
        !
        interface GigabitEthernet0/1
         no ip address
         duplex auto
         speed auto
         shutdown
        !
    Task:
    Configure the DHCP Server
    Decision:
        server0 - dekstop - ip configuration - ip address 192.168.4.2 - subnet mask 255.255.255.0 - default gateway 192.168.4.1 - command prompt
    C:\>ping 192.168.4.1
        Pinging 192.168.4.1 with 32 bytes of data:
        Reply from 192.168.4.1: bytes=32 time=6ms TTL=255
        Reply from 192.168.4.1: bytes=32 time<1ms TTL=255
        Reply from 192.168.4.1: bytes=32 time<1ms TTL=255
        Reply from 192.168.4.1: bytes=32 time<1ms TTL=255
        Ping statistics for 192.168.4.1:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 6ms, Average = 1ms
        services - dhcp - убеждаемся, что видим один дефолтный server pool - pool name DCHP-VLAN2 - start ip address 192.168.2.0 - default gateway 192.168.2.1 - dns server - 8.8.8.8 - service +On - Add - тоже самое для 3тьего vlan
    Task:
    The Dhcp server is located in a separate segment and a broadcast request from computers 3,4,5,6 in the search for a Dhcp server, the router will not pass. Since the computers are in different segments. It is necessary to forward computer requests to the Dhcp server.
    Decision:
        Router1 - ClI
    Router>en
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#int g
    Router(config)#int gigabitEthernet 0/0.2
    Router(config-subif)#ip hel
    Router(config-subif)#ip help
    Router(config-subif)#ip helper-address 192.168.4.2
    Router(config-subif)#exit
    Router(config)#int gigabitEthernet 0/0.3
    Router(config-subif)#ip helper-address 192.168.4.2
    Router(config-subif)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#wr mem
        Building configuration...
        [OK]

        PC3,4,5,6 - desktop - ip configuration - +dhcp - Убеждаемтся в том, что dhcp автоматически раздал адреса - PC6 - command prompt
    C:\>ping 192.168.3.1
        Pinging 192.168.3.1 with 32 bytes of data:
        Reply from 192.168.3.1: bytes=32 time=2ms TTL=255
        Reply from 192.168.3.1: bytes=32 time=2ms TTL=255
        Reply from 192.168.3.1: bytes=32 time<1ms TTL=255
        Reply from 192.168.3.1: bytes=32 time<1ms TTL=255
        Ping statistics for 192.168.3.1:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 2ms, Average = 1ms
    C:\>ping 192.168.2.2
        Pinging 192.168.2.2 with 32 bytes of data:
        Request timed out.
        Reply from 192.168.2.2: bytes=32 time<1ms TTL=127
        Reply from 192.168.2.2: bytes=32 time<1ms TTL=127
        Reply from 192.168.2.2: bytes=32 time=1ms TTL=127
        Ping statistics for 192.168.2.2:
            Packets: Sent = 4, Received = 3, Lost = 1 (25% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 1ms, Average = 0ms
    Task:
    we will set up communication between the two offices via routing. In the 1st office there are 3 Vlans that are routed by one router. The second office has 2 Vlan users and one Vlan servers. In it, all routing is carried out by the L3 switch

    a router was also added to it. Let's run it and see that the L3 switch is pinged, and the computer is not:

        Router1 - CLI
    Router>en
    Router#show run
        ...
        interface GigabitEthernet0/0
         ip address 192.168.55.1 255.255.255.0
         duplex auto
         speed auto
        !
        interface GigabitEthernet0/1
        ...
    Router#ping 192.168.55.2
        Type escape sequence to abort.
        Sending 5, 100-byte ICMP Echos to 192.168.55.2, timeout is 2 seconds:
        .!!!!
        Success rate is 80 percent (4/5), round-trip min/avg/max = 0/0/0 ms
    Router#ping 192.168.22.2
        Type escape sequence to abort.
        Sending 5, 100-byte ICMP Echos to 192.168.22.2, timeout is 2 seconds:
        .....
        Success rate is 0 percent (0/5)
    Значит, нам нужно прописать маршруты, что данные компьютеры доступны только через L3 коммутаторы.
    Decision:
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#ip route 192.168.22.0 255.255.255.0 192.168.55.2
    Router(config)#ip route 192.168.33.0 255.255.255.0 192.168.55.2
    Router(config)#ip route 192.168.44.0 255.255.255.0 192.168.55.2
    Router(config)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#ping 192.168.22.2
        Type escape sequence to abort.
        Sending 5, 100-byte ICMP Echos to 192.168.22.2, timeout is 2 seconds:
        !!!!!
        Success rate is 100 percent (5/5), round-trip min/avg/max = 0/0/0 ms
    Router#ping 192.168.33.2
        Type escape sequence to abort.
        Sending 5, 100-byte ICMP Echos to 192.168.33.2, timeout is 2 seconds:
        !!!!!
        Success rate is 100 percent (5/5), round-trip min/avg/max = 0/2/12 ms
    Router#ping 192.168.44.2
        Type escape sequence to abort.
        Sending 5, 100-byte ICMP Echos to 192.168.44.2, timeout is 2 seconds:
        !!!!!
        Success rate is 100 percent (5/5), round-trip min/avg/max = 0/6/33 ms
    Task:
    Соединим 2 маршрутизатора. пусть у нас есть прямой линк. На роутере 2911 нужно настроить GigabitEthernet01
    Decision:
        Router1-CLI
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#int gi
    Router(config)#int gigabitEthernet 0/1
    Router(config-if)#no shu
    Router(config-if)#no shutdown
    Router(config-if)#
        %LINK-5-CHANGED: Interface GigabitEthernet0/1, changed state to up
    Router(config-if)#ip ad
    Router(config-if)#ip address 192.168.70.1 255.255.255.252
    Router(config-if)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#wr mem
        Building configuration...
        [OK]

        Router0-CLI
    Router>en
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#int fa
    Router(config)#int fastEthernet 0/1
    Router(config-if)#no shu
    Router(config-if)#no shutdown
    Router(config-if)#
        %LINK-5-CHANGED: Interface FastEthernet0/1, changed state to up
        %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/1, changed state to up
    Router(config-if)#ip address 192.168.70.2 255.255.255.252
    Router(config-if)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#wr mem
        Building configuration...
        [OK]
    Router#ping 192.168.70.1
        Type escape sequence to abort.
        Sending 5, 100-byte ICMP Echos to 192.168.70.1, timeout is 2 seconds:
        .!!!!
        Success rate is 80 percent (4/5), round-trip min/avg/max = 0/0/0 ms
    Task:
    Пропинговав компьютеры c двух офисов увидим, что они друг с другом не пингуются. Для этого нужно прописать маршрут в маршрутизаторах route0,1 до самих компов. То есть нужно прописать на роутерах маршрут по умолчанию
    Decision:
        PC0-Desktop-command prompt
    C:\>ping 192.168.22.2
        Pinging 192.168.22.2 with 32 bytes of data:
        Reply from 192.168.2.1: Destination host unreachable.
        Reply from 192.168.2.1: Destination host unreachable.
        Reply from 192.168.2.1: Destination host unreachable.
        Reply from 192.168.2.1: Destination host unreachable.
        Ping statistics for 192.168.22.2:
            Packets: Sent = 4, Received = 0, Lost = 4 (100% loss),

        Route0-CLI
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#ip route 0.0.0.0 0.0.0.0 192.168.70.1
    Router(config)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#wr mem
        Building configuration...
        [OK]
    Router#show ip route
        Codes: C - connected, S - static, I - IGRP, R - RIP, M - mobile, B - BGP
               D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area
               N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2
               E1 - OSPF external type 1, E2 - OSPF external type 2, E - EGP
               i - IS-IS, L1 - IS-IS level-1, L2 - IS-IS level-2, ia - IS-IS inter area
               * - candidate default, U - per-user static route, o - ODR
               P - periodic downloaded static route
        Gateway of last resort is 192.168.70.1 to network 0.0.0.0
        C    192.168.2.0/24 is directly connected, FastEthernet0/0.2
        C    192.168.3.0/24 is directly connected, FastEthernet0/0.3
        C    192.168.4.0/24 is directly connected, FastEthernet0/0.4
             192.168.70.0/30 is subnetted, 1 subnets
        C       192.168.70.0 is directly connected, FastEthernet0/1
        S*   0.0.0.0/0 [1/0] via 192.168.70.1

        Switch0-CLI
    Switch>en
    Switch#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Switch(config)#ip route 0.0.0.0 0.0.0.0 192.168.55.1
    Switch(config)#end
    Switch#
        %SYS-5-CONFIG_I: Configured from console by console
    Switch#wr mem
        Building configuration...
        [OK]

        Router1 - CLI
    Router>en
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#ip route 0.0.0.0 0.0.0.0 192.168.55.1
        %Invalid next hop address (it's this router)
    Router(config)#
    Router(config)#ip route 192.168.2.0 255.255.255.0 192.168.70.2
    Router(config)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#wr mem
        Building configuration...
        [OK]
    Router#ping 192.168.2.2
        Type escape sequence to abort.
        Sending 5, 100-byte ICMP Echos to 192.168.2.2, timeout is 2 seconds:
        !!!!!
        Success rate is 100 percent (5/5), round-trip min/avg/max = 0/1/6 ms

        PC0-Desktop-command prompt
    C:\>ping 192.168.22.2
        Pinging 192.168.22.2 with 32 bytes of data:
        Reply from 192.168.22.2: bytes=32 time=59ms TTL=125
        Reply from 192.168.22.2: bytes=32 time<1ms TTL=125
        Reply from 192.168.22.2: bytes=32 time=49ms TTL=125
        Reply from 192.168.22.2: bytes=32 time=23ms TTL=125
        Ping statistics for 192.168.22.2:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 59ms, Average = 32ms
    Task:
    из PC1 пинговаться не будет. Нужно настроить. Пропишем адреса для всех компов в роутерах
    Decision:
        Router1 - CLI
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#ip route 192.168.32.0 255.255.255.0 192.168.70.2
    Router(config)#no ip route 192.168.32.0 255.255.255.0 192.168.70.2
    Router(config)#ip route 192.168.3.0 255.255.255.0 192.168.70.2
    Router(config)#ip route 192.168.4.0 255.255.255.0 192.168.70.2
    Router(config)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#wr mem
        Building configuration...
        [OK]

        PC1-Desktop-command prompt
    C:\>ping 192.168.22.2
        Pinging 192.168.22.2 with 32 bytes of data:
        Reply from 192.168.22.2: bytes=32 time<1ms TTL=125
        Reply from 192.168.22.2: bytes=32 time=15ms TTL=125
        Reply from 192.168.22.2: bytes=32 time<1ms TTL=125
        Reply from 192.168.22.2: bytes=32 time=12ms TTL=125
        Ping statistics for 192.168.22.2:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 15ms, Average = 6ms

    Task:
    Усложним задачу и поставим еще один роутер (1841 Route2) вместо прямого кабеля между маршрутизаторами Route1 и Route0
    Decision:
        Router2-CLI
    Router>en
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#int fa
    Router(config)#int fastEthernet 0/0
    Router(config-if)#no shu
    Router(config-if)#no shutdown
    Router(config-if)#
        %LINK-5-CHANGED: Interface FastEthernet0/0, changed state to up
        %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/0, changed state to up
    Router(config-if)#ip add
    Router(config-if)#ip address 192.168.70.1 255.255.255.0
    Router(config-if)#exit
    Router(config)#int fastEthernet 0/1
    Router(config-if)#no shutdown
    Router(config-if)#
        %LINK-5-CHANGED: Interface FastEthernet0/1, changed state to up
        %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/1, changed state to up
    Router(config-if)#ip address 192.168.80.1 255.255.255.0
    Router(config-if)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#wr mem
        Building configuration...
        [OK]

        Router0-CLI
    Router>en
    Router#show run
        ...
        interface FastEthernet0/0
         no ip address
         duplex auto
         speed auto
        !
        interface FastEthernet0/0.2
         encapsulation dot1Q 2
         ip address 192.168.2.1 255.255.255.0
        !
        interface FastEthernet0/0.3
         encapsulation dot1Q 3
         ip address 192.168.3.1 255.255.255.0
        !
        interface FastEthernet0/0.4
         encapsulation dot1Q 4
         ip address 192.168.4.1 255.255.255.0
        !
        interface FastEthernet0/1
         ip address 192.168.70.2 255.255.255.252
         duplex auto
         speed auto
        !
        interface Vlan1
         no ip address
         shutdown
        !
        ip classless
        ip route 0.0.0.0 0.0.0.0 192.168.70.1
        !
        ip flow-export version 9
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#int fa
    Router(config)#int fastEthernet 0/1
    Router(config-if)#ip ad
    Router(config-if)#ip address 192.168.70.2 255.255.255.0
    Router(config-if)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#wr mem
        Building configuration...
        [OK]
    Router#show run
        ...
        interface FastEthernet0/0
         no ip address
         duplex auto
         speed auto
        !
        interface FastEthernet0/0.2
         encapsulation dot1Q 2
         ip address 192.168.2.1 255.255.255.0
        !
        interface FastEthernet0/0.3
         encapsulation dot1Q 3
         ip address 192.168.3.1 255.255.255.0
        !
        interface FastEthernet0/0.4
         encapsulation dot1Q 4
         ip address 192.168.4.1 255.255.255.0
        !
        interface FastEthernet0/1
         ip address 192.168.70.2 255.255.255.0
         duplex auto
         speed auto
        !

        Router1-CLI
    Router>en
    Router#show run
        ...
        interface GigabitEthernet0/0
         ip address 192.168.55.1 255.255.255.0
         duplex auto
         speed auto
        !
        interface GigabitEthernet0/1
         ip address 192.168.70.1 255.255.255.252
         duplex auto
         speed auto
        !
        interface GigabitEthernet0/2
         no ip address
         duplex auto
         speed auto
         shutdown
        !
        interface Vlan1
         no ip address
         shutdown
        !
        ip classless
        ip route 192.168.22.0 255.255.255.0 192.168.55.2
        ip route 192.168.33.0 255.255.255.0 192.168.55.2
        ip route 192.168.44.0 255.255.255.0 192.168.55.2
        ip route 192.168.2.0 255.255.255.0 192.168.70.2
        ip route 192.168.3.0 255.255.255.0 192.168.70.2
        ip route 192.168.4.0 255.255.255.0 192.168.70.2
        !
    Router#int gi
    Router#int gig
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#int gi
    Router(config)#int gigabitEthernet 0/1
    Router(config-if)#ip add
    Router(config-if)#ip address 192.168.80.2 255.255.255.0
    Router(config-if)#no sh
    Router(config-if)#no shutdown
    Router(config-if)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#wr mem
        Building configuration...
        [OK]
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#no ip route 192.168.2.0 255.255.255.0 192.168.70.2
    Router(config)#no ip route 192.168.3.0 255.255.255.0 192.168.70.2
    Router(config)#no ip route 192.168.4.0 255.255.255.0 192.168.70.2
    Router(config)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#wr mem
        Building configuration...
        [OK]
    Router#ping 192.168.80.1
        Type escape sequence to abort.
        Sending 5, 100-byte ICMP Echos to 192.168.80.1, timeout is 2 seconds:
        .!!!!
        Success rate is 80 percent (4/5), round-trip min/avg/max = 0/0/0 ms
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#ip route 0.0.0.0 0.0.0.0 192.168.80.1
    Router(config)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#wr mem
        Building configuration...
        [OK]

        Router2-CLI
    Router>en
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#ip route 192.168.2.0 255.255.255.0 192.168.70.2
    Router(config)#ip route 192.168.3.0 255.255.255.0 192.168.70.2
    Router(config)#ip route 192.168.4.0 255.255.255.0 192.168.70.2
    Router(config)#ip route 192.168.44.0 255.255.255.0 192.168.80.2
    Router(config)#ip route 192.168.33.0 255.255.255.0 192.168.80.2
    Router(config)#ip route 192.168.22.0 255.255.255.0 192.168.80.2
    Router(config)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#wr mem
        Building configuration...
        [OK]

        PC0-Desktop-command prompt
    C:\>ping 192.168.44.2
        Pinging 192.168.44.2 with 32 bytes of data:
        Request timed out.
        Reply from 192.168.44.2: bytes=32 time=12ms TTL=124
        Reply from 192.168.44.2: bytes=32 time=13ms TTL=124
        Reply from 192.168.44.2: bytes=32 time=10ms TTL=124
        Ping statistics for 192.168.44.2:
            Packets: Sent = 4, Received = 3, Lost = 1 (25% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 10ms, Maximum = 13ms, Average = 11ms
    C:\>ping 192.168.33.2
        Pinging 192.168.33.2 with 32 bytes of data:
        Reply from 192.168.33.2: bytes=32 time=65ms TTL=124
        Reply from 192.168.33.2: bytes=32 time=10ms TTL=124
        Reply from 192.168.33.2: bytes=32 time=10ms TTL=124
        Reply from 192.168.33.2: bytes=32 time=13ms TTL=124
        Ping statistics for 192.168.33.2:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 10ms, Maximum = 65ms, Average = 24ms
    C:\>ping 192.168.22.2
        Pinging 192.168.22.2 with 32 bytes of data:
        Reply from 192.168.22.2: bytes=32 time=10ms TTL=124
        Reply from 192.168.22.2: bytes=32 time=24ms TTL=124
        Reply from 192.168.22.2: bytes=32 time=17ms TTL=124
        Reply from 192.168.22.2: bytes=32 time=21ms TTL=124
        Ping statistics for 192.168.22.2:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 10ms, Maximum = 24ms, Average = 18ms

    Task:
    Consider the case of a small office that consists of several computers and one switch. With very little local traffic and no dedicated local servers, we do not need to install three switches. One router is enough, which is able to organize access for users (computers) to the Internet. Let's say we have three segments (vlan2,3,4). With the help of a router, you need to organize traffic routing between 3 segments without using 3 switches
    Decision:
        Switch0 - CLI
    Switch>en
    Switch#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Switch(config)#vlan 2
    Switch(config-vlan)#name vlan2
    Switch(config-vlan)#exit
    Switch(config)#vlan 3
    Switch(config-vlan)#name vlan3
    Switch(config-vlan)#exit
    Switch(config)#vlan 4
    Switch(config-vlan)#name vlan4
    Switch(config-vlan)#end
    Switch#
        %SYS-5-CONFIG_I: Configured from console by console
    Switch#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Switch(config)#int fa
    Switch(config)#int fastEthernet 0/1
    Switch(config-if)#swi
    Switch(config-if)#switchport mod ac
    Switch(config-if)#switchport mod access
    Switch(config-if)#switchport ac
    Switch(config-if)#switchport access vl
    Switch(config-if)#switchport access vlan 2
    Switch(config-if)#exit
    Switch(config)#int fastEthernet 0/2
    Switch(config-if)#switchport mod access
    Switch(config-if)#switchport access vlan 3
    Switch(config-if)#exit
    Switch(config)#int fastEthernet 0/3
    Switch(config-if)#switchport mod access
    Switch(config-if)#switchport access vlan 4
    Switch(config-if)#exit
    Task:
    Теперь необходимо настроить trunk порт, который идет до маршрутизатора router0
    Decision:
    Switch(config)#int fastEthernet 0/4
    Switch(config-if)#switchport mod tr
    Switch(config-if)#switchport mode trunk
    Switch(config-if)#switchport trunk all
    Switch(config-if)#switchport trunk allowed vlan 2,3,4
    Switch(config-if)#end
    Switch#
        %SYS-5-CONFIG_I: Configured from console by console
    Switch#wr mem
        Building configuration...
        [OK]
    Task:
    Переходим к настройке нашего маршрутизатора и нужно в первую очередь поднять физический порт. Также необходимо создать подинтерфейсы
    Decision:
        Router0 - CLI
    Router>en
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#int fa
    Router(config)#int fastEthernet 0/0
    Router(config-if)#no shu
    Router(config-if)#no shutdown
    Router(config-if)#
        %LINK-5-CHANGED: Interface FastEthernet0/0, changed state to up
        %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/0, changed state to up
    Router(config-if)#exit
    Router(config)#interfa
    Router(config)#interface fa
    Router(config)#interface fastEthernet 0/0.2
    Router(config-subif)#
        %LINK-5-CHANGED: Interface FastEthernet0/0.2, changed state to up
        %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/0.2, changed state to up
    Router(config-subif)#en
    Router(config-subif)#encapsulation dot1
    Router(config-subif)#encapsulation dot1Q 2
    Router(config-subif)#ip add
    Router(config-subif)#ip address 192.168.2.1 255.255.255.0
    Router(config-subif)#no shutdown
    Router(config-subif)#exit
    Router(config)#interface fastEthernet 0/0.3
    Router(config-subif)#
        %LINK-5-CHANGED: Interface FastEthernet0/0.3, changed state to up
        %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/0.3, changed state to up
    Router(config-subif)#encapsulation dot1Q 3
    Router(config-subif)#ip address 192.168.3.1 255.255.255.0
    Router(config-subif)#no shutdown
    Router(config-subif)#exit
    Router(config)#interface fastEthernet 0/0.4
    Router(config-subif)#
        %LINK-5-CHANGED: Interface FastEthernet0/0.4, changed state to up
        %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/0.4, changed state to up
    Router(config-subif)#encapsulation dot1Q 4
    Router(config-subif)#ip address 192.168.4.1 255.255.255.0
    Router(config-subif)#no shutdown
    Router(config-subif)#exit
    Router(config)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#wr mem
        Building configuration...
        [OK]
    Router#show run
        Building configuration...
        Current configuration : 816 bytes
        !
        version 12.4
        no service timestamps log datetime msec
        no service timestamps debug datetime msec
        no service password-encryption
        !
        hostname Router
        !
        !
        !
        !
        !
        !
        !
        !
        ip cef
        no ipv6 cef
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        spanning-tree mode pvst
        !
        !
        !
        !
        !
        !
        interface FastEthernet0/0
         no ip address
         duplex auto
         speed auto
        !
        interface FastEthernet0/0.2
         encapsulation dot1Q 2
         ip address 192.168.2.1 255.255.255.0
        !
        interface FastEthernet0/0.3
         encapsulation dot1Q 3
         ip address 192.168.3.1 255.255.255.0
        !
        interface FastEthernet0/0.4
         encapsulation dot1Q 4
         ip address 192.168.4.1 255.255.255.0
        !
    Task:
    Проверим
    Decision:
        PC0 - Desktop - IP confihuration - IP address:192.168.2.2 - Subnet:255.255.255.0 - Default Gateway:192.168.2.1 - PC1 - Desktop - IP confihuration - IP address:192.168.3.2 - Subnet:255.255.255.0 - Default Gateway:192.168.3.1 - PC2 - Desktop - IP confihuration - IP address:192.168.4.2 - Subnet:255.255.255.0 - Default Gateway:192.168.4.1 - Command Prompt
    C:\>ping 192.168.4.1
        Pinging 192.168.4.1 with 32 bytes of data:
        Reply from 192.168.4.1: bytes=32 time<1ms TTL=255
        Reply from 192.168.4.1: bytes=32 time<1ms TTL=255
        Reply from 192.168.4.1: bytes=32 time=1ms TTL=255
        Reply from 192.168.4.1: bytes=32 time<1ms TTL=255
        Ping statistics for 192.168.4.1:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 1ms, Average = 0ms
    C:\>ping 192.168.3.2
        Pinging 192.168.3.2 with 32 bytes of data:
        Request timed out.
        Reply from 192.168.3.2: bytes=32 time=11ms TTL=127
        Reply from 192.168.3.2: bytes=32 time=1ms TTL=127
        Reply from 192.168.3.2: bytes=32 time=1ms TTL=127
        Ping statistics for 192.168.3.2:
            Packets: Sent = 4, Received = 3, Lost = 1 (25% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 1ms, Maximum = 11ms, Average = 4ms
    C:\>ping 192.168.3.2
        Pinging 192.168.3.2 with 32 bytes of data:
        Reply from 192.168.3.2: bytes=32 time<1ms TTL=127
        Reply from 192.168.3.2: bytes=32 time<1ms TTL=127
        Reply from 192.168.3.2: bytes=32 time<1ms TTL=127
        Reply from 192.168.3.2: bytes=32 time<1ms TTL=127
        Ping statistics for 192.168.3.2:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 0ms, Average = 0ms
    C:\>ping 192.168.2.2
        Pinging 192.168.2.2 with 32 bytes of data:
        Request timed out.
        Reply from 192.168.2.2: bytes=32 time=12ms TTL=127
        Reply from 192.168.2.2: bytes=32 time=12ms TTL=127
        Reply from 192.168.2.2: bytes=32 time=1ms TTL=127
        Ping statistics for 192.168.2.2:
            Packets: Sent = 4, Received = 3, Lost = 1 (25% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 1ms, Maximum = 12ms, Average = 8ms
    Task:
    Рассмотрим пример, когда у нас есть несколько коммутаторов уроней доступа и сотни компьютеров, а также присутсвуют выделенные серверы.
    Decision:
        Switch1 - CLI
    Switch>en
    Switch#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Switch(config)#vlan 2
    Switch(config-vlan)#name vlan2
    Switch(config-vlan)#exit
    Switch(config)#vlan 3
    Switch(config-vlan)#name vlan3
    Switch(config-vlan)#exit
    Switch(config)#int f
    Switch(config)#int fastEthernet 0/1
    Switch(config-if)#swit
    Switch(config-if)#switc
    Switch(config-if)#switchport mo
    Switch(config-if)#switchport mode acc
    Switch(config-if)#switchport mode access
    Switch(config-if)#switchport access vlan 2
    Switch(config-if)#exit
    Switch(config)#int fastEthernet 0/2
    Switch(config-if)#switchport mode access
    Switch(config-if)#switchport access vlan 3
    Switch(config-if)#int fastEthernet 0/3
    Switch(config-if)#exit
    Switch(config)#int fastEthernet 0/3
    Switch(config-if)#switchport mode trunk
    Switch(config-if)#
        %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/3, changed state to down
        %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/3, changed state to up
    Switch(config-if)#switchport trun
    Switch(config-if)#switchport trunk all
    Switch(config-if)#switchport trunk allowed vlan 2,3
    Switch(config-if)#end
    Switch#
        %SYS-5-CONFIG_I: Configured from console by console
    Switch#wr mem
        Building configuration...
        [OK]
    Switch#show run
        Building configuration...
        Current configuration : 1238 bytes
        !
        version 15.0
        no service timestamps log datetime msec
        no service timestamps debug datetime msec
        no service password-encryption
        !
        hostname Switch
        !
        !
        !
        !
        !
        !
        spanning-tree mode pvst
        spanning-tree extend system-id
        !
        interface FastEthernet0/1
         switchport access vlan 2
         switchport mode access
        !
        interface FastEthernet0/2
         switchport access vlan 3
         switchport mode access
        !
        interface FastEthernet0/3
         switchport trunk allowed vlan 2-3
         switchport mode trunk
        !

        Switch2 - CLI
    Switch>en
    Switch#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Switch(config)#vlan 2
    Switch(config-vlan)#name vlan2
    Switch(config-vlan)#exit
    Switch(config)#vlan 3
    Switch(config-vlan)#name vlan3
    Switch(config-vlan)#exit
    Switch(config)#int fa
    Switch(config)#int fastEthernet 0/1
    Switch(config-if)#switchport mode access
    Switch(config-if)#switchport access vl
    Switch(config-if)#switchport access vlan 2
    Switch(config-if)#exit
    Switch(config)#int fastEthernet 0/2
    Switch(config-if)#switchport mode access
    Switch(config-if)#switchport access vlan 3
    Switch(config-if)#exit
    Switch(config)#int fastEthernet 0/3
    Switch(config-if)#switchport mode tru
    Switch(config-if)#switchport mode trunk
    Switch(config-if)#
        %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/3, changed state to down
        %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/3, changed state to up
    Switch(config-if)#switchport trunk all
    Switch(config-if)#switchport trunk allowed vl
    Switch(config-if)#switchport trunk allowed vlan 2,3
    Switch(config-if)#end
    Switch#
        %SYS-5-CONFIG_I: Configured from console by console
    Switch#wr mem
        Building configuration...
        [OK]
    Switch#show run
        Building configuration...
        Current configuration : 1238 bytes
        !
        version 15.0
        no service timestamps log datetime msec
        no service timestamps debug datetime msec
        no service password-encryption
        !
        hostname Switch
        !
        !
        !
        !
        !
        !
        spanning-tree mode pvst
        spanning-tree extend system-id
        !
        interface FastEthernet0/1
         switchport access vlan 2
         switchport mode access
        !
        interface FastEthernet0/2
         switchport access vlan 3
         switchport mode access
        !
        interface FastEthernet0/3
         switchport trunk allowed vlan 2-3
         switchport mode trunk
        !

        Switch 3 - CLI
    Switch>en
    Switch#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Switch(config)#vlan 4
    Switch(config-vlan)#name vlan4
    Switch(config-vlan)#exit
    Switch(config)#int fa
    Switch(config)#int fastEthernet 0/1
    Switch(config-if)#sw
    Switch(config-if)#switchport mo
    Switch(config-if)#switchport mode acc
    Switch(config-if)#switchport mode access
    Switch(config-if)#switchport access vla
    Switch(config-if)#switchport access vlan 4
    Switch(config-if)#exit
    Switch(config)#int fastEthernet 0/2
    Switch(config-if)#switchport mode access
    Switch(config-if)#switchport access vlan 4
    Switch(config-if)#exit
    Switch(config)#int fastEthernet 0/3
    Switch(config-if)#switchport mode trunk
    Switch(config-if)#
        %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/3, changed state to down
        %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/3, changed state to up
    Switch(config-if)#switchport tr
    Switch(config-if)#switchport trunk all
    Switch(config-if)#switchport trunk allowed vl
    Switch(config-if)#switchport trunk allowed vlan 4
    Switch(config-if)#end
    Switch#
        %SYS-5-CONFIG_I: Configured from console by console
    Switch#wr mem
        Building configuration...
        [OK]

        PC3 - Desktop - IP confihuration - IP address:192.168.22.2 - Subnet:255.255.255.0 - Default Gateway:192.168.22.1 -
        PC4 - Desktop - IP confihuration - IP address:192.168.33.2 - Subnet:255.255.255.0 - Default Gateway:192.168.33.1 -
        PC5 - Desktop - IP confihuration - IP address:192.168.22.3 - Subnet:255.255.255.0 - Default Gateway:192.168.22.1 -
        PC6 - Desktop - IP confihuration - IP address:192.168.33.3 - Subnet:255.255.255.0 - Default Gateway:192.168.33.1 -
        Server0 - Desktop - IP confihuration - IP address:192.168.44.2 - Subnet:255.255.255.0 - Default Gateway:192.168.44.1 -
        Server1 - Desktop - IP confihuration - IP address:192.168.44.3 - Subnet:255.255.255.0 - Default Gateway:192.168.44.1

        Multiplayer Switch0 - CLI
    Switch#en
    Switch#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Switch(config)# ip routing
    Switch(config)#int fastEthernet 0/1
    Switch(config-if)#switchport trunk allowed vlan 2,3
    Switch(config-if)#switchport trunk encapsulation dot1q
    Switch(config-if)#exit
    Switch(config)#int fastEthernet 0/2
    Switch(config-if)#switchport trunk allowed vlan 2,3
    Switch(config-if)#switchport trunk encapsulation dot1q
    Switch(config-if)#exit
    Switch(config)#int fastEthernet 0/3
    Switch(config-if)#switchport trunk allowed vlan 4
    Switch(config-if)#switchport trunk encapsulation dot1q
    Switch(config-if)#end
    Switch#
        %SYS-5-CONFIG_I: Configured from console by console
    wr mem
        Building configuration...
        [OK]
    Switch(config)#vlan 2  
    Switch(config-vlan)#int vlan 2
    Switch(config-if)#ip ad
    Switch(config-if)#ip address 192.168.22.1 255.255.255.0
    Switch(config-if)#no shutdown
    Switch(config-if)#exit
    Switch(config)#vlan 3
    Switch(config-vlan)#int vlan 3
    Switch(config-if)#ip address 192.168.33.1 255.255.255.0
    Switch(config-if)#no shutdown
    Switch(config-if)#exit
    Switch(config)#vlan 4  
    Switch(config-vlan)#int vlan 4
    Switch(config-if)#ip address 192.168.44.1 255.255.255.0
    Switch(config-if)#no shutdown
    Switch(config-if)#end
    Switch#
        %SYS-5-CONFIG_I: Configured from console by console
    Switch#wr mem
        Building configuration...
        [OK]
    Switch#show run
        Building configuration...
        Current configuration : 1608 bytes
        !
        version 12.2(37)SE1
        no service timestamps log datetime msec
        no service timestamps debug datetime msec
        no service password-encryption
        !
        hostname Switch
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        spanning-tree mode pvst
        !
        !
        !
        !
        !
        !
        interface FastEthernet0/1
         switchport trunk allowed vlan 2-3
         switchport trunk encapsulation dot1q
        !
        interface FastEthernet0/2
         switchport trunk allowed vlan 2-3
         switchport trunk encapsulation dot1q
        !
        interface FastEthernet0/3
         switchport trunk allowed vlan 4
         switchport trunk encapsulation dot1q
        !
        interface FastEthernet0/4
        !
        interface FastEthernet0/5
        !
        interface FastEthernet0/6
        !
        interface FastEthernet0/7
        !
        interface FastEthernet0/8
        !
        interface FastEthernet0/9
        !
        interface FastEthernet0/10
        !
        interface FastEthernet0/11
        !
        interface FastEthernet0/12
        !
        interface FastEthernet0/13
        !
        interface FastEthernet0/14
        !
        interface FastEthernet0/15
        !
        interface FastEthernet0/16
        !
        interface FastEthernet0/17
        !
        interface FastEthernet0/18
        !
        interface FastEthernet0/19
        !
        interface FastEthernet0/20
        !
        interface FastEthernet0/21
        !
        interface FastEthernet0/22
        !
        interface FastEthernet0/23
        !
        interface FastEthernet0/24
        !
        interface GigabitEthernet0/1
        !
        interface GigabitEthernet0/2
        !
        interface Vlan1
         no ip address
         shutdown
        !
        interface Vlan2
         mac-address 0060.3ec1.d101
         ip address 192.168.22.1 255.255.255.0
        !
        interface Vlan3
         mac-address 0060.3ec1.d102
         ip address 192.168.33.1 255.255.255.0
        !
        interface Vlan4
         mac-address 0060.3ec1.d103
         ip address 192.168.44.1 255.255.255.0
        !
        ip classless
        !
        ip flow-export version 9

        PC3 - Desktop - Command Prompt
    C:\>ping 192.168.33.3
        Pinging 192.168.33.3 with 32 bytes of data:
        Request timed out.
        Reply from 192.168.33.3: bytes=32 time<1ms TTL=127
        Reply from 192.168.33.3: bytes=32 time=1ms TTL=127
        Reply from 192.168.33.3: bytes=32 time<1ms TTL=127
        Ping statistics for 192.168.33.3:
            Packets: Sent = 4, Received = 3, Lost = 1 (25% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 1ms, Average = 0ms
    C:\>ping 192.168.33.1
        Pinging 192.168.33.1 with 32 bytes of data:
        Reply from 192.168.33.1: bytes=32 time<1ms TTL=255
        Reply from 192.168.33.1: bytes=32 time<1ms TTL=255
        Reply from 192.168.33.1: bytes=32 time<1ms TTL=255
        Reply from 192.168.33.1: bytes=32 time<1ms TTL=255
        Ping statistics for 192.168.33.1:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 0ms, Average = 0ms
    C:\>ping 192.168.44.1
        Pinging 192.168.44.1 with 32 bytes of data:
        Reply from 192.168.44.1: bytes=32 time<1ms TTL=255
        Reply from 192.168.44.1: bytes=32 time=2ms TTL=255
        Reply from 192.168.44.1: bytes=32 time<1ms TTL=255
        Reply from 192.168.44.1: bytes=32 time<1ms TTL=255
        Ping statistics for 192.168.44.1:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 2ms, Average = 0ms

    Task:
    Чтобы был доступ в интернет, нужно настроить маршрутизатор (router1). Пусть он будет сегмнетом с vlan5.
    Decision:
        Switch0 - CLI
    Switch>en
    Switch#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Switch(config)#vlan 5
    Switch(config-vlan)#name vlan5
    Switch(config-vlan)#exit
    Switch(config)#int vlan 5
    Switch(config-if)#
        %LINK-5-CHANGED: Interface Vlan5, changed state to up
    Switch(config-if)#ip ad
    Switch(config-if)#ip address 192.168.55.2 255.255.255.0
    Switch(config-if)#no sh
    Switch(config-if)#no shutdown
    Switch(config-if)#exit
    Switch(config)#int gi
    Switch(config)#int gi0/1
    Switch(config-if)#swit
    Switch(config-if)#switchport mode
    Switch(config-if)#switchport mode acc
    Switch(config-if)#switchport mode access
    Switch(config-if)#swi
    Switch(config-if)#switchport ac
    Switch(config-if)#switchport access vl
    Switch(config-if)#switchport access vlan 5
    Switch(config-if)#exit
    Switch(config)#end
    Switch#
        %SYS-5-CONFIG_I: Configured from console by console
    Switch#wr mem
        Building configuration...
        [OK]
    Switch#who
    Switch#sh
    Switch#show r
    Switch#show run
        Building configuration...
        Current configuration : 1780 bytes
        !
        version 12.2(37)SE1
        no service timestamps log datetime msec
        no service timestamps debug datetime msec
        no service password-encryption
        !
        hostname Switch
        !
        !
        !
        !
        !
        !
        ip routing
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        spanning-tree mode pvst
        !
        !
        !
        !
        !
        !
        interface FastEthernet0/1
         switchport trunk allowed vlan 2-3
         switchport trunk encapsulation dot1q
        !
        interface FastEthernet0/2
         switchport trunk allowed vlan 2-3
         switchport trunk encapsulation dot1q
        !
        interface FastEthernet0/3
         switchport trunk allowed vlan 4
         switchport trunk encapsulation dot1q
        !
        interface FastEthernet0/4
        !
        interface FastEthernet0/5
        !
        interface FastEthernet0/6
        !
        interface FastEthernet0/7
        !
        interface FastEthernet0/8
        !
        interface FastEthernet0/9
        !
        interface FastEthernet0/10
        !
        interface FastEthernet0/11
        !
        interface FastEthernet0/12
        !
        interface FastEthernet0/13
        !
        interface FastEthernet0/14
        !
        interface FastEthernet0/15
        !
        interface FastEthernet0/16
        !
        interface FastEthernet0/17
        !
        interface FastEthernet0/18
        !
        interface FastEthernet0/19
        !
        interface FastEthernet0/20
        !
        interface FastEthernet0/21
        !
        interface FastEthernet0/22
        !
        interface FastEthernet0/23
        !
        interface FastEthernet0/24
        !
        interface GigabitEthernet0/1
         switchport access vlan 5
         switchport mode access
         switchport nonegotiate
        !
        interface GigabitEthernet0/2
        !
        interface Vlan1
         no ip address
         shutdown
        !
        interface Vlan2
         mac-address 0060.3ec1.d101
         ip address 192.168.22.1 255.255.255.0
        !
        interface Vlan3
         mac-address 0060.3ec1.d102
         ip address 192.168.33.1 255.255.255.0
        !
        interface Vlan4
         mac-address 0060.3ec1.d103
         ip address 192.168.44.1 255.255.255.0
        !
        interface Vlan5
         mac-address 0060.3ec1.d104
         ip address 192.168.55.2 255.255.255.0
        !

        Route1 - CLI
    Router>en
    Router#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Router(config)#int g
    Router(config)#int gigabitEthernet 0/0
    Router(config-if)#no sho
    Router(config-if)#no shotd
    Router(config-if)#no shut
    Router(config-if)#no shutdown
    Router(config-if)#
        %LINK-5-CHANGED: Interface GigabitEthernet0/0, changed state to up
        %LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet0/0, changed state to up
    Router(config-if)#ip add
    Router(config-if)#ip address 192.168.55.1 255.255.255.0
    Router(config-if)#no sh
    Router(config-if)#no shutdown
    Router(config-if)#end
    Router#
        %SYS-5-CONFIG_I: Configured from console by console
    Router#ping 192.168.55.2
        Type escape sequence to abort.
        Sending 5, 100-byte ICMP Echos to 192.168.55.2, timeout is 2 seconds:
        .!!!!
        Success rate is 80 percent (4/5), round-trip min/avg/max = 0/0/0 ms
    Task:
    Мы хотим разбить нашу сеть на 3 сегмента (3 Vlan) и чтобы компьютеры могли между собой связываться
    Decision:
    3560 Switch0 -> CLI
    Создаем 3 сегмента (3 Vlan)
    Switch>en
    Switch#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Switch(config)#vlan 2
    Switch(config-vlan)#name VLAN2
    Switch(config-vlan)#exit
    Switch(config)#vlan 3
    Switch(config-vlan)#name VLAN3
    Switch(config-vlan)#exit
    Switch(config)#vlan 4
    Switch(config-vlan)#name VLAN4
    Switch(config-vlan)#end
    Switch#
        %SYS-5-CONFIG_I: Configured from console by console
    Switch#
    Определить порты, которые подключаются пользователи в определенный VLAN
    Switch#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Switch(config)#int fa0/1
    Switch(config-if)#switc
    Switch(config-if)#switchport mod
    Switch(config-if)#switchport mode acc
    Switch(config-if)#switchport mode access
    Switch(config-if)#switchport access vlan 2
    Switch(config-if)#exit
    Switch(config)#int fa0/2
    Switch(config-if)#switchport mode access
    Switch(config-if)#switchport access vlan 3
    Switch(config-if)#exit
    Switch(config)#int fa0/3
    Switch(config-if)#switchport access vlan 4
    Switch(config-if)#switchport mode access
    Switch(config-if)#switchport access vlan 4
    Switch(config-if)#exit
    Switch(config)#end
    Switch#
        %SYS-5-CONFIG_I: Configured from console by console
    Switch#show run
        Building configuration...
        Current configuration : 1358 bytes
        !
        version 12.2(37)SE1
        no service timestamps log datetime msec
        no service timestamps debug datetime msec
        no service password-encryption
        !
        hostname Switch
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        spanning-tree mode pvst
        !
        !
        !
        !
        !
        !
        interface FastEthernet0/1
         switchport access vlan 2
         switchport mode access
         switchport nonegotiate
        !
        interface FastEthernet0/2
         switchport access vlan 3
         switchport mode access
         switchport nonegotiate
        !
        interface FastEthernet0/3
         switchport access vlan 4
         switchport mode access
         switchport nonegotiate
        !
    Добавим Ip адреса на созданные нами сегменты
    Switch#conf t
    Enter configuration commands, one per line.  End with CNTL/Z.
    Switch(config)#int vlan 2
    Switch(config-if)#
        %LINK-5-CHANGED: Interface Vlan2, changed state to up
        %LINEPROTO-5-UPDOWN: Line protocol on Interface Vlan2, changed state to up
    Switch(config-if)#ip addre
    Switch(config-if)#ip address 2.2.2.1 255.255.255.0
    Switch(config-if)#exit
    Switch(config)#int vlan 3
    Switch(config-if)#
        %LINK-5-CHANGED: Interface Vlan3, changed state to up
        %LINEPROTO-5-UPDOWN: Line protocol on Interface Vlan3, changed state to up
    Switch(config-if)#ip address 3.3.3.1 255.255.255.0
    Switch(config-if)#exit
    Switch(config)#int vlan 4
    Switch(config-if)#
        %LINK-5-CHANGED: Interface Vlan4, changed state to up
        %LINEPROTO-5-UPDOWN: Line protocol on Interface Vlan4, changed state to up
    Switch(config-if)#ip address 4.4.4.1 255.255.255.0
    Switch(config-if)#end
        %SYS-5-CONFIG_I: Configured from console by console
    Switch#show run
        Building configuration...
        Current configuration : 1598 bytes
        !
        version 12.2(37)SE1
        no service timestamps log datetime msec
        no service timestamps debug datetime msec
        no service password-encryption
        !
        hostname Switch
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        !
        spanning-tree mode pvst
        !
        !
        !
        !
        !
        !
        interface FastEthernet0/1
         switchport access vlan 2
         switchport mode access
         switchport nonegotiate
        !
        interface FastEthernet0/2
         switchport access vlan 3
         switchport mode access
         switchport nonegotiate
        !
        interface FastEthernet0/3
         switchport access vlan 4
         switchport mode access
         switchport nonegotiate
        !
        interface FastEthernet0/4
        !
        interface FastEthernet0/5
        !
        interface FastEthernet0/6
        !
        interface FastEthernet0/7
        !
        interface FastEthernet0/8
        !
        interface FastEthernet0/9
        !
        interface FastEthernet0/10
        !
        interface FastEthernet0/11
        !
        interface FastEthernet0/12
        !
        interface FastEthernet0/13
        !
        interface FastEthernet0/14
        !
        interface FastEthernet0/15
        !
        interface FastEthernet0/16
        !
        interface FastEthernet0/17
        !
        interface FastEthernet0/18
        !
        interface FastEthernet0/19
        !
        interface FastEthernet0/20
        !
        interface FastEthernet0/21
        !
        interface FastEthernet0/22
        !
        interface FastEthernet0/23
        !
        interface FastEthernet0/24
        !
        interface GigabitEthernet0/1
        !
        interface GigabitEthernet0/2
        !
        interface Vlan1
         no ip address
         shutdown
        !
        interface Vlan2
         mac-address 0002.1644.8301
         ip address 2.2.2.1 255.255.255.0
        !
        interface Vlan3
         mac-address 0002.1644.8302
         ip address 3.3.3.1 255.255.255.0
        !
        interface Vlan4
         mac-address 0002.1644.8303
         ip address 4.4.4.1 255.255.255.0
        !
        ip classless
        !
    Switch#
    PC-PT PC0,1,2 -> Desktop -> ipconfig -> ip address:2.2.2.2,3.3.3.2,4.4.4.2 -> Mask:255.255.255.0 -> Default Gateway:2.2.2.1,3.3.3.1,4.4.4.1 -> Command prompt
    C:\>ping 2.2.2.1
        Pinging 2.2.2.1 with 32 bytes of data:
        Reply from 2.2.2.1: bytes=32 time=20ms TTL=255
        Reply from 2.2.2.1: bytes=32 time<1ms TTL=255
        Reply from 2.2.2.1: bytes=32 time<1ms TTL=255
        Reply from 2.2.2.1: bytes=32 time<1ms TTL=255
        Ping statistics for 2.2.2.1:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 20ms, Average = 5ms
    Проверим межсетевое взаимодействие
    C:\>ping 4.4.4.1
        Pinging 4.4.4.1 with 32 bytes of data:
        Reply from 4.4.4.1: bytes=32 time<1ms TTL=255
        Reply from 4.4.4.1: bytes=32 time<1ms TTL=255
        Reply from 4.4.4.1: bytes=32 time<1ms TTL=255
        Reply from 4.4.4.1: bytes=32 time<1ms TTL=255
        Ping statistics for 4.4.4.1:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 0ms, Average = 0ms
    C:\>ping 2.2.2.2
        Pinging 2.2.2.2 with 32 bytes of data:
        Request timed out.
        Request timed out.
        Ping statistics for 2.2.2.2:
            Packets: Sent = 3, Received = 0, Lost = 3 (100% loss),
    Control-C
    ^C
    C:\>
        Укажем, что коммутатор должен маршрутизировать трафик
        3560 Switch0 -> CLI
    Switch>en
    Switch#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Switch(config)#ip routing
    Switch(config)#end
    Switch#
        %SYS-5-CONFIG_I: Configured from console by console
    Switch#wr mem
        Building configuration...
        [OK]

        PC-PT PC2 -> Desktop -> Command prompt
    C:\>ping 2.2.2.2
        Pinging 2.2.2.2 with 32 bytes of data:
        Reply from 2.2.2.2: bytes=32 time<1ms TTL=127
        Reply from 2.2.2.2: bytes=32 time<1ms TTL=127
        Reply from 2.2.2.2: bytes=32 time<1ms TTL=127
        Reply from 2.2.2.2: bytes=32 time<1ms TTL=127
        Ping statistics for 2.2.2.2:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 0ms, Average = 0ms
    Task:
    Настроить статического агрегирования:
            На Switch0:
                int range fa0/1-2
                channel-group 1 mode on
            На Switch1:
                int range fa0/1-2
                channel-group 1 mode on
    Decision:
        Switches->2960 switch0,1->End Devices->PC0,1->connetions->Copper Straight-Through->PC0(f0/1)-switch0(f0/3),PC1(f0/1)-switch1(f0/3)->switch0,1->CLI
    Switch>en
    Switch#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Switch(config)#inter
    Switch(config)#interface ran
    Switch(config)#interface range fa0/1-2
    Switch(config-if-range)#channel-gr
    Switch(config-if-range)#channel-group 1 mod
    Switch(config-if-range)#channel-group 1 mode ?
          active     Enable LACP unconditionally
          auto       Enable PAgP only if a PAgP device is detected
          desirable  Enable PAgP unconditionally
          on         Enable Etherchannel only
          passive    Enable LACP only if a LACP device is detected
    Switch(config-if-range)#channel-group 1 mode on
    Switch(config-if-range)#
        Creating a port-channel interface Port-channel 1
    Switch(config-if-range)#end
    Switch#
        %SYS-5-CONFIG_I: Configured from console by console
    Switch#wr mem
        Building configuration...
        [OK]

        connetctions->copper cross-over switch0-switch1(f0/1,2)->PC0,1->Desktop->ip config->ip:192.168.1.1,2->Subnet:255.255.255.0

        PC1->Desktop->Command Prompt

    C:\>ping 192.168.1.1
        Pinging 192.168.1.1 with 32 bytes of data:
        Reply from 192.168.1.1: bytes=32 time=12ms TTL=128
        Reply from 192.168.1.1: bytes=32 time<1ms TTL=128
        Reply from 192.168.1.1: bytes=32 time=1ms TTL=128
        Reply from 192.168.1.1: bytes=32 time=11ms TTL=128
        Ping statistics for 192.168.1.1:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 12ms, Average = 6ms
    Task:
    Для проверки отказоустойчивости потушим одно соединение, например, fa0/2 на switch1 и восстановить связь
    Decision:
        switch1->CLI
    Switch>en
    Switch#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Switch(config)#int fa0/2
    Switch(config-if)#shutdown
    Switch(config-if)#
        %LINK-5-CHANGED: Interface FastEthernet0/2, changed state to administratively down
        %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/2, changed state to down
    Switch(config-if)#no shut
    Switch(config-if)#
        %LINK-5-CHANGED: Interface FastEthernet0/2, changed state to up
        %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/2, changed state to up
    Task:
    В случае сущестования нескольких VLAN, для того чтобы создать trunkprot
    Decision:
        Switch0-CLI
    Switch>en
    Switch#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Switch(config)#inter
    Switch(config)#interface po
    Switch(config)#interface port-channel 1
    Switch(config-if)#swti
    Switch(config-if)#switc
    Switch(config-if)#switchport mode tr
    Switch(config-if)#switchport mode trunk
    Switch(config-if)#end
    Switch#
        %SYS-5-CONFIG_I: Configured from console by console
    Switch#wr mem
        Building configuration...
        [OK]

        Switch1-CLI
    Switch>en
    Switch#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Switch(config)#interface port-channel 1
    Switch(config-if)#switchport mode trunk
    Switch(config-if)#%SPANTREE-2-UNBLOCK_CONSIST_PORT: Unblocking Port-channel1 on VLAN0001. Port consistency restored.
        %SPANTREE-2-UNBLOCK_CONSIST_PORT: Unblocking Port-channel1 on VLAN0001. Port consistency restored.
    Switch(config-if)#end
    Switch#
        %SYS-5-CONFIG_I: Configured from console by console
    Switch#show run
        Building configuration...
        Current configuration : 1225 bytes
        !
        version 15.0
        no service timestamps log datetime msec
        no service timestamps debug datetime msec
        no service password-encryption
        !
        hostname Switch
        !
        !
        !
        !
        !
        !
        spanning-tree mode pvst
        spanning-tree extend system-id
        !
        interface Port-channel1
         switchport mode trunk
        !
        interface FastEthernet0/1
    Task:
    Настроить динамического агрегирования LACP:
            На Multilayer-Switch0:
                int range fa0/1-2
                channel-protocol lacp
                channel-group 1 mode active
                int range fa0/3-4
                channel-protocol lacp
                channel-group 2 mode active
                int range fa0/5-6
                channel-protocol lacp
                channel-group 3 mode active
            На Switch2, Switch3 и Switch4:
                int range fa0/1-2
                channel-protocol lacp
                channel-group 1 mode passive
    Подключить каждый из коммутаторов 2мя портами к центральному коммутатору используя динамическое агрегирование
    Decision:
        Switches->3560-24ps switch0->2960 switch2,3,4->connections->switch0-CLI
    Switch>en
    Switch#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Switch(config)#int ra
    Switch(config)#int range fa0/1-2
    Switch(config-if-range)#channel-pr
    Switch(config-if-range)#channel-protocol ?
          lacp  Prepare interface for LACP protocol
          pagp  Prepare interface for PAgP protocol
    Switch(config-if-range)#channel-protocol la
    Switch(config-if-range)#channel-protocol lacp
    Switch(config-if-range)#channel-gr
    Switch(config-if-range)#channel-group 1 mode active
    Switch(config-if-range)#
        Creating a port-channel interface Port-channel 1
    Switch(config-if-range)#exit
    Switch(config)#int range fa0/3-4
    Switch(config-if-range)#channel-protocol lacp
    Switch(config-if-range)#channel-group 2 mode active
    Switch(config-if-range)#
        Creating a port-channel interface Port-channel 2
    Switch(config-if-range)#exit
    Switch(config)#int range fa0/5-6
    Switch(config-if-range)#channel-protocol lacp
    Switch(config-if-range)#channel-group 3 mode active
    Switch(config-if-range)#
        Creating a port-channel interface Port-channel 3
    Switch(config-if-range)#end
    Switch#
        %SYS-5-CONFIG_I: Configured from console by console
    Switch#wr mem
        Building configuration...
        [OK]

        switch2,3,4-CLI
    Switch>en
    Switch#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Switch(config)#int range fa0/1-2
    Switch(config-if-range)#channel-prot
    Switch(config-if-range)#channel-protocol la
    Switch(config-if-range)#channel-protocol lacp
    Switch(config-if-range)#channel-gr
    Switch(config-if-range)#channel-group 1 mod
    Switch(config-if-range)#channel-group 1 mode pas
    Switch(config-if-range)#channel-group 1 mode passive
    Switch(config-if-range)#
        Creating a port-channel interface Port-channel 1
    Switch(config-if-range)#end
    Switch#
        %SYS-5-CONFIG_I: Configured from console by console
    Switch#wr mem
        Building configuration...
        [OK]

        coonections->copper straight-through->switch2(fa0/1,fa0/2)-switch0(fa0/1,fa0/2)->switch3(fa0/1,fa0/3)-switch0(fa0/2,fa0/4)->switch4(fa0/1,fa0/5)-switch0(fa0/2,fa0/6)

        switch0->CLI
    Switch>en
    Switch#show et
    Switch#show etherchannel summ
    Switch#show etherchannel summary
        Flags:  D - down        P - in port-channel
                I - stand-alone s - suspended
                H - Hot-standby (LACP only)
                R - Layer3      S - Layer2
                U - in use      f - failed to allocate aggregator
                u - unsuitable for bundling
                w - waiting to be aggregated
                d - default port
        Number of channel-groups in use: 3
        Number of aggregators:           3
        Group  Port-channel  Protocol    Ports
        ------+-------------+-----------+----------------------------------------------
        1      Po1(SU)           LACP   Fa0/1(P) Fa0/2(P)
        2      Po2(SU)           LACP   Fa0/3(P) Fa0/4(P)
        3      Po3(SU)           LACP   Fa0/5(P) Fa0/6(P)
    Task:
    Применение VLAN с использованием одного коммутатора
            Создаем VLAN
            Определяем Access порты
    Пусть PC0,1 принадлежат одному сегменту бухгалтеров (синий) и PC2,3 - сегменту обычных пользователей (оранжевый). Нам нужно разделить трафик сегмента бухгалтерии от сегмента обычных пользователей.    
    Decision:
        Switches->2960->End Devices->PC0,1,2,3->Connections->Copper Straight-Through (PC0,1,2,3-Switch2960)->Dram freeform->Fill color->Switch2960->CLI
    Создадим VLAN
    Switch>en
    Switch#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Switch(config)#vlan 2
    Switch(config-vlan)#name buh
    Switch(config-vlan)#exit
    Task:
    Настроим интерфейс
    Decision:
        Нам необходимо определить порты в созданный VLAN, для этого наведем на соединение  между PC0-Switch2960 - Fa0 и Fa0/1,2
    Switch(config)#inter
    Switch(config)#interface fastEthernet 0/1
    Switch(config-if)#switchport mode access
    Switch(config-if)#switchport access vlan 2
    Switch(config-if)#exit
    Switch(config)#int fa0/2
    Switch(config-if)#switchport mode access
    Switch(config-if)#switchport access vlan 2
    Switch(config-if)#exit
    Switch(config)#end
    Switch#
        %SYS-5-CONFIG_I: Configured from console by console
    Task:
    Проверим работу VLAN
    Decision:
    Switch#show vlan
        VLAN Name                             Status    Ports
        ---- -------------------------------- --------- -------------------------------
        1    default                          active    Fa0/3, Fa0/4, Fa0/5, Fa0/6
                                                        Fa0/7, Fa0/8, Fa0/9, Fa0/10
                                                        Fa0/11, Fa0/12, Fa0/13, Fa0/14
                                                        Fa0/15, Fa0/16, Fa0/17, Fa0/18
                                                        Fa0/19, Fa0/20, Fa0/21, Fa0/22
                                                        Fa0/23, Fa0/24, Gig0/1, Gig0/2
        2    buh                              active    Fa0/1, Fa0/2
        1002 fddi-default                     active
        1003 token-ring-default               active
        1004 fddinet-default                  active
        1005 trnet-default                    active
        VLAN Type  SAID       MTU   Parent RingNo BridgeNo Stp  BrdgMode Trans1 Trans2
        ---- ----- ---------- ----- ------ ------ -------- ---- -------- ------ ------
        1    enet  100001     1500  -      -      -        -    -        0      0
        2    enet  100002     1500  -      -      -        -    -        0      0
        1002 fddi  101002     1500  -      -      -        -    -        0      0
        1003 tr    101003     1500  -      -      -        -    -        0      0
        1004 fdnet 101004     1500  -      -      -        ieee -        0      0
        1005 trnet 101005     1500  -      -      -        ibm  -        0      0
    Switch#show vlan brief
        VLAN Name                             Status    Ports
        ---- -------------------------------- --------- -------------------------------
        1    default                          active    Fa0/3, Fa0/4, Fa0/5, Fa0/6
                                                        Fa0/7, Fa0/8, Fa0/9, Fa0/10
                                                        Fa0/11, Fa0/12, Fa0/13, Fa0/14
                                                        Fa0/15, Fa0/16, Fa0/17, Fa0/18
                                                        Fa0/19, Fa0/20, Fa0/21, Fa0/22
                                                        Fa0/23, Fa0/24, Gig0/1, Gig0/2
        2    buh                              active    Fa0/1, Fa0/2
        1002 fddi-default                     active
        1003 token-ring-default               active
        1004 fddinet-default                  active
        1005 trnet-default                    active
    Task:
    Проделаем тоже самое для другого сегмента
    Decision:
    Switch#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Switch(config)#vlan 3
    Switch(config-vlan)#name users
    Switch(config-vlan)#exit
    Switch(config)#int fa0/3
    Switch(config-if)#switchport mode access
    Switch(config-if)#switchport access vlan 3
    Switch(config-if)#exit
    Switch(config)#int fa0/4
    Switch(config-if)#switchport mode access
    Switch(config-if)#switchport access vlan 3
    Switch(config-if)#exit
    Switch(config)#end
    Switch#
        %SYS-5-CONFIG_I: Configured from console by console
    Switch#show vlan brief
        VLAN Name                             Status    Ports
        ---- -------------------------------- --------- -------------------------------
        1    default                          active    Fa0/5, Fa0/6, Fa0/7, Fa0/8
                                                        Fa0/9, Fa0/10, Fa0/11, Fa0/12
                                                        Fa0/13, Fa0/14, Fa0/15, Fa0/16
                                                        Fa0/17, Fa0/18, Fa0/19, Fa0/20
                                                        Fa0/21, Fa0/22, Fa0/23, Fa0/24
                                                        Gig0/1, Gig0/2
        2    buh                              active    Fa0/1, Fa0/2
        3    users                            active    Fa0/3, Fa0/4
        1002 fddi-default                     active
        1003 token-ring-default               active
        1004 fddinet-default                  active
        1005 trnet-default                    active
    Task:
    Зададим Ip адреса
    Decision:
        PC0,1->Desktop->Ip configuration->Ip:192.168.2.1,2->Subnet Mask:255.255.255.0->PC2,3->Desktop->Ip configuration->Ip:192.168.3.1,2->Subnet Mask:255.255.255.0->PC0->Command Prompt
    C:\>ping 192.168.2.2
        Pinging 192.168.2.2 with 32 bytes of data:
        Reply from 192.168.2.2: bytes=32 time=51ms TTL=128
        Reply from 192.168.2.2: bytes=32 time=31ms TTL=128
        Reply from 192.168.2.2: bytes=32 time=2ms TTL=128
        Reply from 192.168.2.2: bytes=32 time<1ms TTL=128
        Ping statistics for 192.168.2.2:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 51ms, Average = 21ms
    C:\>ping 192.168.3.2
        Pinging 192.168.3.2 with 32 bytes of data:
        Request timed out.
        Request timed out.
        Request timed out.
        Request timed out.
        Ping statistics for 192.168.3.2:
            Packets: Sent = 4, Received = 0, Lost = 4 (100% loss),
    Task:
    В коммутаторе посмотрим таблицу mac адресов
    Decision:
    Switch#show mac address-table
                  Mac Address Table
        -------------------------------------------
        Vlan    Mac Address       Type        Ports
        ----    -----------       --------    -----
           2    0050.0f9b.2696    DYNAMIC     Fa0/1
           2    00d0.588e.68d5    DYNAMIC     Fa0/2
           3    0090.2bb2.e04e    DYNAMIC     Fa0/3
           3    00e0.b0b5.976a    DYNAMIC     Fa0/4
    Task:
    Применение VLAN с двумя коммутаторами

            Создаем VLAN
            Определяем Access порты
            Определяем Trunk порты
    Decision:
        Копируем из первой схемы и добавляем кабель->Соединение->Copper Cross-Over(GigabiteEthernet-Switch2960-Switch2960(1))->Поменяем Ip адреса: PC0(1),1(1)->Desktop->Ip configuration->Ip:192.168.2.3,4->Subnet Mask:255.255.255.0->PC2(1),3(1)->Desktop->Ip configuration->Ip:192.168.3.3,4->Subnet Mask:255.255.255.0->Объединяем сегменты компьютеров(желтый, зеленый)->Switch2960(1)->CLI
    Switch>en
    Switch#show run
        Building configuration...
        Current configuration : 1280 bytes
        !
        version 15.0
        no service timestamps log datetime msec
        no service timestamps debug datetime msec
        no service password-encryption
        !
        hostname Switch
        !
        !
        !
        !
        !
        !
        spanning-tree mode pvst
        spanning-tree extend system-id
        !
        interface FastEthernet0/1
         switchport access vlan 2
         switchport mode access
        !
        interface FastEthernet0/2
         switchport access vlan 2
         switchport mode access
        !
        interface FastEthernet0/3
         switchport access vlan 3
         switchport mode access
        !
        interface FastEthernet0/4
         switchport access vlan 3
         switchport mode access
        !
        interface FastEthernet0/5
        !
        interface FastEthernet0/6
        !
        interface FastEthernet0/7
        !
        interface FastEthernet0/8
        !
    Task:
    Access порты настроены, нужно настроить Trunk порты.
    Decision:
        Switch2960->CLI
    Switch>en
    Switch#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Switch(config)#int
    Switch(config)#interface gig
    Switch(config)#interface gigabitEthernet 1/1
        %Invalid interface type and number
    Switch(config)#interface gigabitEthernet 0/1
    Switch(config-if)#switch
    Switch(config-if)#switchport mo
    Switch(config-if)#switchport mode tr
    Switch(config-if)#switchport mode trunk
    Switch(config-if)#
        %LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet0/1, changed state to down
        %LINEPROTO-5-UPDOWN: Line protocol on Interface GigabitEthernet0/1, changed state to up
    Switch(config-if)#
    Task:
    Указывваем VLAN, которые мы хотим передавать через наше физическое соединение
    Decision:
    Switch(config-if)#swit
    Switch(config-if)#switchport tru
    Switch(config-if)#switchport trunk all
    Switch(config-if)#switchport trunk allowed vla
    Switch(config-if)#switchport trunk allowed vlan 2,3
    Switch(config-if)#end
    Switch#wr mem
        Building configuration...
        [OK]

        Тоже самое сделаем на втором коммутаторе
    Switch>en
    Switch#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Switch(config)#int
    Switch(config)#interface gig
    Switch(config)#interface gigabitEthernet 0/1
    Switch(config-if)#swit
    Switch(config-if)#switchport md
    Switch(config-if)#switchport mod
    Switch(config-if)#switchport mode tru
    Switch(config-if)#switchport mode trunk
    Switch(config-if)#swit
    Switch(config-if)#switchport trun
    Switch(config-if)#switchport trunk all
    Switch(config-if)#switchport trunk allowed vla
    Switch(config-if)#switchport trunk allowed vlan 2,3
    Switch(config-if)#end
    Switch#wr mem
        Building configuration...
        [OK]
    Task:
    Проверим взаимодействие данных компьютеров
    Decision:
        PC0->Command Prompt->
    C:\>ping 192.168.2.3
        Pinging 192.168.2.3 with 32 bytes of data:
        Reply from 192.168.2.3: bytes=32 time=67ms TTL=128
        Reply from 192.168.2.3: bytes=32 time<1ms TTL=128
        Reply from 192.168.2.3: bytes=32 time<1ms TTL=128
        Reply from 192.168.2.3: bytes=32 time<1ms TTL=128
        Ping statistics for 192.168.2.3:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 67ms, Average = 16ms
    C:\>ping 192.168.2.4
        Pinging 192.168.2.4 with 32 bytes of data:
        Reply from 192.168.2.4: bytes=32 time=10ms TTL=128
        Reply from 192.168.2.4: bytes=32 time<1ms TTL=128
        Reply from 192.168.2.4: bytes=32 time=4ms TTL=128
        Reply from 192.168.2.4: bytes=32 time<1ms TTL=128
        Ping statistics for 192.168.2.4:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 10ms, Average = 3ms
    C:\>ping 192.168.3.3
        Pinging 192.168.3.3 with 32 bytes of data:
        Request timed out.
        Request timed out.
        Request timed out.
        Request timed out.
        Ping statistics for 192.168.3.3:
            Packets: Sent = 4, Received = 0, Lost = 4 (100% loss),
    Task:
    Исключим из trunk порта vlan 3
    Decision:
        Switch2960(1)->CLI
    Switch>en
    Switch#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Switch(config)#inter
    Switch(config)#interface gi
    Switch(config)#interface gigabitEthernet 0
    Switch(config)#interface gigabitEthernet 0/1
    Switch(config-if)#swit
    Switch(config-if)#switchport tru
    Switch(config-if)#switchport trunk vl
    Switch(config-if)#switchport trunk vlan
    Switch(config-if)#switchport trunk all
    Switch(config-if)#switchport trunk allowed  vl
    Switch(config-if)#switchport trunk allowed  vlan 2
    Switch(config-if)#end
    Switch#
        %SYS-5-CONFIG_I: Configured from console by console
    Switch#show run
        Building configuration...
        Current configuration : 1336 bytes
        !
        version 15.0
        no service timestamps log datetime msec
        no service timestamps debug datetime msec
        no service password-encryption
        !
        hostname Switch
        !
        !
        !
        !
        !
        !
        spanning-tree mode pvst
        spanning-tree extend system-id
        !
        interface FastEthernet0/1
         switchport access vlan 2
         switchport mode access
        !
        interface FastEthernet0/2
         switchport access vlan 2
         switchport mode access
        !
        interface FastEthernet0/3
         switchport access vlan 3
         switchport mode access
        !
        interface FastEthernet0/4
         switchport access vlan 3
         switchport mode access
        !
        interface FastEthernet0/5
        !
        interface FastEthernet0/6
        !
        interface FastEthernet0/7
        !
        interface FastEthernet0/8
        !
        interface FastEthernet0/9
        !
        interface FastEthernet0/10
        !
        interface FastEthernet0/11
        !
        interface FastEthernet0/12
        !
        interface FastEthernet0/13
        !
        interface FastEthernet0/14
        !
        interface FastEthernet0/15
        !
        interface FastEthernet0/16
        !
        interface FastEthernet0/17
        !
        interface FastEthernet0/18
        !
        interface FastEthernet0/19
        !
        interface FastEthernet0/20
        !
        interface FastEthernet0/21
        !
        interface FastEthernet0/22
        !
        interface FastEthernet0/23
        !
        interface FastEthernet0/24
        !
        interface GigabitEthernet0/1
         switchport trunk allowed vlan 2
         switchport mode trunk
        !
        interface GigabitEthernet0/2
        !
        interface Vlan1
         no ip address

        PC2->Command Prompt
    C:\>ping 192.168.3.3
        Pinging 192.168.3.3 with 32 bytes of data:
        Request timed out.
        Request timed out.
        Request timed out.
        Ping statistics for 192.168.3.3:
            Packets: Sent = 4, Received = 0, Lost = 4 (100% loss),
        Control-C
        ^C
    C:\>ping 192.168.3.4
        Pinging 192.168.3.4 with 32 bytes of data:
        Request timed out.
        Ping statistics for 192.168.3.4:
            Packets: Sent = 2, Received = 0, Lost = 2 (100% loss),
        Control-C
        ^C

        Switches->switch2960(switch0,1,2)->Connetctions->Automaticly->switch0,1,2->simulation->capture/forward

        realtime
    Task:
    Определить какой коммутатор является корневым(1)
    Decision:
        switch2->SLI
    Switch>en
    Switch#show sp
    Switch#show spanning-tree
        VLAN0001
          Spanning tree enabled protocol ieee
          Root ID    Priority    32769
                     Address     0001.6399.3513
                     This bridge is the root
                     Hello Time  2 sec  Max Age 20 sec  Forward Delay 15 sec
          Bridge ID  Priority    32769  (priority 32768 sys-id-ext 1)
                     Address     0001.6399.3513
                     Hello Time  2 sec  Max Age 20 sec  Forward Delay 15 sec
                     Aging Time  20
        Interface        Role Sts Cost      Prio.Nbr Type
        ---------------- ---- --- --------- -------- --------------------------------
        Fa0/1            Desg FWD 19        128.1    P2p
        Fa0/2            Desg FWD 19        128.2    P2p

        switch0->SLI
    Switch>en
    Switch#show sp
    Switch#show spanning-tree
        VLAN0001
          Spanning tree enabled protocol ieee
          Root ID    Priority    32769
                     Address     0001.6399.3513
                     Cost        19
                     Port        1(FastEthernet0/1)
                     Hello Time  2 sec  Max Age 20 sec  Forward Delay 15 sec
          Bridge ID  Priority    32769  (priority 32768 sys-id-ext 1)
                     Address     0060.5CAD.DBAA
                     Hello Time  2 sec  Max Age 20 sec  Forward Delay 15 sec
                     Aging Time  20
        Interface        Role Sts Cost      Prio.Nbr Type
        ---------------- ---- --- --------- -------- --------------------------------
        Fa0/1            Root FWD 19        128.1    P2p
        Fa0/2            Desg FWD 19        128.2    P2p

        switch1->SLI
    Switch>en
    Switch#show spa
    Switch#show spanning-tree
        VLAN0001
          Spanning tree enabled protocol ieee
          Root ID    Priority    32769
                     Address     0001.6399.3513
                     Cost        19
                     Port        1(FastEthernet0/1)
                     Hello Time  2 sec  Max Age 20 sec  Forward Delay 15 sec
          Bridge ID  Priority    32769  (priority 32768 sys-id-ext 1)
                     Address     00D0.BC9C.9D4A
                     Hello Time  2 sec  Max Age 20 sec  Forward Delay 15 sec
                     Aging Time  20
        Interface        Role Sts Cost      Prio.Nbr Type
        ---------------- ---- --- --------- -------- --------------------------------
        Fa0/1            Root FWD 19        128.1    P2p
        Fa0/2            Altn BLK 19        128.2    P2p

        Проверим что протоккол STP работает и попробуем разорвать соединение

        switch0->SLI
    Switch#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Switch(config)#inte
    Switch(config)#interface et
    Switch(config)#interface fa0/1
    Switch(config-if)#shutd
    Switch(config-if)#shutdown
    Switch(config-if)#
        %LINK-5-CHANGED: Interface FastEthernet0/1, changed state to administratively down
        %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/1, changed state to down

        switch1->SLI
    Switch#show spanning-tree
        VLAN0001
          Spanning tree enabled protocol ieee
          Root ID    Priority    32769
                     Address     0001.6399.3513
                     Cost        19
                     Port        1(FastEthernet0/1)
                     Hello Time  2 sec  Max Age 20 sec  Forward Delay 15 sec
          Bridge ID  Priority    32769  (priority 32768 sys-id-ext 1)
                     Address     00D0.BC9C.9D4A
                     Hello Time  2 sec  Max Age 20 sec  Forward Delay 15 sec
                     Aging Time  20
        Interface        Role Sts Cost      Prio.Nbr Type
        ---------------- ---- --- --------- -------- --------------------------------
        Fa0/1            Root FWD 19        128.1    P2p
        Fa0/2            Desg FWD 19        128.2    P2p

    Task:
    Рассмотрим другой пример

        Switches->switch2960(switch3,4)->PC0,1->Connetctions->Automaticly->switch3,4-switch4,3-PC0-switch3-PC1-switch4
    Decision:
        PC0,1->Desktop->ip configuration->ip->192.168.1.1,2->subnet mask->255.255.255.0->command prompt
    C:\>ping 192.168.1.1
        Pinging 192.168.1.1 with 32 bytes of data:
        Reply from 192.168.1.1: bytes=32 time=11ms TTL=128
        Reply from 192.168.1.1: bytes=32 time<1ms TTL=128
        Reply from 192.168.1.1: bytes=32 time<1ms TTL=128
        Reply from 192.168.1.1: bytes=32 time<1ms TTL=128
        Ping statistics for 192.168.1.1:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 11ms, Average = 2ms

        switch3->SLI
    Switch>en
    Switch#sho
    Switch#show spa
    Switch#show spanning-tree
    VLAN0001
      Spanning tree enabled protocol ieee
      Root ID    Priority    32769
                 Address     0000.0C42.5C20
                 Cost        19
                 Port        1(FastEthernet0/1)
                 Hello Time  2 sec  Max Age 20 sec  Forward Delay 15 sec

      Bridge ID  Priority    32769  (priority 32768 sys-id-ext 1)
                 Address     00D0.BAA0.D34D
                 Hello Time  2 sec  Max Age 20 sec  Forward Delay 15 sec
                 Aging Time  20
    Interface        Role Sts Cost      Prio.Nbr Type
    ---------------- ---- --- --------- -------- --------------------------------
    Fa0/1            Root FWD 19        128.1    P2p
    Fa0/3            Desg FWD 19        128.3    P2p
    Fa0/2            Altn BLK 19        128.2    P2p

        switch4->SLI
    Switch>en
    Switch#show sp
    Switch#show spanning-tree
        VLAN0001
          Spanning tree enabled protocol ieee
          Root ID    Priority    32769
                     Address     0000.0C42.5C20
                     This bridge is the root
                     Hello Time  2 sec  Max Age 20 sec  Forward Delay 15 sec

          Bridge ID  Priority    32769  (priority 32768 sys-id-ext 1)
                     Address     0000.0C42.5C20
                     Hello Time  2 sec  Max Age 20 sec  Forward Delay 15 sec
                     Aging Time  20
        Interface        Role Sts Cost      Prio.Nbr Type
        ---------------- ---- --- --------- -------- --------------------------------
        Fa0/1            Desg FWD 19        128.1    P2p
        Fa0/2            Desg FWD 19        128.2    P2p
        Fa0/3            Desg FWD 19        128.3    P2p
    Task:
    Попробуем разорвать соединение
    Decision:
        PC1->Command Prompt
    C:\>ping 192.168.1.1
        Pinging 192.168.1.1 with 32 bytes of data:
        Reply from 192.168.1.1: bytes=32 time=12ms TTL=128
        Reply from 192.168.1.1: bytes=32 time=1ms TTL=128
        Reply from 192.168.1.1: bytes=32 time<1ms TTL=128
        Reply from 192.168.1.1: bytes=32 time=1ms TTL=128
        Ping statistics for 192.168.1.1:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 12ms, Average = 3ms

        switch4->SLI
    Switch#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Switch(config)#int fa
    Switch(config)#int fastEthernet 0/1
    Switch(config-if)#shut
    Switch(config-if)#shutdown
    Switch(config-if)#
        %LINK-5-CHANGED: Interface FastEthernet0/1, changed state to administratively down
        %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/1, changed state to down
    Switch(config-if)# exit

        PC1->Command Prompt
    C:\>ping 192.168.1.1
        Pinging 192.168.1.1 with 32 bytes of data:
        Reply from 192.168.1.1: bytes=32 time<1ms TTL=128
        Reply from 192.168.1.1: bytes=32 time<1ms TTL=128
        Reply from 192.168.1.1: bytes=32 time<1ms TTL=128
        Reply from 192.168.1.1: bytes=32 time<1ms TTL=128
        Ping statistics for 192.168.1.1:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 0ms, Average = 0ms
    Task:
    За 15-20 сек связь восстановилась, переключение на резервный канал. Отказоустойчивость это хорошо, но хотелось сократить время подобного переключения. Для этого нужен протокол RSTP.
    Decision:
        switch4->SLI
    Switch(config)#span
    Switch(config)#spanning-tree mode rap
    Switch(config)#spanning-tree mode rapid-pvst

        switch3->SLI
    Switch>en
    Switch#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Switch(config)#spa
    Switch(config)#spanning-tree mode rap
    Switch(config)#spanning-tree mode rapid-pvst
    Switch(config)#end
    Switch#
        %SYS-5-CONFIG_I: Configured from console by console
    Switch#show sp
    Switch#show spanning-tree
        VLAN0001
          Spanning tree enabled protocol rstp
          Root ID    Priority    32769
                     Address     0000.0C42.5C20
                     Cost        19
                     Port        2(FastEthernet0/2)
                     Hello Time  2 sec  Max Age 20 sec  Forward Delay 15 sec
          Bridge ID  Priority    32769  (priority 32768 sys-id-ext 1)
                     Address     00D0.BAA0.D34D
                     Hello Time  2 sec  Max Age 20 sec  Forward Delay 15 sec
                     Aging Time  20
        Interface        Role Sts Cost      Prio.Nbr Type
        ---------------- ---- --- --------- -------- --------------------------------
        Fa0/3            Desg FWD 19        128.3    P2p
        Fa0/2            Root FWD 19        128.2    P2p

        switch4->SLI
    Switch(config)#int fa
    Switch(config)#int fastEthernet 0/1
    Switch(config-if)#no shu
    Switch(config-if)#no shutdown
    Switch(config-if)#
        %LINK-5-CHANGED: Interface FastEthernet0/1, changed state to up
        %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/1, changed state to up

        PC1->Command Prompt
    C:\>ping 192.168.1.1
        Pinging 192.168.1.1 with 32 bytes of data:
        Reply from 192.168.1.1: bytes=32 time<1ms TTL=128
        Reply from 192.168.1.1: bytes=32 time<1ms TTL=128
        Reply from 192.168.1.1: bytes=32 time<1ms TTL=128
        Reply from 192.168.1.1: bytes=32 time=1ms TTL=128
        Ping statistics for 192.168.1.1:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 1ms, Average = 0ms

        switch4->SLI
    Switch(config-if)#shutdown
    Switch(config-if)#
        %LINK-5-CHANGED: Interface FastEthernet0/1, changed state to administratively down
        %LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/1, changed state to down

        PC1->Command Prompt
    C:\>ping 192.168.1.1
        Pinging 192.168.1.1 with 32 bytes of data:
        Reply from 192.168.1.1: bytes=32 time<1ms TTL=128
        Reply from 192.168.1.1: bytes=32 time=15ms TTL=128
        Reply from 192.168.1.1: bytes=32 time<1ms TTL=128
        Reply from 192.168.1.1: bytes=32 time<1ms TTL=128
        Ping statistics for 192.168.1.1:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 15ms, Average = 3ms
    Task:
    Построим простейшую сеть
    Decision:
    $ packettracer

        end devices -> PC0 -> Switches -> 2960 -> connections -> console -> rs232-console -> PC0 -> Desktop -> terminal
    Task:
    Подключаемся по консоли
    Decision:
    Switch>?
        Exec commands:
          connect     Open a terminal connection
          disable     Turn off privileged commands
          disconnect  Disconnect an existing network connection
          enable      Turn on privileged commands
          exit        Exit from the EXEC
          logout      Exit from the EXEC
          ping        Send echo messages
          resume      Resume an active network connection
          show        Show running system information
          ssh         Open a secure shell client connection
          telnet      Open a telnet connection
          terminal    Set terminal line parameters
          traceroute  Trace route to destination
    Switch>enable
    Switch#disable
    Switch>enable
    Switch#show running-config
        Building configuration...
        Current configuration : 1080 bytes
        !
        version 15.0
        no service timestamps log datetime msec
        no service timestamps debug datetime msec
        no service password-encryption
        !
        hostname Switch
        !
        !
        !
        !
        !
        !
        spanning-tree mode pvst
        spanning-tree extend system-id
        !
        interface FastEthernet0/1
        !
        interface FastEthernet0/2
    Switch#show run
        Building configuration...
        Current configuration : 1080 bytes
        !
        version 15.0
        no service timestamps log datetime msec
        no service timestamps debug datetime msec
        no service password-encryption
        !
        hostname Switch
        !
        !
        !
        !
        !
        !
        spanning-tree mode pvst
        spanning-tree extend system-id
        !
        interface FastEthernet0/1
        !
        interface FastEthernet0/2
        !
        interface FastEthernet0/3
        !
        interface FastEthernet0/4
        !
        interface FastEthernet0/5
        !
        interface FastEthernet0/6
        !
        interface FastEthernet0/7
        !
        interface FastEthernet0/8
        !
        interface FastEthernet0/9
        !
        interface FastEthernet0/10
        !
        interface FastEthernet0/11
        !
        interface FastEthernet0/12
        !
        interface FastEthernet0/13
        !
        interface FastEthernet0/14
        !
        interface FastEthernet0/15
        !
        interface FastEthernet0/16
        !
        interface FastEthernet0/17
        !
        interface FastEthernet0/18
        !
        interface FastEthernet0/19
        !
        interface FastEthernet0/20
        !
        interface FastEthernet0/21
        !
        interface FastEthernet0/22
        !
        interface FastEthernet0/23
        !
        interface FastEthernet0/24
        !
        interface GigabitEthernet0/1
        !
        interface GigabitEthernet0/2
        !
        interface Vlan1
         no ip address
         shutdown
        !
        !
        !
        !
        line con 0
        !
        line vty 0 4
         login
        line vty 5 15
         login
        !
        !
        !
        !
        end
    Switch#configure terminal
        Enter configuration commands, one per line.  End with CNTL/Z.
    Switch(config)#exit
    Switch#
        %SYS-5-CONFIG_I: Configured from console by console
    Switch#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Task:
    Задаем пароль на привилегированный режим (enable)
    Decision:
    Switch(config)#enable password cisco
    Switch(config)#exit
    Switch#
        %SYS-5-CONFIG_I: Configured from console by console
    Switch#disable
    Switch>enable
        Password:
    Switch#show run
        Building configuration...
        Current configuration : 1104 bytes
        !
        version 15.0
        no service timestamps log datetime msec
        no service timestamps debug datetime msec
        no service password-encryption
        !
        hostname Switch
        !
        enable password cisco
        !
        !
        !
        !
        !
        !
        spanning-tree mode pvst
        spanning-tree extend system-id
        !
        interface FastEthernet0/1
    Switch#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Switch(config)#service passwor-e
    Switch(config)#service passwor-en
    Switch(config)#service passwor-ec
    Switch(config)#service password
    Switch(config)#service password-encryption
    Switch(config)#exit
    Switch#
        %SYS-5-CONFIG_I: Configured from console by console
    Switch#show run
        Building configuration...
        Current configuration : 1110 bytes
        !
        version 15.0
        no service timestamps log datetime msec
        no service timestamps debug datetime msec
        service password-encryption
        !
        hostname Switch
        !
        enable password 7 0822455D0A16
        !
        !
        !
        !
        !
        !
        spanning-tree mode pvst
        spanning-tree extend system-id
        !
        interface FastEthernet0/1
    Switch#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Switch(config)#enable secret cisco2
    Switch(config)#do show run
        Building configuration...
        Current configuration : 1157 bytes
        !
        version 15.0
        no service timestamps log datetime msec
        no service timestamps debug datetime msec
        service password-encryption
        !
        hostname Switch
        !
        enable secret 5 $1$mERr$yG9qv7LLYVv0YzwRYtdTM/
        enable password 7 0822455D0A16
        !
        !
        !
        !
        !
        !
        spanning-tree mode pvst
        spanning-tree extend system-id
        !
    Switch(config)#service password-encryption
    Switch(config)#do show run
        Building configuration...
        Current configuration : 1157 bytes
        !
        version 15.0
        no service timestamps log datetime msec
        no service timestamps debug datetime msec
        service password-encryption
        !
        hostname Switch
        !
        enable secret 5 $1$mERr$yG9qv7LLYVv0YzwRYtdTM/
        enable password 7 0822455D0A16
        !
        !
        !
        !
        !
        !
        spanning-tree mode pvst
        spanning-tree extend system-id
        !
    Task:
    Создаем пользователя
    Decision:
    Switch(config)#user
    Switch(config)#username ?
          WORD  User name
    Switch(config)#username admin ?
          password   Specify the password for the user
          privilege  Set user privilege level
          secret     Specify the secret for the user
          <cr>
    Switch(config)#username admin pri
    Switch(config)#username admin privilege ?
          <0-15>  User privilege level
    Switch(config)#username admin privilege 15 ?
          password  Specify the password for the user
          secret    Specify the secret for the user
          <cr>
    Switch(config)#username admin privilege 15 password cisco
    Task:
    Устанавливаем авторизацию на подключение к консоли
    Decision:
    Switch(config)#line ?
          <0-16>   First Line number
          console  Primary terminal line
          vty      Virtual terminal
    Switch(config)#line co
    Switch(config)#line console ?
          <0-0>  First Line number
    Switch(config)#line console 0
    Switch(config-line)#?
        Line configuration commands:
          access-class  Filter connections based on an IP access list
          accounting    Accounting parameters
          databits      Set number of data bits per character
          default       Set a command to its defaults
          exec-timeout  Set the EXEC timeout
          exit          Exit from line configuration mode
          flowcontrol   Set the flow control
          history       Enable and control the command history function
          logging       Modify message logging facilities
          login         Enable password checking
          motd-banner   Enable the display of the MOTD banner
          no            Negate a command or set its defaults
          parity        Set terminal parity
          password      Set a password
          privilege     Change privilege level for line
          speed         Set the transmit and receive speeds
          stopbits      Set async line stop bits
          transport     Define transport protocols for line
    Switch(config-line)#login ?
          authentication  authenticate using aaa method list
          local           Local password checking
          <cr>
    Switch(config-line)#login local
    Switch(config-line)#end
    Switch#
        %SYS-5-CONFIG_I: Configured from console by console
    Task:
    Задаем IP-адрес устройства
    Decision:
    Switch#show run
        Building configuration...
        Current configuration : 1224 bytes
        !
        version 15.0
        no service timestamps log datetime msec
        no service timestamps debug datetime msec
        service password-encryption
        !
        hostname Switch
        !
        enable secret 5 $1$mERr$yG9qv7LLYVv0YzwRYtdTM/
        enable password 7 0822455D0A16
        !
        !
        !
        !
        username admin privilege 15 password 7 0822455D0A16
        !
        !
        !
        spanning-tree mode pvst
        spanning-tree extend system-id
        !
        interface FastEthernet0/1
        !
        interface FastEthernet0/2
        !
        interface FastEthernet0/3
        !
        interface FastEthernet0/4
        !
        interface FastEthernet0/5
        !
        interface FastEthernet0/6
        !
        interface FastEthernet0/7
        !
        interface FastEthernet0/8
        !
        interface FastEthernet0/9
        !
        interface FastEthernet0/10
        !
        interface FastEthernet0/11
        !
        interface FastEthernet0/12
        !
        interface FastEthernet0/13
        !
        interface FastEthernet0/14
        !
        interface FastEthernet0/15
        !
        interface FastEthernet0/16
        !
        interface FastEthernet0/17
        !
        interface FastEthernet0/18
        !
        interface FastEthernet0/19
        !
        interface FastEthernet0/20
        !
        interface FastEthernet0/21
        !
        interface FastEthernet0/22
        !
        interface FastEthernet0/23
        !
        interface FastEthernet0/24
        !
        interface GigabitEthernet0/1
        !
        interface GigabitEthernet0/2
        !
        interface Vlan1
         no ip address
         shutdown
        !
        !
        !
        !
        line con 0
         login local
        !
        line vty 0 4
         login
        line vty 5 15
         login
        !
        !
        !
        !
        end
    Switch#conf t
        Enter configuration commands, one per line.  End with CNTL/Z.
    Switch(config)#inter
    Switch(config)#interface Vlan1
    Switch(config-if)#?
        Interface configuration commands:
          arp          Set arp type (arpa, probe, snap) or timeout
          description  Interface specific description
          exit         Exit from interface configuration mode
          ip           Interface Internet Protocol config commands
          no           Negate a command or set its defaults
          shutdown     Shutdown the selected interface
          standby      HSRP interface configuration commands
    Switch(config-if)#ip ?
          address         Set the IP address of an interface
          helper-address  Specify a destination address for UDP broadcasts
    Switch(config-if)#ip add
    Switch(config-if)#ip address 192.168.0.1 255.255.255.0
    Switch(config-if)#no shu
    Switch(config-if)#no shutdown
    Switch(config-if)#
        %LINK-5-CHANGED: Interface Vlan1, changed state to up
    Switch(config-if)#exit
    Task:
    Выбираем тип удаленного подключения (Telnet/SSH)
    Decision:
    Switch(config)#line ?
          <0-16>   First Line number
          console  Primary terminal line
          vty      Virtual terminal
    Switch(config)#line vt
    Switch(config)#line vty ?
          <0-15>  First Line number
    Switch(config)#line vty 0 4
    Switch(config-line)#?
        Virtual Line configuration commands:
          access-class  Filter connections based on an IP access list
          accounting    Accounting parameters
          databits      Set number of data bits per character
          exec-timeout  Set the EXEC timeout
          exit          Exit from line configuration mode
          flowcontrol   Set the flow control
          history       Enable and control the command history function
          logging       Modify message logging facilities
          login         Enable password checking
          motd-banner   Enable the display of the MOTD banner
          no            Negate a command or set its defaults
          parity        Set terminal parity
          password      Set a password
          privilege     Change privilege level for line
          speed         Set the transmit and receive speeds
          stopbits      Set async line stop bits
          transport     Define transport protocols for line
    Switch(config-line)#transport ?
          input   Define which protocols to use when connecting to the terminal server
          output  Define which protocols to use for outgoing connections
    Switch(config-line)#transport in
    Switch(config-line)#transport input ?
          all     All protocols
          none    No protocols
          ssh     TCP/IP SSH protocol
          telnet  TCP/IP Telnet protocol
    Switch(config-line)#transport input telnet
    Task:
    Включаем авторизацию для удаленных подключений
    Decision:
    Switch(config-line)#login ?
          authentication  authenticate using aaa method list
          local           Local password checking
          <cr>
    Switch(config-line)#login local
    Switch(config-line)#end
    Switch#
        %SYS-5-CONFIG_I: Configured from console by console
    Switch#write memory
        Building configuration...
        [OK]

        connections -> copper straight-throught -> PC0-Switch -> PC0 -> Desktop -> IP configuration -> ipv4 - 192.168.0.2 -> subnet mask - 255.255.255.0 -> command prompt ->
    C:\>ping 192.168.0.1
        Pinging 192.168.0.1 with 32 bytes of data
        Request timed out.
        Reply from 192.168.0.1: bytes=32 time<1ms TTL=255
        Reply from 192.168.0.1: bytes=32 time<1ms TTL=255
        Reply from 192.168.0.1: bytes=32 time=5ms TTL=255
        Ping statistics for 192.168.0.1:
            Packets: Sent = 4, Received = 3, Lost = 1 (25% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 5ms, Average = 1ms
    C:\>ping 192.168.0.1
        Pinging 192.168.0.1 with 32 bytes of data:
        Reply from 192.168.0.1: bytes=32 time<1ms TTL=255
        Reply from 192.168.0.1: bytes=32 time<1ms TTL=255
        Reply from 192.168.0.1: bytes=32 time<1ms TTL=255
        Reply from 192.168.0.1: bytes=32 time<1ms TTL=255
        Ping statistics for 192.168.0.1:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 0ms, Average = 0ms
    C:\>telnet 192.168.0.1
        Trying 192.168.0.1 ...Open
        User Access Verification
        Username: Admin
        Password:
    Switch#
    Task:
    Построим простейшую сеть
    Decision:
    $ packettracer

        end devices -> PC (2) -> connections -> copper cross cover -> PC0 -> Desktop -> ip configuration -> ipv4 - 192.168.1.1 -> subnet mask - 255.255.255.0 -> PC1 -> Desktop -> ip configuration -> ipv4 - 192.168.1.2 -> subnet mask - 255.255.255.0 -> PC0 -> Desktop -> Command Prompt
    C:\>ping 192.168.1.2
        Pinging 192.168.1.2 with 32 bytes of data:
        Reply from 192.168.1.2: bytes=32 time<1ms TTL=128
        Reply from 192.168.1.2: bytes=32 time<1ms TTL=128
        Reply from 192.168.1.2: bytes=32 time<1ms TTL=128
        Reply from 192.168.1.2: bytes=32 time<1ms TTL=128
        Ping statistics for 192.168.1.2:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 0ms, Average = 0ms
    Task:
    Коммутатор
    Decision:
    $ packettracer

        end devices -> PC4,5,6,7 -> Desktop -> ip configuration -> ipv4 - 192.168.1.2,3,4,5 -> subnet mask - 255.255.255.0 -> Switches -> 2960 -> connections -> copper straight-throuht ->
    C:\>ping 192.168.1.3
        Pinging 192.168.1.3 with 32 bytes of data:
        Reply from 192.168.1.3: bytes=32 time<1ms TTL=128
        Reply from 192.168.1.3: bytes=32 time<1ms TTL=128
        Reply from 192.168.1.3: bytes=32 time=3ms TTL=128
        Reply from 192.168.1.3: bytes=32 time=12ms TTL=128
        Ping statistics for 192.168.1.3:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 12ms, Average = 3

        Hubs -> PT Hub -> Connections -> скопируем PC4,5,6,7
    C:\>ping 192.168.1.3
        Pinging 192.168.1.3 with 32 bytes of data:
        Reply from 192.168.1.3: bytes=32 time<1ms TTL=128
        Reply from 192.168.1.3: bytes=32 time=1ms TTL=128
        Reply from 192.168.1.3: bytes=32 time<1ms TTL=128
        Reply from 192.168.1.3: bytes=32 time=1ms TTL=128
        Ping statistics for 192.168.1.3:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 1ms, Average = 0ms
    C:\>ping 192.168.1.4
        Pinging 192.168.1.4 with 32 bytes of data:
        Reply from 192.168.1.4: bytes=32 time<1ms TTL=128
        Reply from 192.168.1.4: bytes=32 time<1ms TTL=128
        Reply from 192.168.1.4: bytes=32 time<1ms TTL=128
        Reply from 192.168.1.4: bytes=32 time=1ms TTL=128
        Ping statistics for 192.168.1.4:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 1ms, Average = 0ms
    C:\>ping 192.168.1.5
        Pinging 192.168.1.5 with 32 bytes of data:
        Reply from 192.168.1.5: bytes=32 time<1ms TTL=128
        Reply from 192.168.1.5: bytes=32 time=1ms TTL=128
        Reply from 192.168.1.5: bytes=32 time<1ms TTL=128
        Reply from 192.168.1.5: bytes=32 time<1ms TTL=128
        Ping statistics for 192.168.1.5:
            Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
        Approximate round trip times in milli-seconds:
            Minimum = 0ms, Maximum = 1ms, Average = 0ms

        add simple pdu -> PC4-PC7, PC4(1)-PC7(1) -> Simulation
    Source:
    1. https://www.youtube.com/watch?v=04VpVYO7F78
    2. https://www.youtube.com/playlist?list=PLcDkQ2Au8aVNYsqGsxRQxYyQijILa94T9
    3. https://www.youtube.com/watch?v=kg5CalaPOLA

Сетевые настройки
    Task:
    Компьютер подключен к интернету с помощью pppoe соединения. Одно из необходимых условий функционирования – автоподключение интернета при запуске ОС. Предложите на ваш взгляд способ решения автозапуска в случае запуска рабочего стола при загрузке.
    Task:
    Одна сеть работает с 1С, вторая сеть работает с ФИС. Фис взаимодествует с 1С, когда, например, нужно выгрузить из 1Ски сканированные заявления в ФИС. Но две сети не видели друг другa. Нужно использовать локальную сеть с VipNET координатором и через командную строку тут уже нужно будет посмотреть маршрут и прописать маршрут до ФИСа указав шлюз тот, по которому нету координатора
    АДРЕС ПОДСЕТИ - это адрес подсети сети фис или тот адрес который в браузере ввожу,
    МАСКА СЕТИ - маска сети того адреса 0 или 255 в конце.
    АДРЕС ШЛЮЗА - адрес того шлюза где нет випнета
    Decision:
    route print
    route add -p АДРЕС ПОДСЕТИ mask МАСКА СЕТИ АДРЕС ШЛЮЗА
    route print
    Decision:
    C:\WINDOWS\system32>route -f
    C:\WINDOWS\system32>route print
      ===========================================================================
      IPv4 таблица маршрута
      ===========================================================================
      Активные маршруты:
        Отсутствует
      Постоянные маршруты:
        Отсутствует
    C:\WINDOWS\system32>route add -p tIp2 mask 255.255.255.255 tIp3
    C:\WINDOWS\system32>route print
      ===========================================================================
      IPv4 таблица маршрута
      ===========================================================================
      Активные маршруты:
        Отсутствует
      Постоянные маршруты:
        Сетевой адрес            Маска    Адрес шлюза      Метрика
               tIp2  255.255.255.255   tIp3       1
    C:\WINDOWS\system32>route print
      ===========================================================================
      IPv4 таблица маршрута
      ===========================================================================
      Активные маршруты:
      Сетевой адрес           Маска сети      Адрес шлюза       Интерфейс  Метрика
      ===========================================================================
      Постоянные маршруты:
        Сетевой адрес            Маска    Адрес шлюза      Метрика
               tIp2  255.255.255.255   tIp3       1
    C:\WINDOWS\system32>route add -p tIp1 mask 255.255.255.255 tIp5 metric 35
    C:\WINDOWS\system32>route print
      ===========================================================================
      IPv4 таблица маршрута
      ===========================================================================
      Активные маршруты:
      Сетевой адрес           Маска сети      Адрес шлюза       Интерфейс  Метрика
           tIp1  255.255.255.255         On-link        tIp5   4261
      ===========================================================================
      Постоянные маршруты:
        Сетевой адрес            Маска    Адрес шлюза      Метрика
               tIp2  255.255.255.255   tIp3       1
           tIp1  255.255.255.255       tIp5      35
    C:\WINDOWS\system32>route change tIp1 mask 255.255.255.255 tIp4 metric 35
    C:\WINDOWS\system32>route print
      ===========================================================================
      IPv4 таблица маршрута
      ===========================================================================
      Активные маршруты:
      Сетевой адрес           Маска сети      Адрес шлюза       Интерфейс  Метрика
           tIp1  255.255.255.255        tIp4       tIp5   4261
      ===========================================================================
      Постоянные маршруты:
        Сетевой адрес            Маска    Адрес шлюза      Метрика
               tIp2  255.255.255.255   tIp3       1
    C:\WINDOWS\system32>route add -p tIp1 mask 255.255.255.255 tIp4 metric 35
    C:\WINDOWS\system32>route print
      ===========================================================================
      IPv4 таблица маршрута
      ===========================================================================
      Активные маршруты:
      Сетевой адрес           Маска сети      Адрес шлюза       Интерфейс  Метрика
           tIp1  255.255.255.255        tIp4       tIp5   4261
      ===========================================================================
      Постоянные маршруты:
        Сетевой адрес            Маска    Адрес шлюза      Метрика
               tIp2  255.255.255.255   tIp3       1
           tIp1  255.255.255.255        tIp4      35
    Task:
    Я случайно добавил не тот адрес, чтобы удалить его со строки
    Decision:
    route delete АДРЕС ПОДСЕТИ, КОТОРОЙ МЫ ХОТИМ УДАЛИТЬ mask МАСКА СЕТИ АДРЕС ШЛЮЗА
    Task:
    Если не работает сеть в компе
    Decision:
    смотрим IP в свойствах сети (должно быть 10.10.., а не 169 или 125), перезагруж, если таже проблема осталась гуглим - команда для сброса настроек IP (должны быть 3 команды):
    netsh WinSook reset
    netsh int ip reset c:\reset log.txt
    ipconfig /flush dns
    Task:
    обжим кабеля ПК-ПК
    Decision:
    к,бк,з,бс,с,бз,о,бо/бз,з,бо,с,бс,о,бк,к
    Task:
    обжим кабеля ПК-коммутатор
    Decision:
    к,бк,з,бс,с,бз,о,бо



  




